{"file_contents":{"drizzle.config.ts":{"content":"import { defineConfig } from \"drizzle-kit\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL, ensure the database is provisioned\");\n}\n\nexport default defineConfig({\n  out: \"./migrations\",\n  schema: \"./shared/schema.ts\",\n  dialect: \"postgresql\",\n  dbCredentials: {\n    url: process.env.DATABASE_URL,\n  },\n});\n","size_bytes":325},"postcss.config.js":{"content":"export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","size_bytes":80},"replit.md":{"content":"# Online Reviewer System\n\n## Overview\n\nThe Online Reviewer System is a comprehensive full-stack web application that facilitates a review-based earning model. Users purchase products through mediators, submit reviews on e-commerce platforms, and receive refunds. The system tracks orders, manages mediator relationships, handles multiple platform accounts, and provides notifications for order status updates.\n\nThe application features a React frontend with TypeScript, shadcn/ui components, and TailwindCSS for styling. The backend uses Express.js with TypeScript and connects to a PostgreSQL database via Drizzle ORM. Authentication is handled through Replit's OIDC system, and the application supports multiple Indian e-commerce platforms including Amazon, Flipkart, Myntra, and others.\n\n## User Preferences\n\nPreferred communication style: Simple, everyday language.\n\n## System Architecture\n\n### Frontend Architecture\n- **Framework**: React 18 with TypeScript and Vite for development/build tooling\n- **Routing**: Wouter for lightweight client-side routing\n- **State Management**: TanStack Query (React Query) for server state management and caching\n- **UI Components**: shadcn/ui component library built on Radix UI primitives\n- **Styling**: TailwindCSS with CSS custom properties for theming\n- **Forms**: React Hook Form with Zod validation for type-safe form handling\n\n### Backend Architecture\n- **Runtime**: Node.js with Express.js framework using ES modules\n- **Language**: TypeScript with strict type checking enabled\n- **API Pattern**: RESTful API design with Express route handlers\n- **Error Handling**: Global error middleware with structured error responses\n- **Logging**: Custom request/response logging middleware for API routes\n\n### Authentication & Session Management\n- **Provider**: Replit OIDC authentication system\n- **Session Storage**: PostgreSQL-backed session store using connect-pg-simple\n- **Strategy**: Passport.js with OpenID Connect strategy\n- **Security**: HTTP-only cookies with secure flags for production\n\n### Data Storage Solutions\n- **Primary Database**: PostgreSQL with connection pooling via Neon serverless\n- **ORM**: Drizzle ORM with type-safe schema definitions and migrations\n- **Schema Management**: Centralized schema definitions in shared directory with Zod integration\n- **Currency Handling**: Integer-based storage in paise to avoid floating-point precision issues\n\n### Database Schema Design\n- **Users**: OIDC-compatible user profiles with email and metadata\n- **User Settings**: Configuration for calendar integration with Google OAuth tokens\n- **Mediators**: Third-party dealers with WhatsApp contact information\n- **Accounts**: E-commerce platform account credentials and details\n- **Orders**: Complete order lifecycle tracking with status management and calendar event IDs\n- **Activity Logs**: Comprehensive audit trail for all order changes and system actions\n- **Notifications**: System-generated alerts with type classification\n- **Sessions**: Secure session persistence for authentication state\n\n### Business Logic Architecture\n- **Order Status Flow**: Eight-stage status progression from \"Ordered\" to \"Refunded\"\n- **Multi-Platform Support**: Eight major Indian e-commerce platforms supported\n- **Currency System**: INR-based with paise storage and formatted display\n- **Notification System**: Automated notifications for order status changes and deadlines\n- **Activity Logging**: Automatic tracking of all order changes (creation, status updates, date modifications) with enum-based activity types\n- **Smart Notifications**: Intelligent dashboard card that analyzes orders and highlights those needing immediate attention, upcoming deadlines, or overdue tasks\n- **Calendar Integration**: Google Calendar sync for automatic deadline management\n  - Creates events for delivery dates, review deadlines, and refund form submissions\n  - Updates existing events when order dates change (no duplicates)\n  - Deletes calendar events when orders are deleted or dates are cleared\n  - Stores calendar event IDs in orders table for proper lifecycle management\n\n### Development & Deployment\n- **Module System**: ES modules throughout with proper import/export patterns\n- **Build Process**: Vite for frontend bundling, esbuild for server compilation\n- **Development Server**: Hot module replacement with Vite middleware integration\n- **Path Aliases**: Centralized import paths using TypeScript path mapping\n\n## External Dependencies\n\n### Core Framework Dependencies\n- **@tanstack/react-query**: Server state management and caching\n- **wouter**: Lightweight React routing\n- **react-hook-form**: Form state management\n- **@hookform/resolvers**: Form validation resolvers\n\n### UI Component Libraries\n- **@radix-ui/***: Comprehensive set of accessible UI primitives for modals, dropdowns, forms, and navigation\n- **shadcn/ui**: Pre-built component library based on Radix UI\n- **lucide-react**: Icon library for consistent iconography\n\n### Database & Backend Services\n- **@neondatabase/serverless**: PostgreSQL serverless database connectivity\n- **drizzle-orm**: Type-safe ORM with PostgreSQL dialect\n- **drizzle-kit**: Database migration and schema management tools\n- **connect-pg-simple**: PostgreSQL session store for Express sessions\n\n### Authentication Infrastructure\n- **passport**: Authentication middleware framework\n- **openid-client**: OpenID Connect client implementation\n- **express-session**: Session management middleware\n- **google-auth-library**: Google OAuth2 authentication for calendar integration\n- **googleapis**: Google Calendar API client for event management\n\n### Styling & Development Tools\n- **tailwindcss**: Utility-first CSS framework\n- **class-variance-authority**: Type-safe utility for component variants\n- **date-fns**: Date manipulation and formatting utilities\n- **zod**: Runtime type validation and schema definition\n\n### Development Environment\n- **@replit/vite-plugin-***: Replit-specific development tooling and error overlay\n- **typescript**: Static type checking and compilation\n- **vite**: Frontend build tool and development server\n- **esbuild**: Fast bundler for server-side code","size_bytes":6158},"tailwind.config.ts":{"content":"import type { Config } from \"tailwindcss\";\n\nexport default {\n  darkMode: [\"class\"],\n  content: [\"./client/index.html\", \"./client/src/**/*.{js,jsx,ts,tsx}\"],\n  theme: {\n    extend: {\n      borderRadius: {\n        lg: \"var(--radius)\",\n        md: \"calc(var(--radius) - 2px)\",\n        sm: \"calc(var(--radius) - 4px)\",\n      },\n      colors: {\n        background: \"var(--background)\",\n        foreground: \"var(--foreground)\",\n        card: {\n          DEFAULT: \"var(--card)\",\n          foreground: \"var(--card-foreground)\",\n        },\n        popover: {\n          DEFAULT: \"var(--popover)\",\n          foreground: \"var(--popover-foreground)\",\n        },\n        primary: {\n          DEFAULT: \"var(--primary)\",\n          foreground: \"var(--primary-foreground)\",\n        },\n        secondary: {\n          DEFAULT: \"var(--secondary)\",\n          foreground: \"var(--secondary-foreground)\",\n        },\n        muted: {\n          DEFAULT: \"var(--muted)\",\n          foreground: \"var(--muted-foreground)\",\n        },\n        accent: {\n          DEFAULT: \"var(--accent)\",\n          foreground: \"var(--accent-foreground)\",\n        },\n        destructive: {\n          DEFAULT: \"var(--destructive)\",\n          foreground: \"var(--destructive-foreground)\",\n        },\n        border: \"var(--border)\",\n        input: \"var(--input)\",\n        ring: \"var(--ring)\",\n        chart: {\n          \"1\": \"var(--chart-1)\",\n          \"2\": \"var(--chart-2)\",\n          \"3\": \"var(--chart-3)\",\n          \"4\": \"var(--chart-4)\",\n          \"5\": \"var(--chart-5)\",\n        },\n        sidebar: {\n          DEFAULT: \"var(--sidebar-background)\",\n          foreground: \"var(--sidebar-foreground)\",\n          primary: \"var(--sidebar-primary)\",\n          \"primary-foreground\": \"var(--sidebar-primary-foreground)\",\n          accent: \"var(--sidebar-accent)\",\n          \"accent-foreground\": \"var(--sidebar-accent-foreground)\",\n          border: \"var(--sidebar-border)\",\n          ring: \"var(--sidebar-ring)\",\n        },\n      },\n      fontFamily: {\n        sans: [\"var(--font-sans)\"],\n        serif: [\"var(--font-serif)\"],\n        mono: [\"var(--font-mono)\"],\n      },\n      keyframes: {\n        \"accordion-down\": {\n          from: {\n            height: \"0\",\n          },\n          to: {\n            height: \"var(--radix-accordion-content-height)\",\n          },\n        },\n        \"accordion-up\": {\n          from: {\n            height: \"var(--radix-accordion-content-height)\",\n          },\n          to: {\n            height: \"0\",\n          },\n        },\n      },\n      animation: {\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\n      },\n    },\n  },\n  plugins: [require(\"tailwindcss-animate\"), require(\"@tailwindcss/typography\")],\n} satisfies Config;\n","size_bytes":2766},"vite.config.ts":{"content":"import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport path from \"path\";\nimport runtimeErrorOverlay from \"@replit/vite-plugin-runtime-error-modal\";\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    runtimeErrorOverlay(),\n    ...(process.env.NODE_ENV !== \"production\" &&\n    process.env.REPL_ID !== undefined\n      ? [\n          await import(\"@replit/vite-plugin-cartographer\").then((m) =>\n            m.cartographer(),\n          ),\n        ]\n      : []),\n  ],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(import.meta.dirname, \"client\", \"src\"),\n      \"@shared\": path.resolve(import.meta.dirname, \"shared\"),\n      \"@assets\": path.resolve(import.meta.dirname, \"attached_assets\"),\n    },\n  },\n  root: path.resolve(import.meta.dirname, \"client\"),\n  build: {\n    outDir: path.resolve(import.meta.dirname, \"dist/public\"),\n    emptyOutDir: true,\n  },\n  server: {\n    fs: {\n      strict: true,\n      deny: [\"**/.*\"],\n    },\n  },\n});\n","size_bytes":971},"server/db.ts":{"content":"import { Pool, neonConfig } from '@neondatabase/serverless';\nimport { drizzle } from 'drizzle-orm/neon-serverless';\nimport ws from \"ws\";\nimport * as schema from \"@shared/schema\";\n\nneonConfig.webSocketConstructor = ws;\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\n    \"DATABASE_URL must be set. Did you forget to provision a database?\",\n  );\n}\n\nexport const pool = new Pool({ connectionString: process.env.DATABASE_URL });\nexport const db = drizzle({ client: pool, schema });","size_bytes":482},"server/index.ts":{"content":"import express, { type Request, Response, NextFunction } from \"express\";\nimport { registerRoutes } from \"./routes\";\nimport { setupVite, serveStatic, log } from \"./vite\";\nimport { runStartupMigrations } from \"./db-migration\";\n\nconst app = express();\napp.use(express.json());\napp.use(express.urlencoded({ extended: false }));\n\napp.use((req, res, next) => {\n  const start = Date.now();\n  const path = req.path;\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\n\n  const originalResJson = res.json;\n  res.json = function (bodyJson, ...args) {\n    capturedJsonResponse = bodyJson;\n    return originalResJson.apply(res, [bodyJson, ...args]);\n  };\n\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    if (path.startsWith(\"/api\")) {\n      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) {\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      }\n\n      if (logLine.length > 80) {\n        logLine = logLine.slice(0, 79) + \"…\";\n      }\n\n      log(logLine);\n    }\n  });\n\n  next();\n});\n\n(async () => {\n  // Run database migrations first\n  await runStartupMigrations();\n  \n  const server = await registerRoutes(app);\n\n  app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {\n    const status = err.status || err.statusCode || 500;\n    const message = err.message || \"Internal Server Error\";\n\n    res.status(status).json({ message });\n    throw err;\n  });\n\n  // importantly only setup vite in development and after\n  // setting up all the other routes so the catch-all route\n  // doesn't interfere with the other routes\n  if (app.get(\"env\") === \"development\") {\n    await setupVite(app, server);\n  } else {\n    serveStatic(app);\n  }\n\n  // ALWAYS serve the app on the port specified in the environment variable PORT\n  // Other ports are firewalled. Default to 5000 if not specified.\n  // this serves both the API and the client.\n  // It is the only port that is not firewalled.\n  const port = parseInt(process.env.PORT || '5000', 10);\n  server.listen({\n    port,\n    host: \"0.0.0.0\",\n    reusePort: true,\n  }, () => {\n    log(`serving on port ${port}`);\n  });\n})();\n","size_bytes":2191},"server/replitAuth.ts":{"content":"import * as client from \"openid-client\";\nimport { Strategy, type VerifyFunction } from \"openid-client/passport\";\n\nimport passport from \"passport\";\nimport session from \"express-session\";\nimport type { Express, RequestHandler } from \"express\";\nimport memoize from \"memoizee\";\nimport connectPg from \"connect-pg-simple\";\nimport { storage } from \"./storage\";\n\nif (!process.env.REPLIT_DOMAINS) {\n  throw new Error(\"Environment variable REPLIT_DOMAINS not provided\");\n}\n\nconst getOidcConfig = memoize(\n  async () => {\n    return await client.discovery(\n      new URL(process.env.ISSUER_URL ?? \"https://replit.com/oidc\"),\n      process.env.REPL_ID!\n    );\n  },\n  { maxAge: 3600 * 1000 }\n);\n\nexport function getSession() {\n  const sessionTtl = 7 * 24 * 60 * 60 * 1000; // 1 week\n  const pgStore = connectPg(session);\n  const sessionStore = new pgStore({\n    conString: process.env.DATABASE_URL,\n    createTableIfMissing: false,\n    ttl: sessionTtl,\n    tableName: \"sessions\",\n  });\n  return session({\n    secret: process.env.SESSION_SECRET!,\n    store: sessionStore,\n    resave: false,\n    saveUninitialized: false,\n    cookie: {\n      httpOnly: true,\n      secure: true,\n      maxAge: sessionTtl,\n    },\n  });\n}\n\nfunction updateUserSession(\n  user: any,\n  tokens: client.TokenEndpointResponse & client.TokenEndpointResponseHelpers\n) {\n  user.claims = tokens.claims();\n  user.access_token = tokens.access_token;\n  user.refresh_token = tokens.refresh_token;\n  user.expires_at = user.claims?.exp;\n}\n\nasync function upsertUser(\n  claims: any,\n) {\n  await storage.upsertUser({\n    id: claims[\"sub\"],\n    email: claims[\"email\"],\n    firstName: claims[\"first_name\"],\n    lastName: claims[\"last_name\"],\n    profileImageUrl: claims[\"profile_image_url\"],\n  });\n}\n\nexport async function setupAuth(app: Express) {\n  app.set(\"trust proxy\", 1);\n  app.use(getSession());\n  app.use(passport.initialize());\n  app.use(passport.session());\n\n  const config = await getOidcConfig();\n\n  const verify: VerifyFunction = async (\n    tokens: client.TokenEndpointResponse & client.TokenEndpointResponseHelpers,\n    verified: passport.AuthenticateCallback\n  ) => {\n    const user = {};\n    updateUserSession(user, tokens);\n    await upsertUser(tokens.claims());\n    verified(null, user);\n  };\n\n  for (const domain of process.env\n    .REPLIT_DOMAINS!.split(\",\")) {\n    const strategy = new Strategy(\n      {\n        name: `replitauth:${domain}`,\n        config,\n        scope: \"openid email profile offline_access\",\n        callbackURL: `https://${domain}/api/callback`,\n      },\n      verify,\n    );\n    passport.use(strategy);\n  }\n\n  passport.serializeUser((user: Express.User, cb) => cb(null, user));\n  passport.deserializeUser((user: Express.User, cb) => cb(null, user));\n\n  app.get(\"/api/login\", (req, res, next) => {\n    passport.authenticate(`replitauth:${req.hostname}`, {\n      prompt: \"login consent\",\n      scope: [\"openid\", \"email\", \"profile\", \"offline_access\"],\n    })(req, res, next);\n  });\n\n  app.get(\"/api/callback\", (req, res, next) => {\n    passport.authenticate(`replitauth:${req.hostname}`, {\n      successReturnToOrRedirect: \"/\",\n      failureRedirect: \"/api/login\",\n    })(req, res, next);\n  });\n\n  app.get(\"/api/logout\", (req, res) => {\n    req.logout(() => {\n      res.redirect(\n        client.buildEndSessionUrl(config, {\n          client_id: process.env.REPL_ID!,\n          post_logout_redirect_uri: `${req.protocol}://${req.hostname}`,\n        }).href\n      );\n    });\n  });\n}\n\nexport const isAuthenticated: RequestHandler = async (req, res, next) => {\n  const user = req.user as any;\n\n  if (!req.isAuthenticated() || !user.expires_at) {\n    return res.status(401).json({ message: \"Unauthorized\" });\n  }\n\n  const now = Math.floor(Date.now() / 1000);\n  if (now <= user.expires_at) {\n    return next();\n  }\n\n  const refreshToken = user.refresh_token;\n  if (!refreshToken) {\n    res.status(401).json({ message: \"Unauthorized\" });\n    return;\n  }\n\n  try {\n    const config = await getOidcConfig();\n    const tokenResponse = await client.refreshTokenGrant(config, refreshToken);\n    updateUserSession(user, tokenResponse);\n    return next();\n  } catch (error) {\n    res.status(401).json({ message: \"Unauthorized\" });\n    return;\n  }\n};\n","size_bytes":4221},"server/routes.ts":{"content":"import type { Express } from \"express\";\nimport { createServer, type Server } from \"http\";\nimport { storage } from \"./storage\";\nimport { setupAuth, isAuthenticated } from \"./replitAuth\";\nimport path from \"path\";\nimport { \n  insertMediatorSchema, \n  insertAccountSchema, \n  insertOrderSchema,\n  insertNotificationSchema,\n  insertUserSettingsSchema\n} from \"@shared/schema\";\nimport { googleCalendarService } from \"./google-calendar\";\nimport { generateICSFile, createOrderCalendarEvents } from \"./calendar-export\";\nimport { syncOrderToCalendar } from \"./calendar-sync\";\nimport { z } from \"zod\";\n\nexport async function registerRoutes(app: Express): Promise<Server> {\n  // Serve CSV template file before other routes\n  app.get('/order-import-template.csv', async (req, res) => {\n    try {\n      // Check if user is authenticated to generate personalized template\n      if (req.isAuthenticated && req.isAuthenticated() && req.user) {\n        const userId = (req.user as any).claims.sub;\n        \n        // Get user's accounts and mediators\n        const userAccounts = await storage.getAccounts(userId);\n        const userMediators = await storage.getMediators(userId);\n        \n        if (userAccounts.length > 0 && userMediators.length > 0) {\n          // Generate personalized template with actual IDs\n          const csvHeaders = 'Product Name,Platform,Account ID,Order ID,Order Amount,Refund Amount,Product Link,Mediator ID,Order Date,Delivery Date,Refund Form Date,Remind Refund Date,Status';\n          \n          const sampleRows = [\n            `Sample iPhone Case,Amazon,${userAccounts[0].id},ORD123456,1500,1500,https://amazon.in/product,${userMediators[0].id},2024-01-15,2024-01-18,2024-01-25,2024-01-30,Ordered`,\n            userAccounts.length > 1 && userMediators.length > 1 \n              ? `Sample Headphones,Flipkart,${userAccounts[Math.min(1, userAccounts.length - 1)].id},ORD789012,2500,2500,https://flipkart.com/headphones,${userMediators[Math.min(1, userMediators.length - 1)].id},2024-01-20,2024-01-23,2024-01-28,2024-02-02,Delivered`\n              : null\n          ].filter(Boolean);\n          \n          const csvContent = [csvHeaders, ...sampleRows].join('\\n');\n          \n          res.setHeader('Content-Type', 'text/csv');\n          res.setHeader('Content-Disposition', 'attachment; filename=\"order-import-template.csv\"');\n          return res.send(csvContent);\n        }\n      }\n      \n      // Fallback to static template file\n      const templatePath = path.resolve(import.meta.dirname, \"..\", \"public\", \"order-import-template.csv\");\n      res.setHeader('Content-Type', 'text/csv');\n      res.setHeader('Content-Disposition', 'attachment; filename=\"order-import-template.csv\"');\n      res.sendFile(templatePath);\n    } catch (error) {\n      console.error(\"Error generating template:\", error);\n      // Fallback to static template\n      const templatePath = path.resolve(import.meta.dirname, \"..\", \"public\", \"order-import-template.csv\");\n      res.setHeader('Content-Type', 'text/csv');\n      res.setHeader('Content-Disposition', 'attachment; filename=\"order-import-template.csv\"');\n      res.sendFile(templatePath);\n    }\n  });\n\n  // Auth middleware\n  await setupAuth(app);\n\n  // Auth routes\n  app.get('/api/auth/user', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const user = await storage.getUser(userId);\n      res.json(user);\n    } catch (error) {\n      console.error(\"Error fetching user:\", error);\n      res.status(500).json({ message: \"Failed to fetch user\" });\n    }\n  });\n\n  // Google Calendar OAuth routes\n  app.get('/api/calendar/auth', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const authUrl = googleCalendarService.getAuthUrl(userId, req);\n      res.json({ authUrl });\n    } catch (error) {\n      console.error(\"Error getting auth URL:\", error);\n      res.status(500).json({ message: \"Failed to get calendar auth URL\" });\n    }\n  });\n\n  app.get('/api/auth/google/callback', async (req, res) => {\n    try {\n      const { code, state } = req.query;\n      \n      if (!code || !state) {\n        return res.status(400).send('Missing authorization code or state');\n      }\n\n      // Exchange code for tokens\n      const tokens = await googleCalendarService.exchangeCodeForTokens(code as string);\n      \n      // Update user settings with tokens\n      await storage.upsertUserSettings(state as string, {\n        googleAccessToken: tokens.access_token!,\n        googleRefreshToken: tokens.refresh_token || null,\n        googleTokenExpiry: tokens.expiry_date ? new Date(tokens.expiry_date) : null,\n        calendarEnabled: 1\n      });\n\n      // Redirect to settings page with success\n      res.redirect('/?calendar=connected');\n    } catch (error) {\n      console.error('Error in Google OAuth callback:', error);\n      res.redirect('/?calendar=error');\n    }\n  });\n\n  // Calendar event creation endpoint\n  app.post('/api/calendar/events', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { title, description, startDateTime, endDateTime, orderId } = req.body;\n      \n      // Get user settings with tokens\n      const settings = await storage.getUserSettings(userId);\n      if (!settings?.googleAccessToken) {\n        return res.status(400).json({ message: 'Google Calendar not connected' });\n      }\n\n      // Create calendar event\n      const event = await googleCalendarService.createCalendarEvent(\n        settings.googleAccessToken,\n        settings.googleRefreshToken!,\n        {\n          title,\n          description,\n          startDateTime: new Date(startDateTime),\n          endDateTime: new Date(endDateTime),\n          calendarId: settings.calendarId || 'primary'\n        }\n      );\n\n      res.json({ event, success: true });\n    } catch (error) {\n      console.error('Error creating calendar event:', error);\n      res.status(500).json({ message: 'Failed to create calendar event' });\n    }\n  });\n\n  // Download calendar events as ICS file\n  app.get('/api/calendar/export/:orderId', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { orderId } = req.params;\n      \n      // Get the order\n      const order = await storage.getOrder(orderId, userId);\n      if (!order) {\n        return res.status(404).json({ message: 'Order not found' });\n      }\n\n      // Create calendar events for this order\n      const events = createOrderCalendarEvents(order);\n      \n      if (events.length === 0) {\n        return res.status(400).json({ message: 'No calendar events available for this order (missing delivery or refund dates)' });\n      }\n\n      // Generate ICS file\n      const icsContent = generateICSFile(events);\n      \n      // Set headers for file download\n      res.setHeader('Content-Type', 'text/calendar');\n      res.setHeader('Content-Disposition', `attachment; filename=\"${order.productName.replace(/[^a-zA-Z0-9]/g, '_')}_calendar.ics\"`);\n      res.send(icsContent);\n    } catch (error) {\n      console.error('Error generating calendar file:', error);\n      res.status(500).json({ message: 'Failed to generate calendar file' });\n    }\n  });\n\n  // Dashboard routes\n  app.get(\"/api/dashboard/stats\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const stats = await storage.getDashboardStats(userId);\n      res.json(stats);\n    } catch (error) {\n      console.error(\"Error fetching dashboard stats:\", error);\n      res.status(500).json({ message: \"Failed to fetch dashboard stats\" });\n    }\n  });\n\n  // Mediator routes\n  app.get(\"/api/mediators\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const mediators = await storage.getMediators(userId);\n      res.json(mediators);\n    } catch (error) {\n      console.error(\"Error fetching mediators:\", error);\n      res.status(500).json({ message: \"Failed to fetch mediators\" });\n    }\n  });\n\n  app.post(\"/api/mediators\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const mediatorData = insertMediatorSchema.parse(req.body);\n      const mediator = await storage.createMediator(userId, mediatorData);\n      res.status(201).json(mediator);\n    } catch (error) {\n      console.error(\"Error creating mediator:\", error);\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ message: \"Invalid mediator data\", errors: error.errors });\n      }\n      res.status(500).json({ message: \"Failed to create mediator\" });\n    }\n  });\n\n  app.put(\"/api/mediators/:id\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { id } = req.params;\n      const mediatorData = insertMediatorSchema.partial().parse(req.body);\n      const mediator = await storage.updateMediator(id, userId, mediatorData);\n      if (!mediator) {\n        return res.status(404).json({ message: \"Mediator not found\" });\n      }\n      res.json(mediator);\n    } catch (error) {\n      console.error(\"Error updating mediator:\", error);\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ message: \"Invalid mediator data\", errors: error.errors });\n      }\n      res.status(500).json({ message: \"Failed to update mediator\" });\n    }\n  });\n\n  app.delete(\"/api/mediators/:id\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { id } = req.params;\n      const deleted = await storage.deleteMediator(id, userId);\n      if (!deleted) {\n        return res.status(404).json({ message: \"Mediator not found\" });\n      }\n      res.status(204).send();\n    } catch (error) {\n      console.error(\"Error deleting mediator:\", error);\n      res.status(500).json({ message: \"Failed to delete mediator\" });\n    }\n  });\n\n  // Account routes\n  app.get(\"/api/accounts\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { platform } = req.query;\n      \n      let accounts;\n      if (platform) {\n        // Validate platform is one of the allowed enum values\n        const validPlatforms = [\"Amazon\", \"Flipkart\", \"Myntra\", \"Meesho\", \"Ajio\", \"Nykaa\", \"Paytm Mall\", \"Snapdeal\"];\n        if (!validPlatforms.includes(platform as string)) {\n          return res.status(400).json({ message: \"Invalid platform parameter\" });\n        }\n        accounts = await storage.getAccountsByPlatform(userId, platform as any);\n      } else {\n        accounts = await storage.getAccounts(userId);\n      }\n      \n      res.json(accounts);\n    } catch (error) {\n      console.error(\"Error fetching accounts:\", error);\n      res.status(500).json({ message: \"Failed to fetch accounts\" });\n    }\n  });\n\n  app.post(\"/api/accounts\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const accountData = insertAccountSchema.parse(req.body);\n      const account = await storage.createAccount(userId, accountData);\n      res.status(201).json(account);\n    } catch (error) {\n      console.error(\"Error creating account:\", error);\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ message: \"Invalid account data\", errors: error.errors });\n      }\n      res.status(500).json({ message: \"Failed to create account\" });\n    }\n  });\n\n  app.put(\"/api/accounts/:id\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { id } = req.params;\n      const accountData = insertAccountSchema.partial().parse(req.body);\n      const account = await storage.updateAccount(id, userId, accountData);\n      if (!account) {\n        return res.status(404).json({ message: \"Account not found\" });\n      }\n      res.json(account);\n    } catch (error) {\n      console.error(\"Error updating account:\", error);\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ message: \"Invalid account data\", errors: error.errors });\n      }\n      res.status(500).json({ message: \"Failed to update account\" });\n    }\n  });\n\n  app.delete(\"/api/accounts/:id\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { id } = req.params;\n      const deleted = await storage.deleteAccount(id, userId);\n      if (!deleted) {\n        return res.status(404).json({ message: \"Account not found\" });\n      }\n      res.status(204).send();\n    } catch (error) {\n      console.error(\"Error deleting account:\", error);\n      res.status(500).json({ message: \"Failed to delete account\" });\n    }\n  });\n\n  // Order routes\n  app.get(\"/api/orders\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { status, mediatorId, platform, accountId } = req.query;\n      \n      const filters: any = {};\n      if (status) filters.status = status;\n      if (mediatorId) filters.mediatorId = mediatorId;\n      if (platform) filters.platform = platform;\n      if (accountId) filters.accountId = accountId;\n      \n      const orders = await storage.getOrders(userId, filters);\n      res.json(orders);\n    } catch (error) {\n      console.error(\"Error fetching orders:\", error);\n      res.status(500).json({ message: \"Failed to fetch orders\" });\n    }\n  });\n\n  app.get(\"/api/orders/:id\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { id } = req.params;\n      const order = await storage.getOrder(id, userId);\n      if (!order) {\n        return res.status(404).json({ message: \"Order not found\" });\n      }\n      res.json(order);\n    } catch (error) {\n      console.error(\"Error fetching order:\", error);\n      res.status(500).json({ message: \"Failed to fetch order\" });\n    }\n  });\n\n  app.post(\"/api/orders\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const orderData = insertOrderSchema.parse(req.body);\n      const order = await storage.createOrder(userId, orderData);\n      \n      // Log order creation\n      await storage.createActivityLog(userId, {\n        orderId: order.id,\n        activityType: \"Order Created\",\n        description: `Order created for ${order.productName} on ${order.platform}`,\n        newValue: JSON.stringify({\n          status: order.currentStatus,\n          orderAmount: order.orderAmount,\n          refundAmount: order.refundAmount\n        }),\n        triggeredBy: \"User\"\n      });\n      \n      // Sync to Google Calendar if enabled\n      await syncOrderToCalendar(userId, order, \"create\");\n      \n      res.status(201).json(order);\n    } catch (error) {\n      console.error(\"Error creating order:\", error);\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ message: \"Invalid order data\", errors: error.errors });\n      }\n      res.status(500).json({ message: \"Failed to create order\" });\n    }\n  });\n\n  app.put(\"/api/orders/:id\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { id } = req.params;\n      const orderData = insertOrderSchema.partial().parse(req.body);\n      \n      // Get existing order to compare changes\n      const existingOrder = await storage.getOrder(id, userId);\n      if (!existingOrder) {\n        return res.status(404).json({ message: \"Order not found\" });\n      }\n      \n      const order = await storage.updateOrder(id, userId, orderData);\n      if (!order) {\n        return res.status(404).json({ message: \"Order not found\" });\n      }\n      \n      // Track what changed and create appropriate activity logs\n      const changes = [];\n      \n      // Check for status change\n      if (orderData.currentStatus && orderData.currentStatus !== existingOrder.currentStatus) {\n        await storage.createActivityLog(userId, {\n          orderId: order.id,\n          activityType: \"Status Changed\",\n          description: `Order status changed from \"${existingOrder.currentStatus}\" to \"${orderData.currentStatus}\"`,\n          oldValue: existingOrder.currentStatus,\n          newValue: orderData.currentStatus,\n          triggeredBy: \"User\"\n        });\n        changes.push('status');\n      }\n      \n      // Check for date changes\n      const dateFields = [\n        { key: 'deliveryDate', label: 'Delivery Date' },\n        { key: 'refundFormDate', label: 'Refund Form Date' },\n        { key: 'remindRefundDate', label: 'Remind Refund Date' }\n      ];\n      \n      for (const field of dateFields) {\n        if (orderData[field.key] && orderData[field.key] !== existingOrder[field.key]) {\n          await storage.createActivityLog(userId, {\n            orderId: order.id,\n            activityType: \"Dates Modified\",\n            description: `${field.label} updated`,\n            oldValue: existingOrder[field.key]?.toString() || 'Not set',\n            newValue: orderData[field.key].toString(),\n            triggeredBy: \"User\"\n          });\n          changes.push(field.key);\n        }\n      }\n      \n      // Log general order update if there are other changes\n      const otherChanges = Object.keys(orderData).filter(\n        key => !['currentStatus', 'deliveryDate', 'refundFormDate', 'remindRefundDate'].includes(key)\n      );\n      \n      if (otherChanges.length > 0 && changes.length === 0) {\n        await storage.createActivityLog(userId, {\n          orderId: order.id,\n          activityType: \"Order Updated\",\n          description: `Order details updated: ${otherChanges.join(', ')}`,\n          oldValue: JSON.stringify(Object.fromEntries(otherChanges.map(k => [k, existingOrder[k]]))),\n          newValue: JSON.stringify(Object.fromEntries(otherChanges.map(k => [k, orderData[k]]))),\n          triggeredBy: \"User\"\n        });\n      }\n      \n      // Sync to Google Calendar if delivery/refund dates changed\n      if (orderData.deliveryDate || orderData.refundFormDate) {\n        await syncOrderToCalendar(userId, order, \"update\");\n      }\n      \n      res.json(order);\n    } catch (error) {\n      console.error(\"Error updating order:\", error);\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ message: \"Invalid order data\", errors: error.errors });\n      }\n      res.status(500).json({ message: \"Failed to update order\" });\n    }\n  });\n\n  app.delete(\"/api/orders/:id\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { id } = req.params;\n      \n      // Get order before deleting for calendar cleanup\n      const order = await storage.getOrder(id, userId);\n      \n      const deleted = await storage.deleteOrder(id, userId);\n      if (!deleted) {\n        return res.status(404).json({ message: \"Order not found\" });\n      }\n      \n      // Remove calendar events if order existed\n      if (order) {\n        await syncOrderToCalendar(userId, order, \"delete\");\n      }\n      \n      res.status(204).send();\n    } catch (error) {\n      console.error(\"Error deleting order:\", error);\n      res.status(500).json({ message: \"Failed to delete order\" });\n    }\n  });\n\n  // Notification routes\n  app.get(\"/api/notifications\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const notifications = await storage.getNotifications(userId);\n      res.json(notifications);\n    } catch (error) {\n      console.error(\"Error fetching notifications:\", error);\n      res.status(500).json({ message: \"Failed to fetch notifications\" });\n    }\n  });\n\n  app.post(\"/api/notifications\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const notificationData = insertNotificationSchema.parse(req.body);\n      const notification = await storage.createNotification(userId, notificationData);\n      res.status(201).json(notification);\n    } catch (error) {\n      console.error(\"Error creating notification:\", error);\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ message: \"Invalid notification data\", errors: error.errors });\n      }\n      res.status(500).json({ message: \"Failed to create notification\" });\n    }\n  });\n\n  app.put(\"/api/notifications/:id/read\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { id } = req.params;\n      const marked = await storage.markNotificationRead(id, userId);\n      if (!marked) {\n        return res.status(404).json({ message: \"Notification not found\" });\n      }\n      res.status(204).send();\n    } catch (error) {\n      console.error(\"Error marking notification as read:\", error);\n      res.status(500).json({ message: \"Failed to mark notification as read\" });\n    }\n  });\n\n  app.put(\"/api/notifications/read-all\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      await storage.markAllNotificationsRead(userId);\n      res.status(204).send();\n    } catch (error) {\n      console.error(\"Error marking all notifications as read:\", error);\n      res.status(500).json({ message: \"Failed to mark all notifications as read\" });\n    }\n  });\n\n  // User Settings routes\n  app.get(\"/api/user-settings\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const settings = await storage.getUserSettings(userId);\n      if (!settings) {\n        // Return default settings if none exist\n        return res.json({\n          calendarEnabled: 1,\n          calendarApiKey: null,\n          calendarId: null,\n          messagingEnabled: 1,\n          messageTemplates: null,\n        });\n      }\n      res.json(settings);\n    } catch (error) {\n      console.error(\"Error fetching user settings:\", error);\n      res.status(500).json({ message: \"Failed to fetch user settings\" });\n    }\n  });\n\n  app.put(\"/api/user-settings\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const settingsData = insertUserSettingsSchema.partial().parse(req.body);\n      const updatedSettings = await storage.upsertUserSettings(userId, settingsData);\n      res.json(updatedSettings);\n    } catch (error) {\n      console.error(\"Error updating user settings:\", error);\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ message: \"Invalid user settings data\", errors: error.errors });\n      }\n      res.status(500).json({ message: \"Failed to update user settings\" });\n    }\n  });\n\n  // Export routes\n  app.get(\"/api/export/orders\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const orders = await storage.getOrders(userId);\n      \n      // Generate CSV content\n      const csvHeaders = [\n        'Product Name', 'Platform', 'Account Name', 'Order ID', 'Order Amount (₹)', \n        'Refund Amount (₹)', 'Product Link', 'Mediator Name', 'Order Date', \n        'Delivery Date', 'Refund Form Date', 'Remind Refund Date', 'Status'\n      ].join(',');\n      \n      const csvRows = orders.map((order: any) => [\n        `\"${order.productName}\"`,\n        order.platform,\n        `\"${order.account?.name || ''}\"`,\n        order.orderId,\n        (order.orderAmount / 100).toFixed(2), // Convert paise to rupees\n        (order.refundAmount / 100).toFixed(2),\n        order.productLink || '',\n        `\"${order.mediator?.name || ''}\"`,\n        order.orderDate?.toISOString().split('T')[0] || '',\n        order.deliveryDate?.toISOString().split('T')[0] || '',\n        order.refundFormDate?.toISOString().split('T')[0] || '',\n        order.remindRefundDate?.toISOString().split('T')[0] || '',\n        order.currentStatus\n      ].join(','));\n      \n      const csvContent = [csvHeaders, ...csvRows].join('\\n');\n      \n      res.setHeader('Content-Type', 'text/csv');\n      res.setHeader('Content-Disposition', 'attachment; filename=\"orders.csv\"');\n      res.send(csvContent);\n    } catch (error) {\n      console.error(\"Error exporting orders:\", error);\n      res.status(500).json({ message: \"Failed to export orders\" });\n    }\n  });\n\n  app.get(\"/api/export/mediators\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const mediators = await storage.getMediators(userId);\n      \n      const csvHeaders = ['Name', 'Phone', 'WhatsApp', 'Platform', 'Created Date'].join(',');\n      const csvRows = mediators.map((mediator: any) => [\n        `\"${mediator.name}\"`,\n        mediator.whatsappNumber || '',\n        mediator.whatsappNumber || '',\n        'All Platforms',\n        mediator.createdAt?.toISOString().split('T')[0] || ''\n      ].join(','));\n      \n      const csvContent = [csvHeaders, ...csvRows].join('\\n');\n      \n      res.setHeader('Content-Type', 'text/csv');\n      res.setHeader('Content-Disposition', 'attachment; filename=\"mediators.csv\"');\n      res.send(csvContent);\n    } catch (error) {\n      console.error(\"Error exporting mediators:\", error);\n      res.status(500).json({ message: \"Failed to export mediators\" });\n    }\n  });\n\n  app.get(\"/api/export/accounts\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const accounts = await storage.getAccounts(userId);\n      \n      const csvHeaders = ['Name', 'Platform', 'Username', 'Email', 'Phone', 'Created Date'].join(',');\n      const csvRows = accounts.map((account: any) => [\n        `\"${account.name}\"`,\n        account.platform,\n        account.email || '',\n        account.email || '',\n        account.phone || '',\n        account.createdAt?.toISOString().split('T')[0] || ''\n      ].join(','));\n      \n      const csvContent = [csvHeaders, ...csvRows].join('\\n');\n      \n      res.setHeader('Content-Type', 'text/csv');\n      res.setHeader('Content-Disposition', 'attachment; filename=\"accounts.csv\"');\n      res.send(csvContent);\n    } catch (error) {\n      console.error(\"Error exporting accounts:\", error);\n      res.status(500).json({ message: \"Failed to export accounts\" });\n    }\n  });\n\n  // Import routes\n  app.post(\"/api/import/orders\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { csvData } = req.body;\n      \n      console.log(\"CSV Import request received:\", {\n        userId,\n        dataLength: csvData?.length,\n        sampleRow: csvData?.[0]\n      });\n      \n      if (!csvData || !Array.isArray(csvData)) {\n        return res.status(400).json({ \n          message: \"Invalid CSV data\",\n          success: false,\n          imported: 0,\n          errors: 1,\n          errorDetails: [{ row: 0, error: \"CSV data is missing or invalid format\" }]\n        });\n      }\n      \n      if (csvData.length === 0) {\n        return res.status(400).json({ \n          message: \"No data rows found\",\n          success: false,\n          imported: 0,\n          errors: 1,\n          errorDetails: [{ row: 0, error: \"CSV file contains no data rows\" }]\n        });\n      }\n      \n      const importedOrders = [];\n      const errors = [];\n      \n      // Get user's accounts and mediators for validation\n      const userAccounts = await storage.getAccounts(userId);\n      const userMediators = await storage.getMediators(userId);\n      \n      console.log(\"User data:\", {\n        accountsCount: userAccounts.length,\n        mediatorsCount: userMediators.length,\n        accountIds: userAccounts.map(a => a.id),\n        mediatorIds: userMediators.map(m => m.id)\n      });\n      \n      for (let i = 0; i < csvData.length; i++) {\n        const row = csvData[i];\n        \n        console.log(`Processing row ${i + 1}:`, row);\n        \n        try {\n          // Check if row has enough columns\n          if (!row || row.length < 13) {\n            errors.push({ \n              row: i + 1, \n              error: `Row has ${row?.length || 0} columns, expected 13. Missing: ${13 - (row?.length || 0)} columns.`\n            });\n            continue;\n          }\n          \n          // Validate Account ID exists\n          const accountId = row[2]?.trim();\n          if (!accountId) {\n            errors.push({ row: i + 1, error: \"Account ID is required\" });\n            continue;\n          }\n          \n          const accountExists = userAccounts.find(acc => acc.id === accountId);\n          if (!accountExists) {\n            errors.push({ \n              row: i + 1, \n              error: `Account ID '${accountId}' not found. Use actual Account IDs from your Accounts page.`\n            });\n            continue;\n          }\n          \n          // Validate Mediator ID exists\n          const mediatorId = row[7]?.trim();\n          if (!mediatorId) {\n            errors.push({ row: i + 1, error: \"Mediator ID is required\" });\n            continue;\n          }\n          \n          const mediatorExists = userMediators.find(med => med.id === mediatorId);\n          if (!mediatorExists) {\n            errors.push({ \n              row: i + 1, \n              error: `Mediator ID '${mediatorId}' not found. Use actual Mediator IDs from your Mediators page.`\n            });\n            continue;\n          }\n          \n          // Parse and validate amounts\n          const orderAmount = parseFloat(row[4]);\n          const refundAmount = parseFloat(row[5]);\n          \n          if (isNaN(orderAmount) || orderAmount <= 0) {\n            errors.push({ row: i + 1, error: `Invalid order amount: ${row[4]}` });\n            continue;\n          }\n          \n          if (isNaN(refundAmount) || refundAmount < 0) {\n            errors.push({ row: i + 1, error: `Invalid refund amount: ${row[5]}` });\n            continue;\n          }\n          \n          // Parse the CSV row data\n          const orderData = {\n            productName: row[0]?.trim() || '',\n            platform: row[1]?.trim() || 'Amazon',\n            accountId: accountId,\n            orderId: row[3]?.trim() || '',\n            orderAmount: Math.round(orderAmount * 100), // Convert to paise\n            refundAmount: Math.round(refundAmount * 100),\n            productLink: row[6]?.trim() || undefined,\n            mediatorId: mediatorId,\n            orderDate: row[8]?.trim() || new Date().toISOString(),\n            deliveryDate: row[9]?.trim() || undefined,\n            refundFormDate: row[10]?.trim() || undefined,\n            remindRefundDate: row[11]?.trim() || undefined,\n            currentStatus: row[12]?.trim() || \"Ordered\"\n          };\n          \n          console.log(`Parsed order data for row ${i + 1}:`, orderData);\n          \n          const validatedData = insertOrderSchema.parse(orderData);\n          const order = await storage.createOrder(userId, validatedData);\n          importedOrders.push(order);\n          \n          console.log(`Successfully imported order for row ${i + 1}:`, order.id);\n          \n        } catch (error: any) {\n          console.error(`Error processing row ${i + 1}:`, error);\n          \n          let errorMessage = 'Unknown validation error';\n          \n          if (error.message) {\n            errorMessage = error.message;\n          }\n          \n          // Handle Zod validation errors specifically\n          if (error.issues && Array.isArray(error.issues)) {\n            const zodErrors = error.issues.map((issue: any) => {\n              const path = issue.path.join('.');\n              return `${path}: ${issue.message}`;\n            }).join('; ');\n            errorMessage = `Validation failed - ${zodErrors}`;\n          }\n          \n          errors.push({ \n            row: i + 1, \n            error: errorMessage,\n            data: row // Include the row data for debugging\n          });\n        }\n      }\n      \n      const result = {\n        success: true,\n        imported: importedOrders.length,\n        errors: errors.length,\n        errorDetails: errors\n      };\n\n      console.log(\"Import completed:\", result);\n      console.log(\"Sending response:\", JSON.stringify(result));\n      \n      res.json(result);\n    } catch (error: any) {\n      console.error(\"Error importing orders:\", error);\n      res.status(500).json({ \n        message: \"Failed to import orders\",\n        success: false,\n        imported: 0,\n        errors: 1,\n        errorDetails: [{ row: 0, error: error.message || \"Internal server error\" }]\n      });\n    }\n  });\n\n  // Activity Log routes\n  app.get(\"/api/activity-logs\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { orderId, activityType, limit } = req.query;\n      \n      const filters: any = {};\n      if (orderId) filters.orderId = orderId;\n      if (activityType) filters.activityType = activityType;\n      if (limit) filters.limit = parseInt(limit as string, 10);\n      \n      const logs = await storage.getAllActivityLogs(userId, filters);\n      res.json(logs);\n    } catch (error) {\n      console.error(\"Error fetching activity logs:\", error);\n      res.status(500).json({ message: \"Failed to fetch activity logs\" });\n    }\n  });\n\n  app.get(\"/api/orders/:id/logs\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { id } = req.params;\n      const logs = await storage.getOrderActivityLogs(id, userId);\n      res.json(logs);\n    } catch (error) {\n      console.error(\"Error fetching order activity logs:\", error);\n      res.status(500).json({ message: \"Failed to fetch order activity logs\" });\n    }\n  });\n\n  const httpServer = createServer(app);\n  return httpServer;\n}\n","size_bytes":33450},"server/storage.ts":{"content":"import {\n  users,\n  mediators,\n  accounts,\n  orders,\n  notifications,\n  userSettings,\n  activityLogs,\n  type User,\n  type UpsertUser,\n  type Mediator,\n  type InsertMediator,\n  type Account,\n  type InsertAccount,\n  type Order,\n  type InsertOrder,\n  type OrderWithRelations,\n  type Notification,\n  type InsertNotification,\n  type NotificationWithOrder,\n  type UserSettingsSelect,\n  type InsertUserSettings,\n  type ActivityLog,\n  type InsertActivityLog,\n  type ActivityLogWithOrder,\n} from \"@shared/schema\";\nimport { db } from \"./db\";\nimport { eq, and, desc, asc, sql, count, sum } from \"drizzle-orm\";\n\nexport interface IStorage {\n  // User operations (mandatory for Replit Auth)\n  getUser(id: string): Promise<User | undefined>;\n  upsertUser(user: UpsertUser): Promise<User>;\n\n  // Mediator operations\n  getMediators(userId: string): Promise<Mediator[]>;\n  createMediator(userId: string, mediator: InsertMediator): Promise<Mediator>;\n  updateMediator(id: string, userId: string, mediator: Partial<InsertMediator>): Promise<Mediator | undefined>;\n  deleteMediator(id: string, userId: string): Promise<boolean>;\n\n  // Account operations\n  getAccounts(userId: string): Promise<Account[]>;\n  getAccountsByPlatform(userId: string, platform: Account['platform']): Promise<Account[]>;\n  createAccount(userId: string, account: InsertAccount): Promise<Account>;\n  updateAccount(id: string, userId: string, account: Partial<InsertAccount>): Promise<Account | undefined>;\n  deleteAccount(id: string, userId: string): Promise<boolean>;\n\n  // Order operations\n  getOrders(userId: string, filters?: {\n    status?: Order['currentStatus'];\n    mediatorId?: string;\n    platform?: Order['platform'];\n    accountId?: string;\n  }): Promise<OrderWithRelations[]>;\n  getOrder(id: string, userId: string): Promise<OrderWithRelations | undefined>;\n  createOrder(userId: string, order: InsertOrder): Promise<Order>;\n  updateOrder(id: string, userId: string, order: Partial<InsertOrder>): Promise<Order | undefined>;\n  deleteOrder(id: string, userId: string): Promise<boolean>;\n\n  // Dashboard statistics\n  getDashboardStats(userId: string): Promise<{\n    monthlyEarnings: number;\n    monthlyOrders: number;\n    completedReviews: number;\n    pendingRefunds: number;\n    totalInvestment: number;\n    totalOrders: number;\n    totalPendingRefund: number;\n  }>;\n\n  // Notification operations\n  getNotifications(userId: string): Promise<NotificationWithOrder[]>;\n  createNotification(userId: string, notification: InsertNotification): Promise<Notification>;\n  markNotificationRead(id: string, userId: string): Promise<boolean>;\n  markAllNotificationsRead(userId: string): Promise<boolean>;\n\n  // User Settings operations\n  getUserSettings(userId: string): Promise<UserSettingsSelect | undefined>;\n  upsertUserSettings(userId: string, settings: Partial<InsertUserSettings>): Promise<UserSettingsSelect>;\n\n  // Activity Log operations\n  createActivityLog(userId: string, log: InsertActivityLog): Promise<ActivityLog>;\n  getOrderActivityLogs(orderId: string, userId: string): Promise<ActivityLogWithOrder[]>;\n  getAllActivityLogs(userId: string, filters?: {\n    orderId?: string;\n    activityType?: ActivityLog['activityType'];\n    limit?: number;\n  }): Promise<ActivityLogWithOrder[]>;\n}\n\nexport class DatabaseStorage implements IStorage {\n  // User operations\n  async getUser(id: string): Promise<User | undefined> {\n    const [user] = await db.select().from(users).where(eq(users.id, id));\n    return user;\n  }\n\n  async upsertUser(userData: UpsertUser): Promise<User> {\n    const [user] = await db\n      .insert(users)\n      .values(userData)\n      .onConflictDoUpdate({\n        target: users.id,\n        set: {\n          ...userData,\n          updatedAt: new Date(),\n        },\n      })\n      .returning();\n    return user;\n  }\n\n  // Mediator operations\n  async getMediators(userId: string): Promise<Mediator[]> {\n    return await db\n      .select()\n      .from(mediators)\n      .where(eq(mediators.userId, userId))\n      .orderBy(asc(mediators.name));\n  }\n\n  async createMediator(userId: string, mediator: InsertMediator): Promise<Mediator> {\n    const [newMediator] = await db\n      .insert(mediators)\n      .values({ ...mediator, userId })\n      .returning();\n    return newMediator;\n  }\n\n  async updateMediator(id: string, userId: string, mediator: Partial<InsertMediator>): Promise<Mediator | undefined> {\n    const [updatedMediator] = await db\n      .update(mediators)\n      .set({ ...mediator, updatedAt: new Date() })\n      .where(and(eq(mediators.id, id), eq(mediators.userId, userId)))\n      .returning();\n    return updatedMediator;\n  }\n\n  async deleteMediator(id: string, userId: string): Promise<boolean> {\n    const result = await db\n      .delete(mediators)\n      .where(and(eq(mediators.id, id), eq(mediators.userId, userId)));\n    return (result.rowCount ?? 0) > 0;\n  }\n\n  // Account operations\n  async getAccounts(userId: string): Promise<Account[]> {\n    return await db\n      .select()\n      .from(accounts)\n      .where(eq(accounts.userId, userId))\n      .orderBy(asc(accounts.platform), asc(accounts.name));\n  }\n\n  async getAccountsByPlatform(userId: string, platform: Account['platform']): Promise<Account[]> {\n    return await db\n      .select()\n      .from(accounts)\n      .where(and(eq(accounts.userId, userId), eq(accounts.platform, platform)))\n      .orderBy(asc(accounts.name));\n  }\n\n  async createAccount(userId: string, account: InsertAccount): Promise<Account> {\n    const [newAccount] = await db\n      .insert(accounts)\n      .values({ ...account, userId })\n      .returning();\n    return newAccount;\n  }\n\n  async updateAccount(id: string, userId: string, account: Partial<InsertAccount>): Promise<Account | undefined> {\n    const [updatedAccount] = await db\n      .update(accounts)\n      .set({ ...account, updatedAt: new Date() })\n      .where(and(eq(accounts.id, id), eq(accounts.userId, userId)))\n      .returning();\n    return updatedAccount;\n  }\n\n  async deleteAccount(id: string, userId: string): Promise<boolean> {\n    const result = await db\n      .delete(accounts)\n      .where(and(eq(accounts.id, id), eq(accounts.userId, userId)));\n    return (result.rowCount ?? 0) > 0;\n  }\n\n  // Order operations\n  async getOrders(userId: string, filters?: {\n    status?: Order['currentStatus'];\n    mediatorId?: string;\n    platform?: Order['platform'];\n    accountId?: string;\n  }): Promise<OrderWithRelations[]> {\n    let query = db\n      .select({\n        id: orders.id,\n        userId: orders.userId,\n        mediatorId: orders.mediatorId,\n        accountId: orders.accountId,\n        productName: orders.productName,\n        platform: orders.platform,\n        orderId: orders.orderId,\n        orderAmount: orders.orderAmount,\n        refundAmount: orders.refundAmount,\n        productLink: orders.productLink,\n        orderDate: orders.orderDate,\n        deliveryDate: orders.deliveryDate,\n        refundFormDate: orders.refundFormDate,\n        remindRefundDate: orders.remindRefundDate,\n        refundFormLink: orders.refundFormLink,\n        comments: orders.comments,\n        currentStatus: orders.currentStatus,\n        createdAt: orders.createdAt,\n        updatedAt: orders.updatedAt,\n        mediator: {\n          id: mediators.id,\n          userId: mediators.userId,\n          name: mediators.name,\n          whatsappNumber: mediators.whatsappNumber,\n          createdAt: mediators.createdAt,\n          updatedAt: mediators.updatedAt,\n        },\n        account: {\n          id: accounts.id,\n          userId: accounts.userId,\n          name: accounts.name,\n          platform: accounts.platform,\n          email: accounts.email,\n          phone: accounts.phone,\n          password: accounts.password,\n          comments: accounts.comments,\n          createdAt: accounts.createdAt,\n          updatedAt: accounts.updatedAt,\n        },\n      })\n      .from(orders)\n      .leftJoin(mediators, eq(orders.mediatorId, mediators.id))\n      .leftJoin(accounts, eq(orders.accountId, accounts.id));\n\n    const conditions = [eq(orders.userId, userId)];\n    \n    if (filters?.status) {\n      conditions.push(eq(orders.currentStatus, filters.status));\n    }\n    if (filters?.mediatorId) {\n      conditions.push(eq(orders.mediatorId, filters.mediatorId));\n    }\n    if (filters?.platform) {\n      conditions.push(eq(orders.platform, filters.platform));\n    }\n    if (filters?.accountId) {\n      conditions.push(eq(orders.accountId, filters.accountId));\n    }\n    \n    query = query.where(and(...conditions));\n\n    const result = await query.orderBy(desc(orders.createdAt));\n    \n    return result.map(row => ({\n      ...row,\n      mediator: row.mediator!,\n      account: row.account!,\n    }));\n  }\n\n  async getOrder(id: string, userId: string): Promise<OrderWithRelations | undefined> {\n    const [result] = await db\n      .select({\n        id: orders.id,\n        userId: orders.userId,\n        mediatorId: orders.mediatorId,\n        accountId: orders.accountId,\n        productName: orders.productName,\n        platform: orders.platform,\n        orderId: orders.orderId,\n        orderAmount: orders.orderAmount,\n        refundAmount: orders.refundAmount,\n        productLink: orders.productLink,\n        orderDate: orders.orderDate,\n        deliveryDate: orders.deliveryDate,\n        refundFormDate: orders.refundFormDate,\n        remindRefundDate: orders.remindRefundDate,\n        refundFormLink: orders.refundFormLink,\n        comments: orders.comments,\n        currentStatus: orders.currentStatus,\n        createdAt: orders.createdAt,\n        updatedAt: orders.updatedAt,\n        mediator: {\n          id: mediators.id,\n          userId: mediators.userId,\n          name: mediators.name,\n          whatsappNumber: mediators.whatsappNumber,\n          createdAt: mediators.createdAt,\n          updatedAt: mediators.updatedAt,\n        },\n        account: {\n          id: accounts.id,\n          userId: accounts.userId,\n          name: accounts.name,\n          platform: accounts.platform,\n          email: accounts.email,\n          phone: accounts.phone,\n          password: accounts.password,\n          comments: accounts.comments,\n          createdAt: accounts.createdAt,\n          updatedAt: accounts.updatedAt,\n        },\n      })\n      .from(orders)\n      .leftJoin(mediators, eq(orders.mediatorId, mediators.id))\n      .leftJoin(accounts, eq(orders.accountId, accounts.id))\n      .where(and(eq(orders.id, id), eq(orders.userId, userId)));\n\n    if (!result) return undefined;\n\n    return {\n      ...result,\n      mediator: result.mediator!,\n      account: result.account!,\n    };\n  }\n\n  async createOrder(userId: string, order: InsertOrder): Promise<Order> {\n    const [newOrder] = await db\n      .insert(orders)\n      .values({ ...order, userId })\n      .returning();\n    return newOrder;\n  }\n\n  async updateOrder(id: string, userId: string, order: Partial<InsertOrder>): Promise<Order | undefined> {\n    const [updatedOrder] = await db\n      .update(orders)\n      .set({ ...order, updatedAt: new Date() })\n      .where(and(eq(orders.id, id), eq(orders.userId, userId)))\n      .returning();\n    return updatedOrder;\n  }\n\n  async deleteOrder(id: string, userId: string): Promise<boolean> {\n    const result = await db\n      .delete(orders)\n      .where(and(eq(orders.id, id), eq(orders.userId, userId)));\n    return (result.rowCount ?? 0) > 0;\n  }\n\n  // Dashboard statistics\n  async getDashboardStats(userId: string): Promise<{\n    monthlyEarnings: number;\n    monthlyOrders: number;\n    completedReviews: number;\n    pendingRefunds: number;\n    totalInvestment: number;\n    totalOrders: number;\n    totalPendingRefund: number;\n  }> {\n    const now = new Date();\n    const startOfMonth = new Date(now.getFullYear(), now.getMonth(), 1);\n\n    // Monthly earnings (refunded orders this month)\n    const monthlyEarningsResult = await db\n      .select({\n        earnings: sql<number>`COALESCE(SUM(${orders.refundAmount} - ${orders.orderAmount}), 0)`,\n      })\n      .from(orders)\n      .where(\n        and(\n          eq(orders.userId, userId),\n          eq(orders.currentStatus, \"Refunded\"),\n          sql`${orders.updatedAt} >= ${startOfMonth}`\n        )\n      );\n\n    // Monthly orders count\n    const monthlyOrdersResult = await db\n      .select({ count: count() })\n      .from(orders)\n      .where(\n        and(\n          eq(orders.userId, userId),\n          sql`${orders.createdAt} >= ${startOfMonth}`\n        )\n      );\n\n    // Completed reviews this month\n    const completedReviewsResult = await db\n      .select({ count: count() })\n      .from(orders)\n      .where(\n        and(\n          eq(orders.userId, userId),\n          sql`${orders.currentStatus} IN ('Refund Form Done', 'Refunded')`,\n          sql`${orders.updatedAt} >= ${startOfMonth}`\n        )\n      );\n\n    // Pending refunds amount\n    const pendingRefundsResult = await db\n      .select({\n        amount: sql<number>`COALESCE(SUM(${orders.refundAmount}), 0)`,\n      })\n      .from(orders)\n      .where(\n        and(\n          eq(orders.userId, userId),\n          sql`${orders.currentStatus} NOT IN ('Refunded', 'Cancelled')`\n        )\n      );\n\n    // Total investment\n    const totalInvestmentResult = await db\n      .select({\n        amount: sql<number>`COALESCE(SUM(${orders.orderAmount}), 0)`,\n      })\n      .from(orders)\n      .where(eq(orders.userId, userId));\n\n    // Total orders count\n    const totalOrdersResult = await db\n      .select({ count: count() })\n      .from(orders)\n      .where(eq(orders.userId, userId));\n\n    return {\n      monthlyEarnings: monthlyEarningsResult[0]?.earnings || 0,\n      monthlyOrders: monthlyOrdersResult[0]?.count || 0,\n      completedReviews: completedReviewsResult[0]?.count || 0,\n      pendingRefunds: pendingRefundsResult[0]?.amount || 0,\n      totalInvestment: totalInvestmentResult[0]?.amount || 0,\n      totalOrders: totalOrdersResult[0]?.count || 0,\n      totalPendingRefund: pendingRefundsResult[0]?.amount || 0,\n    };\n  }\n\n  // Notification operations\n  async getNotifications(userId: string): Promise<NotificationWithOrder[]> {\n    const result = await db\n      .select({\n        id: notifications.id,\n        userId: notifications.userId,\n        orderId: notifications.orderId,\n        type: notifications.type,\n        title: notifications.title,\n        message: notifications.message,\n        isRead: notifications.isRead,\n        createdAt: notifications.createdAt,\n        order: {\n          id: orders.id,\n          userId: orders.userId,\n          mediatorId: orders.mediatorId,\n          accountId: orders.accountId,\n          productName: orders.productName,\n          platform: orders.platform,\n          orderId: orders.orderId,\n          orderAmount: orders.orderAmount,\n          refundAmount: orders.refundAmount,\n          productLink: orders.productLink,\n          orderDate: orders.orderDate,\n          deliveryDate: orders.deliveryDate,\n          refundFormDate: orders.refundFormDate,\n          remindRefundDate: orders.remindRefundDate,\n          refundFormLink: orders.refundFormLink,\n          comments: orders.comments,\n          currentStatus: orders.currentStatus,\n          createdAt: orders.createdAt,\n          updatedAt: orders.updatedAt,\n        },\n      })\n      .from(notifications)\n      .leftJoin(orders, eq(notifications.orderId, orders.id))\n      .where(eq(notifications.userId, userId))\n      .orderBy(desc(notifications.createdAt));\n\n    return result.map(row => ({\n      ...row,\n      order: row.order || undefined,\n    }));\n  }\n\n  async createNotification(userId: string, notification: InsertNotification): Promise<Notification> {\n    const [newNotification] = await db\n      .insert(notifications)\n      .values({ ...notification, userId })\n      .returning();\n    return newNotification;\n  }\n\n  async markNotificationRead(id: string, userId: string): Promise<boolean> {\n    const result = await db\n      .update(notifications)\n      .set({ isRead: 1 })\n      .where(and(eq(notifications.id, id), eq(notifications.userId, userId)));\n    return (result.rowCount ?? 0) > 0;\n  }\n\n  async markAllNotificationsRead(userId: string): Promise<boolean> {\n    const result = await db\n      .update(notifications)\n      .set({ isRead: 1 })\n      .where(eq(notifications.userId, userId));\n    return (result.rowCount ?? 0) > 0;\n  }\n\n  // User Settings operations\n  async getUserSettings(userId: string): Promise<UserSettingsSelect | undefined> {\n    const [settings] = await db\n      .select()\n      .from(userSettings)\n      .where(eq(userSettings.userId, userId))\n      .limit(1);\n    return settings;\n  }\n\n  async upsertUserSettings(userId: string, settings: Partial<InsertUserSettings>): Promise<UserSettingsSelect> {\n    const existing = await this.getUserSettings(userId);\n    if (existing) {\n      const [updatedSettings] = await db\n        .update(userSettings)\n        .set({ ...settings, updatedAt: new Date() })\n        .where(eq(userSettings.userId, userId))\n        .returning();\n      return updatedSettings;\n    } else {\n      const [newSettings] = await db\n        .insert(userSettings)\n        .values({\n          userId,\n          calendarEnabled: settings.calendarEnabled ?? 1,\n          googleAccessToken: settings.googleAccessToken ?? null,\n          googleRefreshToken: settings.googleRefreshToken ?? null,\n          googleTokenExpiry: settings.googleTokenExpiry ?? null,\n          calendarId: settings.calendarId ?? null,\n          messagingEnabled: settings.messagingEnabled ?? 1,\n          messageTemplates: settings.messageTemplates ?? null,\n        })\n        .returning();\n      return newSettings;\n    }\n  }\n\n  // Activity Log operations\n  async createActivityLog(userId: string, log: InsertActivityLog): Promise<ActivityLog> {\n    const [newLog] = await db\n      .insert(activityLogs)\n      .values({ ...log, userId })\n      .returning();\n    return newLog;\n  }\n\n  async getOrderActivityLogs(orderId: string, userId: string): Promise<ActivityLogWithOrder[]> {\n    const result = await db\n      .select({\n        id: activityLogs.id,\n        userId: activityLogs.userId,\n        orderId: activityLogs.orderId,\n        activityType: activityLogs.activityType,\n        description: activityLogs.description,\n        oldValue: activityLogs.oldValue,\n        newValue: activityLogs.newValue,\n        triggeredBy: activityLogs.triggeredBy,\n        createdAt: activityLogs.createdAt,\n        order: {\n          id: orders.id,\n          userId: orders.userId,\n          mediatorId: orders.mediatorId,\n          accountId: orders.accountId,\n          productName: orders.productName,\n          platform: orders.platform,\n          orderId: orders.orderId,\n          orderAmount: orders.orderAmount,\n          refundAmount: orders.refundAmount,\n          productLink: orders.productLink,\n          orderDate: orders.orderDate,\n          deliveryDate: orders.deliveryDate,\n          refundFormDate: orders.refundFormDate,\n          remindRefundDate: orders.remindRefundDate,\n          refundFormLink: orders.refundFormLink,\n          comments: orders.comments,\n          currentStatus: orders.currentStatus,\n          createdAt: orders.createdAt,\n          updatedAt: orders.updatedAt,\n        },\n      })\n      .from(activityLogs)\n      .leftJoin(orders, eq(activityLogs.orderId, orders.id))\n      .where(and(eq(activityLogs.orderId, orderId), eq(activityLogs.userId, userId)))\n      .orderBy(desc(activityLogs.createdAt));\n\n    return result.map(row => ({\n      ...row,\n      order: row.order || undefined,\n    }));\n  }\n\n  async getAllActivityLogs(userId: string, filters?: {\n    orderId?: string;\n    activityType?: ActivityLog['activityType'];\n    limit?: number;\n  }): Promise<ActivityLogWithOrder[]> {\n    let query = db\n      .select({\n        id: activityLogs.id,\n        userId: activityLogs.userId,\n        orderId: activityLogs.orderId,\n        activityType: activityLogs.activityType,\n        description: activityLogs.description,\n        oldValue: activityLogs.oldValue,\n        newValue: activityLogs.newValue,\n        triggeredBy: activityLogs.triggeredBy,\n        createdAt: activityLogs.createdAt,\n        order: {\n          id: orders.id,\n          userId: orders.userId,\n          mediatorId: orders.mediatorId,\n          accountId: orders.accountId,\n          productName: orders.productName,\n          platform: orders.platform,\n          orderId: orders.orderId,\n          orderAmount: orders.orderAmount,\n          refundAmount: orders.refundAmount,\n          productLink: orders.productLink,\n          orderDate: orders.orderDate,\n          deliveryDate: orders.deliveryDate,\n          refundFormDate: orders.refundFormDate,\n          remindRefundDate: orders.remindRefundDate,\n          refundFormLink: orders.refundFormLink,\n          comments: orders.comments,\n          currentStatus: orders.currentStatus,\n          createdAt: orders.createdAt,\n          updatedAt: orders.updatedAt,\n        },\n      })\n      .from(activityLogs)\n      .leftJoin(orders, eq(activityLogs.orderId, orders.id));\n\n    const conditions = [eq(activityLogs.userId, userId)];\n    \n    if (filters?.orderId) {\n      conditions.push(eq(activityLogs.orderId, filters.orderId));\n    }\n    if (filters?.activityType) {\n      conditions.push(eq(activityLogs.activityType, filters.activityType));\n    }\n    \n    query = query.where(and(...conditions));\n    query = query.orderBy(desc(activityLogs.createdAt));\n\n    if (filters?.limit) {\n      query = query.limit(filters.limit);\n    }\n\n    const result = await query;\n    \n    return result.map(row => ({\n      ...row,\n      order: row.order || undefined,\n    }));\n  }\n}\n\nexport const storage = new DatabaseStorage();\n","size_bytes":21644},"server/vite.ts":{"content":"import express, { type Express } from \"express\";\nimport fs from \"fs\";\nimport path from \"path\";\nimport { createServer as createViteServer, createLogger } from \"vite\";\nimport { type Server } from \"http\";\nimport viteConfig from \"../vite.config\";\nimport { nanoid } from \"nanoid\";\n\nconst viteLogger = createLogger();\n\nexport function log(message: string, source = \"express\") {\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n  });\n\n  console.log(`${formattedTime} [${source}] ${message}`);\n}\n\nexport async function setupVite(app: Express, server: Server) {\n  const serverOptions = {\n    middlewareMode: true,\n    hmr: { server },\n    allowedHosts: true as const,\n  };\n\n  const vite = await createViteServer({\n    ...viteConfig,\n    configFile: false,\n    customLogger: {\n      ...viteLogger,\n      error: (msg, options) => {\n        viteLogger.error(msg, options);\n        process.exit(1);\n      },\n    },\n    server: serverOptions,\n    appType: \"custom\",\n  });\n\n  app.use(vite.middlewares);\n  app.use(\"*\", async (req, res, next) => {\n    const url = req.originalUrl;\n\n    try {\n      const clientTemplate = path.resolve(\n        import.meta.dirname,\n        \"..\",\n        \"client\",\n        \"index.html\",\n      );\n\n      // always reload the index.html file from disk incase it changes\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\n      template = template.replace(\n        `src=\"/src/main.tsx\"`,\n        `src=\"/src/main.tsx?v=${nanoid()}\"`,\n      );\n      const page = await vite.transformIndexHtml(url, template);\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\n    } catch (e) {\n      vite.ssrFixStacktrace(e as Error);\n      next(e);\n    }\n  });\n}\n\nexport function serveStatic(app: Express) {\n  const distPath = path.resolve(import.meta.dirname, \"public\");\n\n  if (!fs.existsSync(distPath)) {\n    throw new Error(\n      `Could not find the build directory: ${distPath}, make sure to build the client first`,\n    );\n  }\n\n  app.use(express.static(distPath));\n\n  // fall through to index.html if the file doesn't exist\n  app.use(\"*\", (_req, res) => {\n    res.sendFile(path.resolve(distPath, \"index.html\"));\n  });\n}\n","size_bytes":2263},"shared/schema.ts":{"content":"import { sql } from 'drizzle-orm';\nimport {\n  index,\n  jsonb,\n  pgTable,\n  timestamp,\n  varchar,\n  text,\n  integer,\n  pgEnum,\n} from \"drizzle-orm/pg-core\";\nimport { relations } from \"drizzle-orm\";\nimport { createInsertSchema } from \"drizzle-zod\";\nimport { z } from \"zod\";\n\n// Session storage table (mandatory for Replit Auth)\nexport const sessions = pgTable(\n  \"sessions\",\n  {\n    sid: varchar(\"sid\").primaryKey(),\n    sess: jsonb(\"sess\").notNull(),\n    expire: timestamp(\"expire\").notNull(),\n  },\n  (table) => [index(\"IDX_session_expire\").on(table.expire)],\n);\n\n// User storage table (mandatory for Replit Auth)\nexport const users = pgTable(\"users\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  email: varchar(\"email\").unique(),\n  firstName: varchar(\"first_name\"),\n  lastName: varchar(\"last_name\"),\n  profileImageUrl: varchar(\"profile_image_url\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\n// Platform enum\nexport const platformEnum = pgEnum(\"platform\", [\n  \"Amazon\",\n  \"Flipkart\", \n  \"Myntra\",\n  \"Meesho\",\n  \"Ajio\",\n  \"Nykaa\",\n  \"Paytm Mall\",\n  \"Snapdeal\"\n]);\n\n// Order status enum\nexport const orderStatusEnum = pgEnum(\"order_status\", [\n  \"Ordered\",\n  \"Delivered\", \n  \"Deliverables Done\",\n  \"Refund Form Done\",\n  \"Overdue Passed for Refund Form\",\n  \"Remind Mediator for Payment\",\n  \"Refunded\",\n  \"Cancelled\"\n]);\n\n// Notification type enum\nexport const notificationTypeEnum = pgEnum(\"notification_type\", [\n  \"Critical\",\n  \"Warning\",\n  \"Success\", \n  \"Info\"\n]);\n\n// Reminder category enum - for specific reminder types\nexport const reminderCategoryEnum = pgEnum(\"reminder_category\", [\n  \"General\",\n  \"Delivery\",\n  \"Review_Rating\",\n  \"Refund_Form\",\n  \"Mediator_Payment\"\n]);\n\n// Activity type enum - for tracking order changes\nexport const activityTypeEnum = pgEnum(\"activity_type\", [\n  \"Order Created\",\n  \"Status Changed\",\n  \"Order Updated\",\n  \"Dates Modified\",\n  \"Calendar Event Created\",\n  \"Calendar Event Updated\",\n  \"Calendar Event Deleted\"\n]);\n\n// Mediators table\nexport const mediators = pgTable(\"mediators\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  name: varchar(\"name\").notNull(),\n  whatsappNumber: varchar(\"whatsapp_number\").notNull(),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\n// Accounts table\nexport const accounts = pgTable(\"accounts\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  name: varchar(\"name\").notNull(),\n  platform: platformEnum(\"platform\").notNull(),\n  email: varchar(\"email\").notNull(),\n  phone: varchar(\"phone\").notNull(),\n  password: text(\"password\"), // encrypted\n  comments: text(\"comments\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\n// Orders table\nexport const orders = pgTable(\"orders\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  mediatorId: varchar(\"mediator_id\").notNull().references(() => mediators.id),\n  accountId: varchar(\"account_id\").notNull().references(() => accounts.id),\n  productName: varchar(\"product_name\").notNull(),\n  platform: platformEnum(\"platform\").notNull(),\n  orderId: varchar(\"order_id\").notNull(),\n  orderAmount: integer(\"order_amount\").notNull(), // in paise\n  refundAmount: integer(\"refund_amount\").notNull(), // in paise  \n  productLink: text(\"product_link\"),\n  orderDate: timestamp(\"order_date\").notNull(),\n  deliveryDate: timestamp(\"delivery_date\"),\n  refundFormDate: timestamp(\"refund_form_date\"),\n  remindRefundDate: timestamp(\"remind_refund_date\"),\n  refundFormLink: text(\"refund_form_link\"),\n  comments: text(\"comments\"),\n  currentStatus: orderStatusEnum(\"current_status\").notNull().default(\"Ordered\"),\n  calendarEventIds: text(\"calendar_event_ids\"), // JSON array of Google Calendar event IDs\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\n// Settings table for user preferences\nexport const userSettings = pgTable(\"user_settings\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  calendarEnabled: integer(\"calendar_enabled\").notNull().default(1), // 0 = false, 1 = true\n  googleAccessToken: text(\"google_access_token\"),\n  googleRefreshToken: text(\"google_refresh_token\"),\n  googleTokenExpiry: timestamp(\"google_token_expiry\"),\n  calendarId: text(\"calendar_id\"),\n  messagingEnabled: integer(\"messaging_enabled\").notNull().default(1),\n  messageTemplates: text(\"message_templates\"), // JSON string\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\n// Notifications table\nexport const notifications = pgTable(\"notifications\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  orderId: varchar(\"order_id\").references(() => orders.id, { onDelete: \"cascade\" }),\n  type: notificationTypeEnum(\"type\").notNull(),\n  reminderCategory: reminderCategoryEnum(\"reminder_category\").notNull().default(\"General\"),\n  title: varchar(\"title\").notNull(),\n  message: text(\"message\").notNull(),\n  isRead: integer(\"is_read\").notNull().default(0), // 0 = false, 1 = true\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\n// Activity logs table - tracks all order changes\nexport const activityLogs = pgTable(\"activity_logs\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  orderId: varchar(\"order_id\").notNull().references(() => orders.id, { onDelete: \"cascade\" }),\n  activityType: activityTypeEnum(\"activity_type\").notNull(),\n  description: text(\"description\").notNull(),\n  oldValue: text(\"old_value\"),\n  newValue: text(\"new_value\"),\n  triggeredBy: varchar(\"triggered_by\").notNull().default(\"User\"), // User or System\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\n// Relations\nexport const userRelations = relations(users, ({ many, one }) => ({\n  mediators: many(mediators),\n  accounts: many(accounts),\n  orders: many(orders),\n  notifications: many(notifications),\n  activityLogs: many(activityLogs),\n  settings: one(userSettings),\n}));\n\nexport const userSettingsRelations = relations(userSettings, ({ one }) => ({\n  user: one(users, {\n    fields: [userSettings.userId],\n    references: [users.id],\n  }),\n}));\n\nexport const mediatorRelations = relations(mediators, ({ one, many }) => ({\n  user: one(users, {\n    fields: [mediators.userId],\n    references: [users.id],\n  }),\n  orders: many(orders),\n}));\n\nexport const accountRelations = relations(accounts, ({ one, many }) => ({\n  user: one(users, {\n    fields: [accounts.userId],\n    references: [users.id],\n  }),\n  orders: many(orders),\n}));\n\nexport const orderRelations = relations(orders, ({ one, many }) => ({\n  user: one(users, {\n    fields: [orders.userId],\n    references: [users.id],\n  }),\n  mediator: one(mediators, {\n    fields: [orders.mediatorId],\n    references: [mediators.id],\n  }),\n  account: one(accounts, {\n    fields: [orders.accountId],\n    references: [accounts.id],\n  }),\n  activityLogs: many(activityLogs),\n}));\n\nexport const notificationRelations = relations(notifications, ({ one }) => ({\n  user: one(users, {\n    fields: [notifications.userId],\n    references: [users.id],\n  }),\n  order: one(orders, {\n    fields: [notifications.orderId],\n    references: [orders.id],\n  }),\n}));\n\nexport const activityLogRelations = relations(activityLogs, ({ one }) => ({\n  user: one(users, {\n    fields: [activityLogs.userId],\n    references: [users.id],\n  }),\n  order: one(orders, {\n    fields: [activityLogs.orderId],\n    references: [orders.id],\n  }),\n}));\n\n// Insert schemas\nexport const insertMediatorSchema = createInsertSchema(mediators).omit({\n  id: true,\n  userId: true,\n  createdAt: true,\n  updatedAt: true,\n});\n\nexport const insertAccountSchema = createInsertSchema(accounts).omit({\n  id: true,\n  userId: true,\n  createdAt: true,\n  updatedAt: true,\n});\n\nexport const insertOrderSchema = createInsertSchema(orders).omit({\n  id: true,\n  userId: true,\n  createdAt: true,\n  updatedAt: true,\n}).extend({\n  orderDate: z.string().transform((str) => new Date(str)),\n  deliveryDate: z.string().transform((str) => new Date(str)).nullable().optional(),\n  refundFormDate: z.string().transform((str) => new Date(str)).nullable().optional(),\n  remindRefundDate: z.string().transform((str) => new Date(str)).nullable().optional(),\n});\n\nexport const insertNotificationSchema = createInsertSchema(notifications).omit({\n  id: true,\n  userId: true,\n  createdAt: true,\n});\n\nexport const insertActivityLogSchema = createInsertSchema(activityLogs).omit({\n  id: true,\n  userId: true,\n  createdAt: true,\n});\n\n// Types\nexport type UpsertUser = typeof users.$inferInsert;\nexport type User = typeof users.$inferSelect;\n\nexport type InsertMediator = z.infer<typeof insertMediatorSchema>;\nexport type Mediator = typeof mediators.$inferSelect;\n\nexport type InsertAccount = z.infer<typeof insertAccountSchema>;\nexport type Account = typeof accounts.$inferSelect;\n\nexport type InsertOrder = z.infer<typeof insertOrderSchema>;\nexport type Order = typeof orders.$inferSelect;\n\nexport type InsertNotification = z.infer<typeof insertNotificationSchema>;\nexport type Notification = typeof notifications.$inferSelect;\n\nexport type InsertActivityLog = z.infer<typeof insertActivityLogSchema>;\nexport type ActivityLog = typeof activityLogs.$inferSelect;\n\nexport const insertUserSettingsSchema = createInsertSchema(userSettings).omit({\n  id: true,\n  userId: true,\n  createdAt: true,\n  updatedAt: true,\n});\n\nexport type InsertUserSettings = z.infer<typeof insertUserSettingsSchema>;\nexport type UserSettingsSelect = typeof userSettings.$inferSelect;\n\n// Extended types with relations\nexport type OrderWithRelations = Order & {\n  mediator: Mediator;\n  account: Account;\n};\n\nexport type NotificationWithOrder = Notification & {\n  order?: Order;\n};\n\nexport type ActivityLogWithOrder = ActivityLog & {\n  order?: Order;\n};\n","size_bytes":10438},"client/src/App.tsx":{"content":"import { Switch, Route } from \"wouter\";\nimport { queryClient } from \"./lib/queryClient\";\nimport { QueryClientProvider } from \"@tanstack/react-query\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport NotFound from \"@/pages/not-found\";\nimport Landing from \"@/pages/landing\";\nimport Home from \"@/pages/home\";\nimport Orders from \"@/pages/orders\";\nimport Mediators from \"@/pages/mediators\";\nimport Accounts from \"@/pages/accounts\";\nimport Notifications from \"@/pages/notifications\";\nimport ActivityLog from \"@/pages/activity-log\";\nimport Settings from \"@/pages/settings\";\n\nfunction Router() {\n  const { isAuthenticated, isLoading } = useAuth();\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-background\">\n        <div className=\"animate-spin rounded-full h-32 w-32 border-b-2 border-primary\"></div>\n      </div>\n    );\n  }\n\n  // If not authenticated, always show Landing page regardless of path\n  if (!isAuthenticated) {\n    return <Landing />;\n  }\n\n  return (\n    <Switch>\n      <Route path=\"/\" component={Home} />\n      <Route path=\"/orders\" component={Orders} />\n      <Route path=\"/mediators\" component={Mediators} />\n      <Route path=\"/accounts\" component={Accounts} />\n      <Route path=\"/notifications\" component={Notifications} />\n      <Route path=\"/activity-log\" component={ActivityLog} />\n      <Route path=\"/settings\" component={Settings} />\n      <Route component={NotFound} />\n    </Switch>\n  );\n}\n\nfunction App() {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <TooltipProvider>\n        <Toaster />\n        <Router />\n      </TooltipProvider>\n    </QueryClientProvider>\n  );\n}\n\nexport default App;\n","size_bytes":1795},"client/src/index.css":{"content":"@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n:root {\n  --background: hsl(210, 20%, 98%);\n  --foreground: hsl(222, 47%, 11%);\n  --card: hsl(0, 0%, 100%);\n  --card-foreground: hsl(222, 47%, 11%);\n  --popover: hsl(0, 0%, 100%);\n  --popover-foreground: hsl(222, 47%, 11%);\n  --primary: hsl(239, 84%, 67%);\n  --primary-foreground: hsl(0, 0%, 100%);\n  --secondary: hsl(214, 32%, 91%);\n  --secondary-foreground: hsl(222, 47%, 11%);\n  --muted: hsl(210, 40%, 96%);\n  --muted-foreground: hsl(215, 16%, 47%);\n  --accent: hsl(239, 84%, 67%);\n  --accent-foreground: hsl(0, 0%, 100%);\n  --destructive: hsl(0, 72%, 51%);\n  --destructive-foreground: hsl(0, 0%, 100%);\n  --success: hsl(142, 71%, 45%);\n  --success-foreground: hsl(0, 0%, 100%);\n  --warning: hsl(38, 92%, 50%);\n  --warning-foreground: hsl(0, 0%, 100%);\n  --border: hsl(214, 32%, 91%);\n  --input: hsl(214, 32%, 91%);\n  --ring: hsl(239, 84%, 67%);\n  --chart-1: hsl(239, 84%, 67%);\n  --chart-2: hsl(142, 71%, 45%);\n  --chart-3: hsl(38, 92%, 50%);\n  --chart-4: hsl(199, 89%, 48%);\n  --chart-5: hsl(271, 81%, 56%);\n  --sidebar: hsl(0, 0%, 100%);\n  --sidebar-foreground: hsl(222, 47%, 11%);\n  --sidebar-primary: hsl(239, 84%, 67%);\n  --sidebar-primary-foreground: hsl(0, 0%, 100%);\n  --sidebar-accent: hsl(210, 40%, 96%);\n  --sidebar-accent-foreground: hsl(239, 84%, 67%);\n  --sidebar-border: hsl(214, 32%, 91%);\n  --sidebar-ring: hsl(239, 84%, 67%);\n  --font-sans: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, sans-serif;\n  --font-serif: Georgia, serif;\n  --font-mono: Menlo, monospace;\n  --radius: 0.5rem;\n  --shadow-2xs: 0px 1px 2px 0px hsl(0, 0%, 0%, 0.05);\n  --shadow-xs: 0px 1px 3px 0px hsl(0, 0%, 0%, 0.1), 0px 1px 2px -1px hsl(0, 0%, 0%, 0.1);\n  --shadow-sm: 0px 1px 3px 0px hsl(0, 0%, 0%, 0.1), 0px 1px 2px -1px hsl(0, 0%, 0%, 0.1);\n  --shadow: 0px 1px 3px 0px hsl(0, 0%, 0%, 0.1), 0px 1px 2px -1px hsl(0, 0%, 0%, 0.1);\n  --shadow-md: 0px 4px 6px -1px hsl(0, 0%, 0%, 0.1), 0px 2px 4px -2px hsl(0, 0%, 0%, 0.1);\n  --shadow-lg: 0px 10px 15px -3px hsl(0, 0%, 0%, 0.1), 0px 4px 6px -4px hsl(0, 0%, 0%, 0.1);\n  --shadow-xl: 0px 20px 25px -5px hsl(0, 0%, 0%, 0.1), 0px 8px 10px -6px hsl(0, 0%, 0%, 0.1);\n  --shadow-2xl: 0px 25px 50px -12px hsl(0, 0%, 0%, 0.25);\n  --tracking-normal: 0em;\n  --spacing: 0.25rem;\n}\n\n.dark {\n  --background: hsl(222, 47%, 7%);\n  --foreground: hsl(210, 40%, 98%);\n  --card: hsl(222, 47%, 11%);\n  --card-foreground: hsl(210, 40%, 98%);\n  --popover: hsl(222, 47%, 11%);\n  --popover-foreground: hsl(210, 40%, 98%);\n  --primary: hsl(239, 84%, 67%);\n  --primary-foreground: hsl(0, 0%, 100%);\n  --secondary: hsl(215, 25%, 27%);\n  --secondary-foreground: hsl(210, 40%, 98%);\n  --muted: hsl(223, 47%, 11%);\n  --muted-foreground: hsl(215, 16%, 65%);\n  --accent: hsl(239, 84%, 67%);\n  --accent-foreground: hsl(0, 0%, 100%);\n  --destructive: hsl(0, 72%, 51%);\n  --destructive-foreground: hsl(0, 0%, 100%);\n  --success: hsl(142, 71%, 45%);\n  --success-foreground: hsl(0, 0%, 100%);\n  --warning: hsl(38, 92%, 50%);\n  --warning-foreground: hsl(0, 0%, 100%);\n  --border: hsl(215, 25%, 27%);\n  --input: hsl(215, 25%, 27%);\n  --ring: hsl(239, 84%, 67%);\n  --chart-1: hsl(239, 84%, 67%);\n  --chart-2: hsl(142, 71%, 45%);\n  --chart-3: hsl(38, 92%, 50%);\n  --chart-4: hsl(199, 89%, 48%);\n  --chart-5: hsl(271, 81%, 56%);\n  --sidebar: hsl(222, 47%, 11%);\n  --sidebar-foreground: hsl(210, 40%, 98%);\n  --sidebar-primary: hsl(239, 84%, 67%);\n  --sidebar-primary-foreground: hsl(0, 0%, 100%);\n  --sidebar-accent: hsl(215, 25%, 27%);\n  --sidebar-accent-foreground: hsl(239, 84%, 67%);\n  --sidebar-border: hsl(215, 25%, 27%);\n  --sidebar-ring: hsl(239, 84%, 67%);\n}\n\n@layer base {\n  * {\n    @apply border-border;\n  }\n\n  body {\n    @apply font-sans antialiased bg-background text-foreground;\n    font-feature-settings: \"rlig\" 1, \"calt\" 1;\n  }\n}\n\n@layer components {\n  .card-shadow {\n    box-shadow: var(--shadow-sm);\n  }\n  \n  .sidebar-item {\n    transition: all 0.2s ease;\n  }\n  \n  .sidebar-item:hover {\n    background-color: var(--muted);\n  }\n  \n  .sidebar-item.active {\n    background-color: var(--primary);\n    color: var(--primary-foreground);\n  }\n  \n  .status-badge {\n    @apply px-2 py-1 rounded-md text-xs font-medium;\n  }\n  \n  .status-ordered { \n    @apply bg-blue-50 text-blue-700 dark:bg-blue-950 dark:text-blue-300;\n  }\n  \n  .status-delivered { \n    @apply bg-green-50 text-green-700 dark:bg-green-950 dark:text-green-300;\n  }\n  \n  .status-refunded { \n    @apply bg-emerald-50 text-emerald-700 dark:bg-emerald-950 dark:text-emerald-300;\n  }\n  \n  .status-overdue { \n    @apply bg-red-50 text-red-700 dark:bg-red-950 dark:text-red-300;\n  }\n  \n  .status-pending { \n    @apply bg-orange-50 text-orange-700 dark:bg-orange-950 dark:text-orange-300;\n  }\n}\n\n@layer utilities {\n  .text-balance {\n    text-wrap: balance;\n  }\n}\n\n/* Smooth Animations */\n@keyframes fadeIn {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n\n@keyframes slideUp {\n  from {\n    opacity: 0;\n    transform: translateY(10px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n@keyframes slideDown {\n  from {\n    opacity: 0;\n    transform: translateY(-10px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n@keyframes slideInLeft {\n  from {\n    opacity: 0;\n    transform: translateX(-20px);\n  }\n  to {\n    opacity: 1;\n    transform: translateX(0);\n  }\n}\n\n@keyframes slideInRight {\n  from {\n    opacity: 0;\n    transform: translateX(20px);\n  }\n  to {\n    opacity: 1;\n    transform: translateX(0);\n  }\n}\n\n@keyframes scaleIn {\n  from {\n    opacity: 0;\n    transform: scale(0.95);\n  }\n  to {\n    opacity: 1;\n    transform: scale(1);\n  }\n}\n\n@keyframes shimmer {\n  0% {\n    background-position: -1000px 0;\n  }\n  100% {\n    background-position: 1000px 0;\n  }\n}\n\n/* Animation Classes */\n.animate-fade-in {\n  animation: fadeIn 0.3s ease-out;\n}\n\n.animate-slide-up {\n  animation: slideUp 0.4s ease-out;\n}\n\n.animate-slide-down {\n  animation: slideDown 0.4s ease-out;\n}\n\n.animate-slide-in-left {\n  animation: slideInLeft 0.4s ease-out;\n}\n\n.animate-slide-in-right {\n  animation: slideInRight 0.4s ease-out;\n}\n\n.animate-scale-in {\n  animation: scaleIn 0.3s ease-out;\n}\n\n/* Staggered Card Animations */\n.stagger-item {\n  animation: slideUp 0.5s ease-out both;\n}\n\n.stagger-item:nth-child(1) { animation-delay: 0.05s; }\n.stagger-item:nth-child(2) { animation-delay: 0.1s; }\n.stagger-item:nth-child(3) { animation-delay: 0.15s; }\n.stagger-item:nth-child(4) { animation-delay: 0.2s; }\n.stagger-item:nth-child(5) { animation-delay: 0.25s; }\n.stagger-item:nth-child(6) { animation-delay: 0.3s; }\n.stagger-item:nth-child(7) { animation-delay: 0.35s; }\n.stagger-item:nth-child(8) { animation-delay: 0.4s; }\n.stagger-item:nth-child(9) { animation-delay: 0.45s; }\n\n/* Smooth Transitions */\n.transition-smooth {\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n.transition-transform {\n  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n.transition-colors {\n  transition: background-color 0.2s ease, color 0.2s ease, border-color 0.2s ease;\n}\n\n/* Enhanced Hover Effects */\n.hover-lift {\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n.hover-lift:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.05);\n}\n\n.hover-scale {\n  transition: transform 0.2s ease;\n}\n\n.hover-scale:hover {\n  transform: scale(1.02);\n}\n\n.hover-glow {\n  transition: all 0.3s ease;\n}\n\n.hover-glow:hover {\n  box-shadow: 0 0 20px rgba(99, 102, 241, 0.3);\n}\n\n/* Enhanced Skeleton Loading */\n.skeleton-shimmer {\n  background: linear-gradient(\n    90deg,\n    hsl(var(--muted)) 0%,\n    hsl(var(--muted) / 0.8) 20%,\n    hsl(var(--muted)) 40%,\n    hsl(var(--muted)) 100%\n  );\n  background-size: 200% 100%;\n  animation: shimmer 2s infinite linear;\n}\n\n/* Page Transition */\n.page-enter {\n  animation: fadeIn 0.3s ease-out;\n}\n\n/* Button Press Effect */\n.btn-press {\n  transition: transform 0.1s ease;\n}\n\n.btn-press:active {\n  transform: scale(0.97);\n}\n\n/* Input Focus Animation */\n.input-focus {\n  transition: all 0.2s ease;\n}\n\n.input-focus:focus {\n  transform: scale(1.01);\n  box-shadow: 0 0 0 3px hsl(var(--ring) / 0.1);\n}\n\n/* Modal/Dialog Backdrop */\n@keyframes backdropFadeIn {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n\n.backdrop-fade {\n  animation: backdropFadeIn 0.2s ease-out;\n}\n","size_bytes":8316},"client/src/main.tsx":{"content":"import { createRoot } from \"react-dom/client\";\nimport App from \"./App\";\nimport \"./index.css\";\n\ncreateRoot(document.getElementById(\"root\")!).render(<App />);\n","size_bytes":157},"client/src/components/sidebar.tsx":{"content":"import { Link, useLocation } from \"wouter\";\nimport { cn } from \"@/lib/utils\";\nimport { \n  LayoutDashboard, \n  ShoppingCart, \n  Users, \n  CreditCard, \n  Bell, \n  Settings,\n  Star,\n  LogOut \n} from \"lucide-react\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { Button } from \"@/components/ui/button\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\n\nconst navigation = [\n  { name: \"Dashboard\", href: \"/\", icon: LayoutDashboard },\n  { name: \"Orders\", href: \"/orders\", icon: ShoppingCart },\n  { name: \"Mediators\", href: \"/mediators\", icon: Users },\n  { name: \"Accounts\", href: \"/accounts\", icon: CreditCard },\n  { name: \"Notifications\", href: \"/notifications\", icon: Bell },\n  { name: \"Settings\", href: \"/settings\", icon: Settings },\n];\n\nexport function Sidebar() {\n  const [location] = useLocation();\n  const { user } = useAuth();\n\n  const handleLogout = () => {\n    window.location.href = \"/api/logout\";\n  };\n\n  return (\n    <aside className=\"w-60 bg-card border-r border-border fixed h-full left-0 top-0 overflow-y-auto\">\n      <div className=\"p-6\">\n        {/* Logo */}\n        <div className=\"flex items-center space-x-3 mb-8\">\n          <div className=\"w-8 h-8 bg-primary rounded-lg flex items-center justify-center\">\n            <Star className=\"w-4 h-4 text-primary-foreground\" />\n          </div>\n          <h1 className=\"text-xl font-semibold\">ReviewSystem</h1>\n        </div>\n        \n        {/* Navigation */}\n        <nav className=\"space-y-1\">\n          {navigation.map((item) => {\n            const isActive = location === item.href;\n            return (\n              <Link\n                key={item.name}\n                href={item.href}\n                className={cn(\n                  \"flex items-center space-x-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors\",\n                  isActive\n                    ? \"bg-primary text-primary-foreground\"\n                    : \"text-muted-foreground hover:bg-muted hover:text-foreground\"\n                )}\n                data-testid={`nav-${item.name.toLowerCase()}`}\n              >\n                <item.icon className=\"w-5 h-5\" />\n                <span>{item.name}</span>\n              </Link>\n            );\n          })}\n        </nav>\n      </div>\n      \n      {/* User Profile */}\n      <div className=\"absolute bottom-0 left-0 right-0 p-6 border-t border-border\">\n        <div className=\"flex items-center space-x-3\">\n          <Avatar className=\"w-8 h-8\">\n            <AvatarImage src={user?.profileImageUrl} alt=\"User avatar\" />\n            <AvatarFallback>\n              {user?.firstName?.[0] || user?.email?.[0] || \"U\"}\n            </AvatarFallback>\n          </Avatar>\n          <div className=\"flex-1 min-w-0\">\n            <p className=\"text-sm font-medium truncate\" data-testid=\"user-name\">\n              {user?.firstName && user?.lastName \n                ? `${user.firstName} ${user.lastName}`\n                : user?.email || \"User\"}\n            </p>\n            <p className=\"text-xs text-muted-foreground truncate\" data-testid=\"user-email\">\n              {user?.email || \"\"}\n            </p>\n          </div>\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            onClick={handleLogout}\n            className=\"text-muted-foreground hover:text-foreground\"\n            data-testid=\"button-logout\"\n          >\n            <LogOut className=\"w-4 h-4\" />\n          </Button>\n        </div>\n      </div>\n    </aside>\n  );\n}\n","size_bytes":3472},"client/src/hooks/use-mobile.tsx":{"content":"import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n","size_bytes":565},"client/src/hooks/use-toast.ts":{"content":"import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","size_bytes":3895},"client/src/hooks/useAuth.ts":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport type { User } from \"@shared/schema\";\n\nexport function useAuth() {\n  const { data: user, isLoading } = useQuery<User>({\n    queryKey: [\"/api/auth/user\"],\n    retry: false,\n  });\n\n  return {\n    user,\n    isLoading,\n    isAuthenticated: !!user,\n  };\n}\n","size_bytes":307},"client/src/lib/authUtils.ts":{"content":"export function isUnauthorizedError(error: Error): boolean {\n  return /^401: .*Unauthorized/.test(error.message);\n}","size_bytes":115},"client/src/lib/currency.ts":{"content":"/**\n * Currency utilities for Indian Rupees (INR)\n * All amounts are stored in paise (1 rupee = 100 paise) to avoid floating point errors\n */\n\nexport function formatCurrency(amountInPaise: number): string {\n  const rupees = amountInPaise / 100;\n  return new Intl.NumberFormat('en-IN', {\n    style: 'currency',\n    currency: 'INR',\n    minimumFractionDigits: 0,\n    maximumFractionDigits: 2,\n  }).format(rupees);\n}\n\nexport function parseRupeesToPaise(rupees: number): number {\n  return Math.round(rupees * 100);\n}\n\nexport function parsePaiseToRupees(paise: number): number {\n  return paise / 100;\n}\n\nexport function formatCompactCurrency(amountInPaise: number): string {\n  const rupees = amountInPaise / 100;\n  if (rupees >= 10000000) { // 1 crore\n    return `₹${(rupees / 10000000).toFixed(1)}Cr`;\n  } else if (rupees >= 100000) { // 1 lakh\n    return `₹${(rupees / 100000).toFixed(1)}L`;\n  } else if (rupees >= 1000) { // 1 thousand\n    return `₹${(rupees / 1000).toFixed(1)}K`;\n  }\n  return formatCurrency(amountInPaise);\n}\n\nexport function calculateProfit(refundAmount: number, orderAmount: number): number {\n  return refundAmount - orderAmount;\n}\n","size_bytes":1157},"client/src/lib/queryClient.ts":{"content":"import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\n\nasync function throwIfResNotOk(res: Response) {\n  if (!res.ok) {\n    const text = (await res.text()) || res.statusText;\n    throw new Error(`${res.status}: ${text}`);\n  }\n}\n\nexport async function apiRequest(\n  method: string,\n  url: string,\n  data?: unknown | undefined,\n): Promise<Response> {\n  const res = await fetch(url, {\n    method,\n    headers: data ? { \"Content-Type\": \"application/json\" } : {},\n    body: data ? JSON.stringify(data) : undefined,\n    credentials: \"include\",\n  });\n\n  await throwIfResNotOk(res);\n  return res;\n}\n\ntype UnauthorizedBehavior = \"returnNull\" | \"throw\";\nexport const getQueryFn: <T>(options: {\n  on401: UnauthorizedBehavior;\n}) => QueryFunction<T> =\n  ({ on401: unauthorizedBehavior }) =>\n  async ({ queryKey }) => {\n    const res = await fetch(queryKey.join(\"/\") as string, {\n      credentials: \"include\",\n    });\n\n    if (unauthorizedBehavior === \"returnNull\" && res.status === 401) {\n      return null;\n    }\n\n    await throwIfResNotOk(res);\n    return await res.json();\n  };\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      queryFn: getQueryFn({ on401: \"throw\" }),\n      refetchInterval: false,\n      refetchOnWindowFocus: false,\n      staleTime: Infinity,\n      retry: false,\n    },\n    mutations: {\n      retry: false,\n    },\n  },\n});\n","size_bytes":1383},"client/src/lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","size_bytes":166},"client/src/pages/accounts.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { isUnauthorizedError } from \"@/lib/authUtils\";\nimport MainLayout from \"@/components/layout/main-layout\";\nimport { AccountCard } from \"@/components/accounts/account-card\";\nimport { AccountForm } from \"@/components/accounts/account-form\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { Plus, Search } from \"lucide-react\";\nimport type { Account, OrderWithRelations } from \"@shared/schema\";\n\nconst platforms = [\"Amazon\", \"Flipkart\", \"Myntra\", \"Meesho\", \"Ajio\", \"Nykaa\", \"Paytm Mall\", \"Snapdeal\"];\n\nexport default function Accounts() {\n  const { toast } = useToast();\n  const { isAuthenticated, isLoading } = useAuth();\n  const [showAccountForm, setShowAccountForm] = useState(false);\n  const [selectedAccount, setSelectedAccount] = useState<Account | null>(null);\n  const [filters, setFilters] = useState({\n    platform: \"\",\n    search: \"\",\n  });\n\n  // Redirect if not authenticated\n  useEffect(() => {\n    if (!isLoading && !isAuthenticated) {\n      toast({\n        title: \"Unauthorized\",\n        description: \"You are logged out. Logging in again...\",\n        variant: \"destructive\",\n      });\n      setTimeout(() => {\n        window.location.href = \"/api/login\";\n      }, 500);\n      return;\n    }\n  }, [isAuthenticated, isLoading, toast]);\n\n  const { data: accounts = [], isLoading: accountsLoading } = useQuery({\n    queryKey: [\"/api/accounts\"],\n    enabled: isAuthenticated,\n  });\n\n  const { data: orders = [] } = useQuery({\n    queryKey: [\"/api/orders\"],\n    enabled: isAuthenticated,\n  });\n\n  if (!isAuthenticated || isLoading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-background\">\n        <div className=\"animate-spin rounded-full h-32 w-32 border-b-2 border-primary\"></div>\n      </div>\n    );\n  }\n\n  if (showAccountForm) {\n    return (\n      <MainLayout>\n        <header className=\"bg-card border-b border-border px-4 lg:px-8 py-4 lg:py-6\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex-1 min-w-0\">\n              <h1 className=\"text-xl lg:text-2xl font-semibold truncate\" data-testid=\"text-page-title\">\n                {selectedAccount ? \"Edit Account\" : \"Add New Account\"}\n              </h1>\n              <p className=\"text-sm text-muted-foreground hidden sm:block\">\n                {selectedAccount ? \"Update account information\" : \"Add a new e-commerce platform account\"}\n              </p>\n            </div>\n            <Button \n              variant=\"outline\"\n              size=\"sm\"\n              onClick={() => {\n                setShowAccountForm(false);\n                setSelectedAccount(null);\n              }}\n              data-testid=\"button-back-to-accounts\"\n              className=\"ml-2\"\n            >\n              <span className=\"hidden lg:inline\">Back</span>\n              <span className=\"lg:hidden\">✕</span>\n            </Button>\n          </div>\n        </header>\n\n        <div className=\"p-4 lg:p-8\">\n          <AccountForm \n            account={selectedAccount}\n            onSuccess={() => {\n              setShowAccountForm(false);\n              setSelectedAccount(null);\n            }}\n            onCancel={() => {\n              setShowAccountForm(false);\n              setSelectedAccount(null);\n            }}\n          />\n        </div>\n      </MainLayout>\n    );\n  }\n\n  // Calculate stats for each account\n  const accountsWithStats = accounts.map((account: Account) => {\n    const accountOrders = (orders as OrderWithRelations[]).filter(order => order.accountId === account.id);\n    const activeOrders = accountOrders.filter(order => \n      ![\"Refunded\", \"Cancelled\"].includes(order.currentStatus)\n    );\n    \n    const totalInvestment = activeOrders.reduce((sum, order) => sum + order.orderAmount, 0);\n    const pendingAmount = activeOrders.reduce((sum, order) => sum + order.refundAmount, 0);\n    \n    return {\n      ...account,\n      stats: {\n        activeOrders: activeOrders.length,\n        totalInvestment,\n        pendingAmount,\n        expectedRefund: pendingAmount,\n      },\n    };\n  });\n\n  // Filter accounts\n  const filteredAccounts = accountsWithStats.filter((account) => {\n    const matchesPlatform = !filters.platform || filters.platform === \"all\" || account.platform === filters.platform;\n    const matchesSearch = !filters.search || \n      account.name.toLowerCase().includes(filters.search.toLowerCase()) ||\n      account.email.toLowerCase().includes(filters.search.toLowerCase()) ||\n      account.phone.includes(filters.search);\n\n    return matchesPlatform && matchesSearch;\n  });\n\n  // Sort by active orders (highest first)\n  filteredAccounts.sort((a, b) => b.stats.activeOrders - a.stats.activeOrders);\n\n  return (\n    <MainLayout>\n      <header className=\"bg-card border-b border-border px-4 lg:px-8 py-4 lg:py-6\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex-1 min-w-0\">\n            <h1 className=\"text-xl lg:text-2xl font-semibold\" data-testid=\"text-page-title\">E-commerce Accounts</h1>\n            <p className=\"text-sm text-muted-foreground hidden sm:block\">Manage your platform accounts for orders</p>\n          </div>\n          <Button \n            onClick={() => setShowAccountForm(true)}\n            data-testid=\"button-add-account\"\n            size=\"sm\"\n            className=\"ml-2\"\n          >\n            <Plus className=\"h-4 w-4 lg:mr-2\" />\n            <span className=\"hidden lg:inline\">Add Account</span>\n          </Button>\n        </div>\n      </header>\n\n      <div className=\"p-4 lg:p-8\">\n        {/* Filters */}\n        <div className=\"bg-card rounded-xl border border-border p-4 lg:p-6 mb-4 lg:mb-6 card-shadow\">\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3 lg:gap-4\">\n            <div>\n              <label className=\"block text-sm font-medium mb-2\">Platform</label>\n              <Select value={filters.platform} onValueChange={(value) => setFilters(prev => ({ ...prev, platform: value }))}>\n                <SelectTrigger data-testid=\"filter-platform\">\n                  <SelectValue placeholder=\"All Platforms\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">All Platforms</SelectItem>\n                  {platforms.map((platform) => (\n                    <SelectItem key={platform} value={platform}>{platform}</SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n            \n            <div>\n              <label className=\"block text-sm font-medium mb-2\">Search</label>\n              <div className=\"relative\">\n                <Input\n                  placeholder=\"Search by name, email, or phone...\"\n                  value={filters.search}\n                  onChange={(e) => setFilters(prev => ({ ...prev, search: e.target.value }))}\n                  className=\"pl-10\"\n                  data-testid=\"input-search\"\n                />\n                <Search className=\"h-4 w-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground\" />\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Accounts Grid */}\n        {accountsLoading ? (\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 lg:gap-6\">\n            {[1, 2, 3, 4, 5, 6].map((i) => (\n              <div key={i} className=\"bg-card rounded-xl border border-border p-6 card-shadow stagger-item\">\n                <div className=\"flex items-center space-x-3 mb-4\">\n                  <div className=\"w-10 h-10 skeleton-shimmer rounded-lg\"></div>\n                  <div className=\"space-y-2 flex-1\">\n                    <div className=\"h-4 skeleton-shimmer rounded w-24\"></div>\n                    <div className=\"h-3 skeleton-shimmer rounded w-16\"></div>\n                  </div>\n                </div>\n                <div className=\"space-y-3\">\n                  <div className=\"h-3 skeleton-shimmer rounded\"></div>\n                  <div className=\"h-3 skeleton-shimmer rounded w-3/4\"></div>\n                  <div className=\"h-8 skeleton-shimmer rounded\"></div>\n                </div>\n              </div>\n            ))}\n          </div>\n        ) : filteredAccounts.length === 0 ? (\n          <div className=\"text-center py-8 lg:py-12\">\n            <div className=\"max-w-md mx-auto px-4\">\n              <div className=\"w-12 h-12 lg:w-16 lg:h-16 bg-muted rounded-full flex items-center justify-center mx-auto mb-3 lg:mb-4\">\n                <Plus className=\"w-6 h-6 lg:w-8 lg:h-8 text-muted-foreground\" />\n              </div>\n              <h3 className=\"text-base lg:text-lg font-semibold mb-2\">\n                {accounts.length === 0 ? \"No accounts yet\" : \"No accounts found\"}\n              </h3>\n              <p className=\"text-sm text-muted-foreground mb-4\">\n                {accounts.length === 0 \n                  ? \"Add your first e-commerce account to start managing orders\"\n                  : \"Try adjusting your filters or add a new account\"\n                }\n              </p>\n              <Button \n                onClick={() => setShowAccountForm(true)}\n                data-testid=\"button-add-first-account\"\n              >\n                <Plus className=\"w-4 h-4 mr-2\" />\n                Add Your First Account\n              </Button>\n            </div>\n          </div>\n        ) : (\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 lg:gap-6\">\n            {filteredAccounts.map((account, index) => (\n              <div key={account.id} className=\"stagger-item\">\n                <AccountCard\n                  account={account}\n                  stats={account.stats}\n                  onEdit={(account) => {\n                    setSelectedAccount(account);\n                    setShowAccountForm(true);\n                  }}\n                  onViewOrders={(account) => {\n                    // Navigate to orders page with account filter\n                    window.location.href = `/orders?accountId=${account.id}`;\n                  }}\n                />\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </MainLayout>\n  );\n}\n","size_bytes":10486},"client/src/pages/dashboard.tsx":{"content":"import { useEffect } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport MainLayout from \"@/components/layout/main-layout\";\nimport { QuickActions } from \"@/components/dashboard/quick-actions\";\nimport { StatsCard } from \"@/components/dashboard/stats-card\";\nimport { RecentOrders } from \"@/components/dashboard/recent-orders\";\nimport { SmartNotifications } from \"@/components/dashboard/smart-notifications\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { formatCurrency } from \"@/lib/currency\";\nimport { OrderWithRelations } from \"@shared/schema\";\nimport { \n  TrendingUp, \n  ShoppingCart, \n  CheckCircle, \n  Clock,\n  DollarSign,\n  Target,\n  Wallet\n} from \"lucide-react\";\n\nexport default function Dashboard() {\n  const { toast } = useToast();\n  const { isAuthenticated, isLoading } = useAuth();\n\n  // Redirect to home if not authenticated\n  useEffect(() => {\n    if (!isLoading && !isAuthenticated) {\n      toast({\n        title: \"Unauthorized\",\n        description: \"You are logged out. Logging in again...\",\n        variant: \"destructive\",\n      });\n      setTimeout(() => {\n        window.location.href = \"/api/login\";\n      }, 500);\n      return;\n    }\n  }, [isAuthenticated, isLoading, toast]);\n\n  const { data: stats, isLoading: statsLoading } = useQuery({\n    queryKey: [\"/api/dashboard/stats\"],\n    enabled: isAuthenticated,\n  });\n\n  const { data: recentOrders = [], isLoading: ordersLoading } = useQuery<OrderWithRelations[]>({\n    queryKey: [\"/api/orders\"],\n    enabled: isAuthenticated,\n  });\n\n  if (isLoading || !isAuthenticated) {\n    return (\n      <div className=\"min-h-screen bg-background flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-32 w-32 border-b-2 border-primary mx-auto mb-4\"></div>\n          <p className=\"text-muted-foreground\">Loading...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <MainLayout>\n      {/* Header */}\n      <header className=\"bg-card border-b border-border px-4 lg:px-8 py-4 lg:py-6\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h1 className=\"text-xl lg:text-2xl font-semibold\" data-testid=\"page-title\">Dashboard</h1>\n            <p className=\"text-sm text-muted-foreground hidden sm:block\">Welcome back, manage your review orders efficiently</p>\n          </div>\n        </div>\n      </header>\n\n      <div className=\"p-4 lg:p-8\">\n        {/* Quick Actions */}\n        <QuickActions />\n\n        {/* Monthly Statistics */}\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 lg:gap-6 mb-6 lg:mb-8\">\n            <div className=\"stagger-item\">\n              <StatsCard\n                title=\"Monthly Earnings\"\n                value={stats ? formatCurrency((stats as any).monthlyEarnings) : \"₹0\"}\n                subtitle=\"This month\"\n                icon={TrendingUp}\n                iconColor=\"text-green-600\"\n                valueColor=\"text-green-600\"\n                trend={{\n                  value: \"+12% from last month\",\n                  isPositive: true,\n                }}\n              />\n            </div>\n            \n            <div className=\"stagger-item\">\n              <StatsCard\n                title=\"Active Orders\"\n                value={(stats as any)?.monthlyOrders || 0}\n                subtitle=\"This month\"\n                icon={ShoppingCart}\n                iconColor=\"text-blue-600\"\n              />\n            </div>\n            \n            <div className=\"stagger-item\">\n              <StatsCard\n                title=\"Success Rate\"\n                value=\"94.2%\"\n                subtitle=\"Order completion rate\"\n                icon={CheckCircle}\n                iconColor=\"text-emerald-600\"\n              />\n            </div>\n            \n            <div className=\"stagger-item\">\n              <StatsCard\n                title=\"Pending Refunds\"\n                value={stats ? formatCurrency((stats as any).pendingRefunds) : \"₹0\"}\n                subtitle=\"Awaiting payment\"\n                icon={Clock}\n                iconColor=\"text-orange-600\"\n                valueColor=\"text-orange-600\"\n              />\n            </div>\n          </div>\n\n        {/* Lifetime Statistics */}\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 lg:gap-6 mb-6 lg:mb-8\">\n          <div className=\"stagger-item\">\n            <StatsCard\n              title=\"Total Investment\"\n              value={stats ? formatCurrency((stats as any).totalInvestment) : \"₹0\"}\n              subtitle=\"All time\"\n              icon={DollarSign}\n              iconColor=\"text-blue-600\"\n            />\n          </div>\n          \n          <div className=\"stagger-item\">\n            <StatsCard\n              title=\"Total Orders\"\n              value={(stats as any)?.totalOrders || 0}\n              subtitle=\"Lifetime orders\"\n              icon={Target}\n              iconColor=\"text-purple-600\"\n            />\n          </div>\n          \n          <div className=\"stagger-item\">\n            <StatsCard\n              title=\"Total Pending\"\n              value={stats ? formatCurrency((stats as any).totalPendingRefund) : \"₹0\"}\n              subtitle=\"Current pending\"\n              icon={Wallet}\n              iconColor=\"text-orange-600\"\n            />\n          </div>\n        </div>\n\n        {/* Recent Orders and Smart Notifications */}\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4 lg:gap-8\">\n          <RecentOrders orders={recentOrders} isLoading={ordersLoading} />\n          <SmartNotifications orders={recentOrders} isLoading={ordersLoading} />\n        </div>\n      </div>\n    </MainLayout>\n  );\n}\n","size_bytes":5728},"client/src/pages/home.tsx":{"content":"import { useEffect } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { isUnauthorizedError } from \"@/lib/authUtils\";\nimport MainLayout from \"@/components/layout/main-layout\";\nimport StatsCard from \"@/components/dashboard/stats-card\";\nimport QuickActions from \"@/components/dashboard/quick-actions\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { formatCurrency, calculateProfit } from \"@/lib/currency\";\nimport { \n  TrendingUp, \n  ShoppingCart, \n  CheckCircle, \n  Clock,\n  ArrowUp,\n  ChartLine,\n  Plus\n} from \"lucide-react\";\nimport type { OrderWithRelations } from \"@shared/schema\";\n\nexport default function Home() {\n  const { toast } = useToast();\n  const { isAuthenticated, isLoading } = useAuth();\n\n  // Redirect to home if not authenticated\n  useEffect(() => {\n    if (!isLoading && !isAuthenticated) {\n      toast({\n        title: \"Unauthorized\",\n        description: \"You are logged out. Logging in again...\",\n        variant: \"destructive\",\n      });\n      setTimeout(() => {\n        window.location.href = \"/api/login\";\n      }, 500);\n      return;\n    }\n  }, [isAuthenticated, isLoading, toast]);\n\n  const { data: stats, isLoading: statsLoading } = useQuery({\n    queryKey: [\"/api/dashboard/stats\"],\n    enabled: isAuthenticated,\n  });\n\n  const { data: orders, isLoading: ordersLoading } = useQuery({\n    queryKey: [\"/api/orders\"],\n    enabled: isAuthenticated,\n  });\n\n  if (!isAuthenticated || isLoading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-background\">\n        <div className=\"animate-spin rounded-full h-32 w-32 border-b-2 border-primary\"></div>\n      </div>\n    );\n  }\n\n  const recentOrders = (orders as OrderWithRelations[] || []).slice(0, 3);\n\n  const getStatusBadgeVariant = (status: string) => {\n    switch (status) {\n      case 'Ordered': return 'secondary';\n      case 'Delivered': return 'default';\n      case 'Deliverables Done': return 'default';\n      case 'Refund Form Done': return 'default';\n      case 'Refunded': return 'default';\n      case 'Overdue Passed for Refund Form': return 'destructive';\n      case 'Remind Mediator for Payment': return 'destructive';\n      case 'Cancelled': return 'secondary';\n      default: return 'secondary';\n    }\n  };\n\n  return (\n    <MainLayout>\n      {/* Header */}\n      <header className=\"bg-card border-b border-border px-8 py-6\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h1 className=\"text-2xl font-semibold\" data-testid=\"text-page-title\">Dashboard</h1>\n            <p className=\"text-muted-foreground\">Welcome back, manage your review orders efficiently</p>\n          </div>\n          <div className=\"flex items-center space-x-4\">\n            <Button data-testid=\"button-new-order\">\n              <Plus className=\"h-4 w-4 mr-2\" />\n              New Order\n            </Button>\n          </div>\n        </div>\n      </header>\n\n      <div className=\"p-8\">\n        {/* Quick Actions */}\n        <QuickActions />\n\n        {/* Monthly Statistics */}\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\">\n          <StatsCard\n            title=\"Monthly Earnings\"\n            value={statsLoading ? \"...\" : formatCurrency(stats?.monthlyEarnings || 0)}\n            subtitle=\"+12% from last month\"\n            icon={TrendingUp}\n            iconColor=\"text-green-600\"\n            iconBg=\"bg-green-50\"\n            valueColor=\"text-green-600\"\n          />\n          \n          <StatsCard\n            title=\"Active Orders\"\n            value={statsLoading ? \"...\" : (stats?.monthlyOrders || 0).toString()}\n            subtitle=\"Pending completion\"\n            icon={ShoppingCart}\n            iconColor=\"text-blue-600\"\n            iconBg=\"bg-blue-50\"\n          />\n          \n          <StatsCard\n            title=\"Success Rate\"\n            value={statsLoading ? \"...\" : `${stats?.completedReviews || 0}`}\n            subtitle=\"Completed reviews\"\n            icon={CheckCircle}\n            iconColor=\"text-emerald-600\"\n            iconBg=\"bg-emerald-50\"\n          />\n          \n          <StatsCard\n            title=\"Pending Refunds\"\n            value={statsLoading ? \"...\" : formatCurrency(stats?.pendingRefunds || 0)}\n            subtitle=\"Awaiting payment\"\n            icon={Clock}\n            iconColor=\"text-orange-600\"\n            iconBg=\"bg-orange-50\"\n            valueColor=\"text-orange-600\"\n          />\n        </div>\n\n        {/* Recent Orders & Analytics */}\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n          {/* Recent Orders */}\n          <Card className=\"border-border\">\n            <CardHeader>\n              <div className=\"flex items-center justify-between\">\n                <CardTitle>Recent Orders</CardTitle>\n                <Button variant=\"link\" size=\"sm\" data-testid=\"link-view-all-orders\">\n                  View all\n                </Button>\n              </div>\n            </CardHeader>\n            <CardContent>\n              {ordersLoading ? (\n                <div className=\"space-y-4\">\n                  {[1, 2, 3].map((i) => (\n                    <div key={i} className=\"animate-pulse\">\n                      <div className=\"flex items-center space-x-4 p-4 border border-border rounded-lg\">\n                        <div className=\"w-12 h-12 bg-muted rounded-lg\"></div>\n                        <div className=\"flex-1 space-y-2\">\n                          <div className=\"h-4 bg-muted rounded w-3/4\"></div>\n                          <div className=\"h-3 bg-muted rounded w-1/2\"></div>\n                        </div>\n                        <div className=\"space-y-2\">\n                          <div className=\"h-4 bg-muted rounded w-16\"></div>\n                          <div className=\"h-6 bg-muted rounded w-20\"></div>\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              ) : recentOrders.length === 0 ? (\n                <div className=\"text-center py-8\">\n                  <ShoppingCart className=\"h-12 w-12 text-muted-foreground mx-auto mb-4\" />\n                  <p className=\"text-muted-foreground\">No orders yet</p>\n                  <p className=\"text-sm text-muted-foreground\">Create your first order to get started</p>\n                </div>\n              ) : (\n                <div className=\"space-y-4\">\n                  {recentOrders.map((order) => (\n                    <div key={order.id} className=\"flex items-center space-x-4 p-4 border border-border rounded-lg hover:bg-muted/20 transition-colors\">\n                      <div className=\"w-12 h-12 bg-muted rounded-lg flex items-center justify-center\">\n                        <ShoppingCart className=\"h-6 w-6 text-muted-foreground\" />\n                      </div>\n                      <div className=\"flex-1 min-w-0\">\n                        <p className=\"font-medium truncate\" data-testid={`text-order-name-${order.id}`}>\n                          {order.productName}\n                        </p>\n                        <p className=\"text-sm text-muted-foreground\" data-testid={`text-order-platform-${order.id}`}>\n                          {order.platform}\n                        </p>\n                      </div>\n                      <div className=\"text-right\">\n                        <p className=\"font-medium\" data-testid={`text-order-amount-${order.id}`}>\n                          {formatCurrency(order.orderAmount)}\n                        </p>\n                        <Badge variant={getStatusBadgeVariant(order.currentStatus)} data-testid={`badge-order-status-${order.id}`}>\n                          {order.currentStatus}\n                        </Badge>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </CardContent>\n          </Card>\n\n          {/* Analytics Chart */}\n          <Card className=\"border-border\">\n            <CardHeader>\n              <div className=\"flex items-center justify-between\">\n                <CardTitle>Earnings Overview</CardTitle>\n                <select className=\"text-sm border border-border rounded-lg px-3 py-1 bg-background\">\n                  <option>Last 6 months</option>\n                  <option>Last 3 months</option>\n                  <option>Last month</option>\n                </select>\n              </div>\n            </CardHeader>\n            <CardContent>\n              <div className=\"relative h-64 bg-muted/20 rounded-lg flex items-center justify-center\">\n                <div className=\"text-center\">\n                  <ChartLine className=\"h-16 w-16 text-muted-foreground mx-auto mb-4\" />\n                  <p className=\"text-muted-foreground\">Interactive earnings chart</p>\n                  <p className=\"text-sm text-muted-foreground mt-2\">Showing monthly growth trends and performance metrics</p>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n    </MainLayout>\n  );\n}\n","size_bytes":9243},"client/src/pages/landing.tsx":{"content":"import { Button } from \"@/components/ui/button\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Star, TrendingUp, Shield, Zap } from \"lucide-react\";\n\nexport default function Landing() {\n  return (\n    <div className=\"min-h-screen bg-background\">\n      {/* Hero Section */}\n      <div className=\"relative overflow-hidden\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-24\">\n          <div className=\"text-center\">\n            <div className=\"flex items-center justify-center space-x-3 mb-8\">\n              <div className=\"w-12 h-12 bg-primary rounded-lg flex items-center justify-center\">\n                <Star className=\"w-6 h-6 text-primary-foreground\" />\n              </div>\n              <h1 className=\"text-3xl font-bold\">ReviewSystem</h1>\n            </div>\n            \n            <h2 className=\"text-4xl font-bold tracking-tight text-foreground sm:text-6xl mb-6\">\n              Professional Review\n              <span className=\"text-primary block\">Management Platform</span>\n            </h2>\n            \n            <p className=\"max-w-2xl mx-auto text-xl text-muted-foreground mb-8\">\n              Streamline your review-based earnings with our comprehensive platform. \n              Track orders, manage mediators, and monitor refunds efficiently.\n            </p>\n            \n            <Button \n              size=\"lg\" \n              className=\"text-lg px-8 py-6\"\n              onClick={() => window.location.href = \"/api/login\"}\n              data-testid=\"button-login\"\n            >\n              Get Started\n            </Button>\n          </div>\n        </div>\n      </div>\n\n      {/* Features Section */}\n      <div className=\"py-24 bg-muted/20\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"text-center mb-16\">\n            <h3 className=\"text-3xl font-bold text-foreground mb-4\">\n              Everything you need to manage your review business\n            </h3>\n            <p className=\"text-xl text-muted-foreground\">\n              Powerful tools designed for efficiency and growth\n            </p>\n          </div>\n          \n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8\">\n            <Card className=\"card-shadow\">\n              <CardContent className=\"p-6 text-center\">\n                <div className=\"w-12 h-12 bg-blue-50 rounded-lg flex items-center justify-center mx-auto mb-4\">\n                  <TrendingUp className=\"w-6 h-6 text-blue-600\" />\n                </div>\n                <h4 className=\"font-semibold mb-2\">Order Tracking</h4>\n                <p className=\"text-sm text-muted-foreground\">\n                  Complete lifecycle management from placement to refund completion\n                </p>\n              </CardContent>\n            </Card>\n            \n            <Card className=\"card-shadow\">\n              <CardContent className=\"p-6 text-center\">\n                <div className=\"w-12 h-12 bg-green-50 rounded-lg flex items-center justify-center mx-auto mb-4\">\n                  <Shield className=\"w-6 h-6 text-green-600\" />\n                </div>\n                <h4 className=\"font-semibold mb-2\">Secure Management</h4>\n                <p className=\"text-sm text-muted-foreground\">\n                  Safely manage mediator relationships and account information\n                </p>\n              </CardContent>\n            </Card>\n            \n            <Card className=\"card-shadow\">\n              <CardContent className=\"p-6 text-center\">\n                <div className=\"w-12 h-12 bg-orange-50 rounded-lg flex items-center justify-center mx-auto mb-4\">\n                  <Zap className=\"w-6 h-6 text-orange-600\" />\n                </div>\n                <h4 className=\"font-semibold mb-2\">Real-time Alerts</h4>\n                <p className=\"text-sm text-muted-foreground\">\n                  Stay informed with automated notifications and payment reminders\n                </p>\n              </CardContent>\n            </Card>\n            \n            <Card className=\"card-shadow\">\n              <CardContent className=\"p-6 text-center\">\n                <div className=\"w-12 h-12 bg-purple-50 rounded-lg flex items-center justify-center mx-auto mb-4\">\n                  <Star className=\"w-6 h-6 text-purple-600\" />\n                </div>\n                <h4 className=\"font-semibold mb-2\">Analytics Dashboard</h4>\n                <p className=\"text-sm text-muted-foreground\">\n                  Comprehensive insights into earnings, performance, and trends\n                </p>\n              </CardContent>\n            </Card>\n          </div>\n        </div>\n      </div>\n\n      {/* CTA Section */}\n      <div className=\"py-24\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center\">\n          <h3 className=\"text-3xl font-bold text-foreground mb-4\">\n            Ready to optimize your review business?\n          </h3>\n          <p className=\"text-xl text-muted-foreground mb-8\">\n            Join professionals who trust ReviewSystem for their earnings management\n          </p>\n          <Button \n            size=\"lg\" \n            className=\"text-lg px-8 py-6\"\n            onClick={() => window.location.href = \"/api/login\"}\n            data-testid=\"button-cta-login\"\n          >\n            Start Managing Today\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":5381},"client/src/pages/mediators.tsx":{"content":"import { useEffect, useState } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport MainLayout from \"@/components/layout/main-layout\";\nimport { MediatorCard } from \"@/components/mediators/mediator-card\";\nimport { MediatorForm } from \"@/components/mediators/mediator-form\";\nimport { Button } from \"@/components/ui/button\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Plus, ArrowLeft } from \"lucide-react\";\n\nexport default function Mediators() {\n  const { toast } = useToast();\n  const { isAuthenticated, isLoading } = useAuth();\n  const [showMediatorForm, setShowMediatorForm] = useState(false);\n  const [selectedMediator, setSelectedMediator] = useState<any>(null);\n\n  // Redirect to home if not authenticated\n  useEffect(() => {\n    if (!isLoading && !isAuthenticated) {\n      toast({\n        title: \"Unauthorized\",\n        description: \"You are logged out. Logging in again...\",\n        variant: \"destructive\",\n      });\n      setTimeout(() => {\n        window.location.href = \"/api/login\";\n      }, 500);\n      return;\n    }\n  }, [isAuthenticated, isLoading, toast]);\n\n  const { data: mediators = [], isLoading: mediatorsLoading } = useQuery({\n    queryKey: [\"/api/mediators\"],\n    enabled: isAuthenticated,\n  });\n\n  const { data: orders = [] } = useQuery({\n    queryKey: [\"/api/orders\"],\n    enabled: isAuthenticated,\n  });\n\n  if (isLoading || !isAuthenticated) {\n    return (\n      <div className=\"min-h-screen bg-background flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-32 w-32 border-b-2 border-primary mx-auto mb-4\"></div>\n          <p className=\"text-muted-foreground\">Loading...</p>\n        </div>\n      </div>\n    );\n  }\n\n  // Calculate stats for each mediator\n  const mediatorsWithStats = mediators.map((mediator: any) => {\n    const mediatorOrders = orders.filter((order: any) => order.mediatorId === mediator.id);\n    const activeOrders = mediatorOrders.filter((order: any) => \n      ![\"Refunded\", \"Cancelled\"].includes(order.currentStatus)\n    );\n    const refundedOrders = mediatorOrders.filter((order: any) => \n      order.currentStatus === \"Refunded\"\n    );\n    \n    const totalInvestment = activeOrders.reduce((sum: number, order: any) => sum + order.orderAmount, 0);\n    const expectedReturns = activeOrders.reduce((sum: number, order: any) => sum + order.refundAmount, 0);\n    const successRate = mediatorOrders.length > 0 \n      ? (refundedOrders.length / mediatorOrders.length) * 100 \n      : 0;\n\n    return {\n      ...mediator,\n      stats: {\n        activeOrders: activeOrders.length,\n        totalInvestment,\n        expectedReturns,\n        successRate,\n      },\n    };\n  });\n\n  if (mediatorsLoading) {\n    return (\n      <MainLayout>\n        <header className=\"bg-card border-b border-border px-4 lg:px-8 py-4 lg:py-6\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h1 className=\"text-xl lg:text-2xl font-semibold\">Mediators</h1>\n              <p className=\"text-sm text-muted-foreground hidden sm:block\">Manage relationships with your mediators</p>\n            </div>\n          </div>\n        </header>\n\n        <div className=\"p-4 lg:p-8\">\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 lg:gap-6\">\n              {[1, 2, 3, 4, 5, 6].map((i) => (\n                <div key={i} className=\"bg-card rounded-xl border border-border p-6 card-shadow stagger-item\">\n                  <div className=\"flex items-center space-x-3 mb-4\">\n                    <div className=\"w-12 h-12 skeleton-shimmer rounded-full\"></div>\n                    <div className=\"space-y-2 flex-1\">\n                      <div className=\"h-4 skeleton-shimmer rounded w-24\"></div>\n                      <div className=\"h-3 skeleton-shimmer rounded w-20\"></div>\n                    </div>\n                  </div>\n                  <div className=\"space-y-3\">\n                    <div className=\"h-3 skeleton-shimmer rounded\"></div>\n                    <div className=\"h-3 skeleton-shimmer rounded w-3/4\"></div>\n                    <div className=\"h-8 skeleton-shimmer rounded\"></div>\n                  </div>\n                </div>\n              ))}\n          </div>\n        </div>\n      </MainLayout>\n    );\n  }\n\n  if (showMediatorForm) {\n    return (\n      <MainLayout>\n        <header className=\"bg-card border-b border-border px-4 lg:px-8 py-4 lg:py-6\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex-1 min-w-0\">\n              <h1 className=\"text-xl lg:text-2xl font-semibold truncate\" data-testid=\"page-title\">\n                {selectedMediator ? 'Edit Mediator' : 'Add New Mediator'}\n              </h1>\n              <p className=\"text-sm text-muted-foreground hidden sm:block\">\n                {selectedMediator ? 'Update mediator information' : 'Add a new mediator to manage orders'}\n              </p>\n            </div>\n            <Button \n              variant=\"outline\"\n              size=\"sm\"\n              onClick={() => {\n                setShowMediatorForm(false);\n                setSelectedMediator(null);\n              }}\n              data-testid=\"button-back\"\n              className=\"ml-2\"\n            >\n              <ArrowLeft className=\"w-4 h-4 lg:mr-2\" />\n              <span className=\"hidden lg:inline\">Back</span>\n            </Button>\n          </div>\n        </header>\n\n        <div className=\"p-4 lg:p-8\">\n          <MediatorForm\n            mediator={selectedMediator}\n            onSuccess={() => {\n              setShowMediatorForm(false);\n              setSelectedMediator(null);\n            }}\n            onCancel={() => {\n              setShowMediatorForm(false);\n              setSelectedMediator(null);\n            }}\n          />\n        </div>\n      </MainLayout>\n    );\n  }\n\n  return (\n    <MainLayout>\n      <header className=\"bg-card border-b border-border px-4 lg:px-8 py-4 lg:py-6\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex-1 min-w-0\">\n            <h1 className=\"text-xl lg:text-2xl font-semibold\" data-testid=\"page-title\">Mediators</h1>\n            <p className=\"text-sm text-muted-foreground hidden sm:block\">Manage relationships with your mediators</p>\n          </div>\n          <Button \n            onClick={() => {\n              setSelectedMediator(null);\n              setShowMediatorForm(true);\n            }}\n            data-testid=\"button-add-mediator\"\n            size=\"sm\"\n            className=\"ml-2\"\n          >\n            <Plus className=\"w-4 h-4 lg:mr-2\" />\n            <span className=\"hidden lg:inline\">Add Mediator</span>\n          </Button>\n        </div>\n      </header>\n\n      <div className=\"p-4 lg:p-8\">\n        {mediators.length === 0 ? (\n          <div className=\"text-center py-8 lg:py-12\">\n            <div className=\"max-w-md mx-auto px-4\">\n              <div className=\"w-12 h-12 lg:w-16 lg:h-16 bg-muted rounded-full flex items-center justify-center mx-auto mb-3 lg:mb-4\">\n                <Plus className=\"w-6 h-6 lg:w-8 lg:h-8 text-muted-foreground\" />\n              </div>\n              <h3 className=\"text-base lg:text-lg font-semibold mb-2\">No mediators yet</h3>\n              <p className=\"text-sm text-muted-foreground mb-4\">\n                Add your first mediator to start managing your orders\n              </p>\n              <Button \n                onClick={() => {\n                  setSelectedMediator(null);\n                  setShowMediatorForm(true);\n                }}\n                data-testid=\"button-add-first-mediator\"\n              >\n                <Plus className=\"w-4 h-4 mr-2\" />\n                Add Your First Mediator\n              </Button>\n            </div>\n          </div>\n        ) : (\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 lg:gap-6\">\n            {mediatorsWithStats.map((mediator: any, index: number) => (\n              <div key={mediator.id} className=\"stagger-item\">\n                <MediatorCard\n                  mediator={mediator}\n                  stats={mediator.stats}\n                  onEdit={(mediator) => {\n                    setSelectedMediator(mediator);\n                    setShowMediatorForm(true);\n                  }}\n                  onViewOrders={(mediator) => {\n                    window.location.href = `/orders?mediatorId=${mediator.id}`;\n                  }}\n                />\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </MainLayout>\n  );\n}\n","size_bytes":8596},"client/src/pages/not-found.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { AlertCircle } from \"lucide-react\";\n\nexport default function NotFound() {\n  return (\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-gray-50\">\n      <Card className=\"w-full max-w-md mx-4\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex mb-4 gap-2\">\n            <AlertCircle className=\"h-8 w-8 text-red-500\" />\n            <h1 className=\"text-2xl font-bold text-gray-900\">404 Page Not Found</h1>\n          </div>\n\n          <p className=\"mt-4 text-sm text-gray-600\">\n            Did you forget to add the page to the router?\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":711},"client/src/pages/notifications.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { isUnauthorizedError } from \"@/lib/authUtils\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport MainLayout from \"@/components/layout/main-layout\";\nimport { NotificationItem } from \"@/components/notifications/notification-item\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Bell, AlertTriangle, CheckCircle, Info, Calendar, Search } from \"lucide-react\";\nimport type { NotificationWithOrder } from \"@shared/schema\";\n\nexport default function Notifications() {\n  const { toast } = useToast();\n  const { isAuthenticated, isLoading } = useAuth();\n  const queryClient = useQueryClient();\n  const [filters, setFilters] = useState({\n    type: \"\",\n    search: \"\",\n  });\n\n  // Redirect if not authenticated\n  useEffect(() => {\n    if (!isLoading && !isAuthenticated) {\n      toast({\n        title: \"Unauthorized\",\n        description: \"You are logged out. Logging in again...\",\n        variant: \"destructive\",\n      });\n      setTimeout(() => {\n        window.location.href = \"/api/login\";\n      }, 500);\n      return;\n    }\n  }, [isAuthenticated, isLoading, toast]);\n\n  const { data: notifications = [], isLoading: notificationsLoading } = useQuery<NotificationWithOrder[]>({\n    queryKey: [\"/api/notifications\"],\n    enabled: isAuthenticated,\n  });\n\n  const markAsReadMutation = useMutation({\n    mutationFn: async (notificationId: string) => {\n      return await apiRequest(\"PUT\", `/api/notifications/${notificationId}/read`);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/notifications\"] });\n    },\n    onError: (error: Error) => {\n      if (isUnauthorizedError(error)) {\n        toast({\n          title: \"Unauthorized\",\n          description: \"You are logged out. Logging in again...\",\n          variant: \"destructive\",\n        });\n        setTimeout(() => {\n          window.location.href = \"/api/login\";\n        }, 500);\n        return;\n      }\n      toast({\n        title: \"Error\",\n        description: \"Failed to mark notification as read\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const markAllAsReadMutation = useMutation({\n    mutationFn: async () => {\n      return await apiRequest(\"PUT\", \"/api/notifications/read-all\");\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/notifications\"] });\n      toast({\n        title: \"Success\",\n        description: \"All notifications marked as read\",\n      });\n    },\n    onError: (error: Error) => {\n      if (isUnauthorizedError(error)) {\n        toast({\n          title: \"Unauthorized\",\n          description: \"You are logged out. Logging in again...\",\n          variant: \"destructive\",\n        });\n        setTimeout(() => {\n          window.location.href = \"/api/login\";\n        }, 500);\n        return;\n      }\n      toast({\n        title: \"Error\",\n        description: \"Failed to mark all notifications as read\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  // Load user settings for message templates\n  const { data: userSettings } = useQuery({\n    queryKey: [\"/api/user-settings\"],\n    enabled: isAuthenticated,\n  });\n\n  // Handle messaging mediator - generates WhatsApp URL\n  const handleMessageMediator = (orderId: string) => {\n    const notification = notifications.find(n => n.order?.id === orderId);\n    if (!notification?.order) {\n      toast({\n        title: \"Error\",\n        description: \"Order information not found\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    const order = notification.order as any; // Type assertion since notification order includes relations\n    const mediator = order.mediator;\n    \n    if (!mediator?.whatsappNumber) {\n      toast({\n        title: \"Error\", \n        description: \"Mediator WhatsApp number not found\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    // Get message template from settings or use default\n    const templates = (userSettings as any)?.messageTemplates ? \n      JSON.parse((userSettings as any).messageTemplates) : { selectedTemplate: 'default' };\n    \n    // Generate message based on notification type and order status\n    let message = `Hi ${mediator.name}! Regarding order: ${order.productName}\\n` +\n                  `Order ID: ${order.orderId}\\n` +\n                  `Platform: ${order.platform}\\n` +\n                  `Current Status: ${order.currentStatus}`;\n\n    // Add specific context based on notification type\n    if (notification.type === \"Critical\") {\n      message += `\\n⚠️ URGENT: ${notification.message}`;\n    } else {\n      message += `\\n📝 ${notification.message}`;\n    }\n\n    // Clean phone number and create WhatsApp URL\n    const phoneNumber = mediator.whatsappNumber.replace(/\\D/g, '');\n    const encodedMessage = encodeURIComponent(message);\n    const whatsappUrl = `https://wa.me/${phoneNumber}?text=${encodedMessage}`;\n    \n    // Open WhatsApp with pre-filled message\n    window.open(whatsappUrl, '_blank');\n    \n    toast({\n      title: \"Opening WhatsApp\",\n      description: `Message prepared for ${mediator.name}`,\n    });\n  };\n\n  if (!isAuthenticated || isLoading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-background\">\n        <div className=\"animate-spin rounded-full h-32 w-32 border-b-2 border-primary\"></div>\n      </div>\n    );\n  }\n\n  // Calculate notification stats\n  const totalNotifications = notifications.length;\n  const unreadNotifications = notifications.filter((n) => n.isRead === 0).length;\n  const criticalNotifications = notifications.filter((n) => n.type === \"Critical\").length;\n  const todayNotifications = notifications.filter((n) => {\n    const today = new Date().toDateString();\n    return n.createdAt ? new Date(n.createdAt).toDateString() === today : false;\n  }).length;\n\n  // Filter notifications\n  const filteredNotifications = notifications.filter((notification: NotificationWithOrder) => {\n    const matchesType = !filters.type || filters.type === \"all\" || \n      (filters.type === \"unread\" && notification.isRead === 0) ||\n      (filters.type === \"critical\" && notification.type === \"Critical\") ||\n      (filters.type === \"today\" && notification.createdAt && new Date(notification.createdAt).toDateString() === new Date().toDateString()) ||\n      (filters.type !== \"unread\" && filters.type !== \"critical\" && filters.type !== \"today\" && notification.type === filters.type);\n      \n    const matchesSearch = !filters.search || \n      notification.title.toLowerCase().includes(filters.search.toLowerCase()) ||\n      notification.message.toLowerCase().includes(filters.search.toLowerCase());\n\n    return matchesType && matchesSearch;\n  });\n\n  const handleMarkRead = (notificationId: string) => {\n    markAsReadMutation.mutate(notificationId);\n  };\n\n  const handleMarkAllRead = () => {\n    markAllAsReadMutation.mutate();\n  };\n\n  const handleViewOrder = (orderId: string) => {\n    toast({\n      title: \"View Order\",\n      description: \"Redirecting to order details...\",\n    });\n    // Here you would typically navigate to the order detail page\n  };\n\n\n  return (\n    <MainLayout>\n      <header className=\"bg-card border-b border-border px-8 py-6\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h1 className=\"text-2xl font-semibold\" data-testid=\"text-page-title\">Notifications</h1>\n            <p className=\"text-muted-foreground\">Stay updated with order status and payment alerts</p>\n          </div>\n          <Button \n            variant=\"outline\"\n            onClick={handleMarkAllRead}\n            disabled={markAllAsReadMutation.isPending || unreadNotifications === 0}\n            data-testid=\"button-mark-all-read\"\n          >\n            {markAllAsReadMutation.isPending ? \"Marking...\" : \"Mark all as read\"}\n          </Button>\n        </div>\n      </header>\n\n      <div className=\"p-8\">\n        {/* Notification Stats */}\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8\">\n          <Card className=\"card-shadow\">\n            <CardContent className=\"p-6\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <p className=\"text-sm text-muted-foreground\">Total</p>\n                  <p className=\"text-2xl font-semibold\" data-testid=\"stats-total\">{totalNotifications}</p>\n                </div>\n                <div className=\"w-10 h-10 bg-blue-50 rounded-lg flex items-center justify-center\">\n                  <Bell className=\"w-5 h-5 text-blue-600\" />\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n          \n          <Card className=\"card-shadow\">\n            <CardContent className=\"p-6\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <p className=\"text-sm text-muted-foreground\">Unread</p>\n                  <p className=\"text-2xl font-semibold text-orange-600\" data-testid=\"stats-unread\">{unreadNotifications}</p>\n                </div>\n                <div className=\"w-10 h-10 bg-orange-50 rounded-lg flex items-center justify-center\">\n                  <Badge className=\"w-5 h-5 text-orange-600 bg-transparent border-none p-0\">●</Badge>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n          \n          <Card className=\"card-shadow\">\n            <CardContent className=\"p-6\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <p className=\"text-sm text-muted-foreground\">Critical</p>\n                  <p className=\"text-2xl font-semibold text-red-600\" data-testid=\"stats-critical\">{criticalNotifications}</p>\n                </div>\n                <div className=\"w-10 h-10 bg-red-50 rounded-lg flex items-center justify-center\">\n                  <AlertTriangle className=\"w-5 h-5 text-red-600\" />\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n          \n          <Card className=\"card-shadow\">\n            <CardContent className=\"p-6\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <p className=\"text-sm text-muted-foreground\">Today</p>\n                  <p className=\"text-2xl font-semibold text-green-600\" data-testid=\"stats-today\">{todayNotifications}</p>\n                </div>\n                <div className=\"w-10 h-10 bg-green-50 rounded-lg flex items-center justify-center\">\n                  <Calendar className=\"w-5 h-5 text-green-600\" />\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n\n        {/* Filters */}\n        <Card className=\"card-shadow mb-6\">\n          <CardContent className=\"p-6\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div>\n                <label className=\"block text-sm font-medium mb-2\">Filter by Type</label>\n                <Select value={filters.type} onValueChange={(value) => setFilters(prev => ({ ...prev, type: value }))}>\n                  <SelectTrigger data-testid=\"filter-type\">\n                    <SelectValue placeholder=\"All Types\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"all\">All Types</SelectItem>\n                    <SelectItem value=\"unread\">Unread</SelectItem>\n                    <SelectItem value=\"critical\">Critical</SelectItem>\n                    <SelectItem value=\"today\">Today</SelectItem>\n                    <SelectItem value=\"Critical\">Critical Alerts</SelectItem>\n                    <SelectItem value=\"Warning\">Warnings</SelectItem>\n                    <SelectItem value=\"Success\">Success</SelectItem>\n                    <SelectItem value=\"Info\">Information</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium mb-2\">Search</label>\n                <div className=\"relative\">\n                  <Input\n                    placeholder=\"Search notifications...\"\n                    value={filters.search}\n                    onChange={(e) => setFilters(prev => ({ ...prev, search: e.target.value }))}\n                    className=\"pl-10\"\n                    data-testid=\"input-search\"\n                  />\n                  <Search className=\"h-4 w-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground\" />\n                </div>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Notifications List */}\n        <Card className=\"card-shadow\">\n          <CardHeader>\n            <div className=\"flex items-center justify-between\">\n              <CardTitle>Notifications ({filteredNotifications.length})</CardTitle>\n            </div>\n          </CardHeader>\n          <CardContent className=\"p-0\">\n            {notificationsLoading ? (\n              <div className=\"divide-y divide-border\">\n                {[1, 2, 3, 4, 5].map((i) => (\n                  <div key={i} className=\"p-6 animate-pulse\">\n                    <div className=\"flex items-start space-x-4\">\n                      <div className=\"w-10 h-10 bg-muted rounded-lg\"></div>\n                      <div className=\"flex-1 space-y-2\">\n                        <div className=\"h-4 bg-muted rounded w-3/4\"></div>\n                        <div className=\"h-3 bg-muted rounded w-full\"></div>\n                        <div className=\"h-3 bg-muted rounded w-1/2\"></div>\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            ) : filteredNotifications.length === 0 ? (\n              <div className=\"text-center py-12\">\n                <Bell className=\"w-12 h-12 text-muted-foreground mx-auto mb-4\" />\n                <h3 className=\"text-lg font-semibold mb-2\">\n                  {notifications.length === 0 ? \"No notifications yet\" : \"No notifications found\"}\n                </h3>\n                <p className=\"text-muted-foreground\">\n                  {notifications.length === 0 \n                    ? \"You'll see notifications here when there are updates to your orders\"\n                    : \"Try adjusting your filters to see more notifications\"\n                  }\n                </p>\n              </div>\n            ) : (\n              <div className=\"divide-y divide-border\">\n                {filteredNotifications.map((notification: NotificationWithOrder) => (\n                  <NotificationItem\n                    key={notification.id}\n                    notification={notification}\n                    onMarkRead={handleMarkRead}\n                    onViewOrder={handleViewOrder}\n                    onMessageMediator={handleMessageMediator}\n                  />\n                ))}\n              </div>\n            )}\n          </CardContent>\n        </Card>\n      </div>\n    </MainLayout>\n  );\n}\n","size_bytes":15410},"client/src/pages/orders.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport MainLayout from \"@/components/layout/main-layout\";\nimport { OrdersTable } from \"@/components/orders/orders-table\";\nimport { OrderForm } from \"@/components/orders/order-form\";\nimport { Button } from \"@/components/ui/button\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Plus, ArrowLeft } from \"lucide-react\";\n\nexport default function Orders() {\n  const { toast } = useToast();\n  const { isAuthenticated, isLoading } = useAuth();\n  const [showOrderForm, setShowOrderForm] = useState(false);\n  const [editingOrder, setEditingOrder] = useState<any>(null);\n\n  // Redirect to home if not authenticated\n  useEffect(() => {\n    if (!isLoading && !isAuthenticated) {\n      toast({\n        title: \"Unauthorized\",\n        description: \"You are logged out. Logging in again...\",\n        variant: \"destructive\",\n      });\n      setTimeout(() => {\n        window.location.href = \"/api/login\";\n      }, 500);\n      return;\n    }\n  }, [isAuthenticated, isLoading, toast]);\n\n  const { data: orders = [], isLoading: ordersLoading } = useQuery({\n    queryKey: [\"/api/orders\"],\n    enabled: isAuthenticated,\n  });\n\n  const { data: mediators = [] } = useQuery({\n    queryKey: [\"/api/mediators\"],\n    enabled: isAuthenticated,\n  });\n\n  if (isLoading || !isAuthenticated) {\n    return (\n      <div className=\"min-h-screen bg-background flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-32 w-32 border-b-2 border-primary mx-auto mb-4\"></div>\n          <p className=\"text-muted-foreground\">Loading...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (showOrderForm || editingOrder) {\n    return (\n      <MainLayout>\n        <header className=\"bg-card border-b border-border px-4 lg:px-8 py-4 lg:py-6\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex-1 min-w-0\">\n              <h1 className=\"text-xl lg:text-2xl font-semibold truncate\" data-testid=\"page-title\">\n                {editingOrder ? 'Edit Order' : 'Create New Order'}\n              </h1>\n              <p className=\"text-sm text-muted-foreground hidden sm:block\">\n                {editingOrder ? 'Update your review order details' : 'Add a new review order to your system'}\n              </p>\n            </div>\n            <Button \n              variant=\"outline\"\n              size=\"sm\"\n              onClick={() => {\n                setShowOrderForm(false);\n                setEditingOrder(null);\n              }}\n              data-testid=\"button-back-to-orders\"\n              className=\"ml-2\"\n            >\n              <ArrowLeft className=\"w-4 h-4 lg:mr-2\" />\n              <span className=\"hidden lg:inline\">Back</span>\n            </Button>\n          </div>\n        </header>\n\n        <div className=\"p-4 lg:p-8\">\n          <OrderForm \n            order={editingOrder}\n            onSuccess={() => {\n              setShowOrderForm(false);\n              setEditingOrder(null);\n            }}\n            onCancel={() => {\n              setShowOrderForm(false);\n              setEditingOrder(null);\n            }}\n          />\n        </div>\n      </MainLayout>\n    );\n  }\n\n  return (\n    <MainLayout>\n      <header className=\"bg-card border-b border-border px-4 lg:px-8 py-4 lg:py-6\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex-1 min-w-0\">\n            <h1 className=\"text-xl lg:text-2xl font-semibold\" data-testid=\"page-title\">Orders Management</h1>\n            <p className=\"text-sm text-muted-foreground hidden sm:block\">Track and manage all your review orders</p>\n          </div>\n          <Button \n            onClick={() => setShowOrderForm(true)}\n            data-testid=\"button-new-order\"\n            size=\"sm\"\n            className=\"ml-2\"\n          >\n            <Plus className=\"w-4 h-4 lg:mr-2\" />\n            <span className=\"hidden lg:inline\">New Order</span>\n          </Button>\n        </div>\n      </header>\n\n      <div className=\"p-4 lg:p-8\">\n        <OrdersTable \n          orders={orders as any[]}\n          mediators={mediators as any[]}\n          isLoading={ordersLoading}\n          onNewOrder={() => setShowOrderForm(true)}\n          onEditOrder={(order) => setEditingOrder(order)}\n        />\n      </div>\n    </MainLayout>\n  );\n}\n","size_bytes":4424},"client/src/pages/settings.tsx":{"content":"import { useState, useEffect, useCallback } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { useMutation, useQuery, useQueryClient } from \"@tanstack/react-query\";\nimport { z } from \"zod\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { isUnauthorizedError } from \"@/lib/authUtils\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport MainLayout from \"@/components/layout/main-layout\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { Download, Upload, FileText, Bell, User, Database, Settings as SettingsIcon, Calendar, MessageSquare } from \"lucide-react\";\nimport { CalendarConnectButton } from \"@/components/calendar/calendar-connect-button\";\n\nconst profileFormSchema = z.object({\n  firstName: z.string().min(1, \"First name is required\"),\n  lastName: z.string().min(1, \"Last name is required\"),\n  email: z.string().email(\"Please enter a valid email\"),\n  phone: z.string().min(10, \"Please enter a valid phone number\"),\n  timezone: z.string().min(1, \"Please select a timezone\"),\n  language: z.string().min(1, \"Please select a language\"),\n});\n\nconst passwordFormSchema = z.object({\n  currentPassword: z.string().min(1, \"Current password is required\"),\n  newPassword: z.string().min(6, \"Password must be at least 6 characters\"),\n  confirmPassword: z.string().min(6, \"Please confirm your password\"),\n}).refine((data) => data.newPassword === data.confirmPassword, {\n  message: \"Passwords don't match\",\n  path: [\"confirmPassword\"],\n});\n\ntype ProfileFormData = z.infer<typeof profileFormSchema>;\ntype PasswordFormData = z.infer<typeof passwordFormSchema>;\n\nexport default function Settings() {\n  const { toast } = useToast();\n  const { user, isAuthenticated, isLoading } = useAuth();\n  const queryClient = useQueryClient();\n  const [notificationSettings, setNotificationSettings] = useState({\n    emailNotifications: true,\n    pushNotifications: true,\n    smsNotifications: false,\n    orderDelivered: true,\n    refundFormDue: true,\n    paymentReceived: true,\n    orderDelayed: true,\n    weeklyReports: true,\n  });\n\n  // Load user settings from backend\n  const { data: userSettings, isLoading: settingsLoading } = useQuery({\n    queryKey: [\"/api/user-settings\"],\n    enabled: !!isAuthenticated,\n  });\n\n  const [calendarSettings, setCalendarSettings] = useState({\n    enabled: false,\n    calendarId: \"\",\n    createOrderEvents: true,\n    createDeliveryEvents: true,\n    createRefundReminders: true,\n  });\n\n  const [messagingSettings, setMessagingSettings] = useState({\n    enabled: false,\n    selectedTemplate: \"default\",\n  });\n\n  // Update local state when settings are loaded\n  useEffect(() => {\n    if (userSettings && typeof userSettings === 'object') {\n      setCalendarSettings(prev => ({\n        ...prev,\n        enabled: (userSettings as any).calendarEnabled === 1,\n        calendarId: (userSettings as any).calendarId || \"\",\n      }));\n      setMessagingSettings(prev => ({\n        ...prev,\n        enabled: (userSettings as any).messagingEnabled === 1,\n      }));\n    }\n  }, [userSettings]);\n\n  const messageTemplates = {\n    default: {\n      orderConfirmation: \"Hi {mediatorName}, Order #{orderId} has been placed for {productName} on {platform}. Amount: {orderAmount}\",\n      deliveryReminder: \"Hi {mediatorName}, Please check delivery status for Order #{orderId}. Expected delivery: {deliveryDate}\",\n      refundFormReminder: \"Hi {mediatorName}, Refund form needs to be submitted for Order #{orderId} by {refundFormDate}\",\n      paymentRequest: \"Hi {mediatorName}, Please process payment for Order #{orderId}. Refund amount: {refundAmount}\",\n    },\n    friendly: {\n      orderConfirmation: \"Hello {mediatorName}! 😊 New order #{orderId} is ready - {productName} from {platform}. Total: {orderAmount}\",\n      deliveryReminder: \"Hey {mediatorName}! 📦 Could you please check on order #{orderId}? Expected delivery: {deliveryDate}\",\n      refundFormReminder: \"Hi {mediatorName}! ⏰ Don't forget the refund form for order #{orderId} - due by {refundFormDate}\",\n      paymentRequest: \"Hello {mediatorName}! 💰 Ready to process payment for order #{orderId}? Amount: {refundAmount}\",\n    },\n    professional: {\n      orderConfirmation: \"Dear {mediatorName}, Order #{orderId} has been successfully placed. Product: {productName}, Platform: {platform}, Amount: {orderAmount}\",\n      deliveryReminder: \"Dear {mediatorName}, This is a reminder to verify delivery status for Order #{orderId}. Scheduled delivery: {deliveryDate}\",\n      refundFormReminder: \"Dear {mediatorName}, Please ensure refund form submission for Order #{orderId} before {refundFormDate}\",\n      paymentRequest: \"Dear {mediatorName}, Please proceed with payment processing for Order #{orderId}. Amount due: {refundAmount}\",\n    },\n  };\n\n  // Redirect if not authenticated\n  useEffect(() => {\n    if (!isLoading && !isAuthenticated) {\n      toast({\n        title: \"Unauthorized\",\n        description: \"You are logged out. Logging in again...\",\n        variant: \"destructive\",\n      });\n      setTimeout(() => {\n        window.location.href = \"/api/login\";\n      }, 500);\n      return;\n    }\n  }, [isAuthenticated, isLoading, toast]);\n\n  const profileForm = useForm<ProfileFormData>({\n    resolver: zodResolver(profileFormSchema),\n    defaultValues: {\n      firstName: user?.firstName || \"\",\n      lastName: user?.lastName || \"\",\n      email: user?.email || \"\",\n      phone: \"\",\n      timezone: \"Asia/Kolkata\",\n      language: \"English\",\n    },\n  });\n\n  const passwordForm = useForm<PasswordFormData>({\n    resolver: zodResolver(passwordFormSchema),\n    defaultValues: {\n      currentPassword: \"\",\n      newPassword: \"\",\n      confirmPassword: \"\",\n    },\n  });\n\n  // Update form when user data is loaded\n  useEffect(() => {\n    if (user) {\n      profileForm.reset({\n        firstName: user.firstName || \"\",\n        lastName: user.lastName || \"\",\n        email: user.email || \"\",\n        phone: \"\",\n        timezone: \"Asia/Kolkata\",\n        language: \"English\",\n      });\n    }\n  }, [user, profileForm]);\n\n  const updateProfileMutation = useMutation({\n    mutationFn: async (data: ProfileFormData) => {\n      // Note: This would typically update user profile via API\n      // For now, we'll just show a success message\n      return Promise.resolve();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/auth/user\"] });\n      toast({\n        title: \"Success\",\n        description: \"Profile updated successfully\",\n      });\n    },\n    onError: (error: Error) => {\n      if (isUnauthorizedError(error)) {\n        toast({\n          title: \"Unauthorized\",\n          description: \"You are logged out. Logging in again...\",\n          variant: \"destructive\",\n        });\n        setTimeout(() => {\n          window.location.href = \"/api/login\";\n        }, 500);\n        return;\n      }\n      toast({\n        title: \"Error\",\n        description: \"Failed to update profile\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const updatePasswordMutation = useMutation({\n    mutationFn: async (data: PasswordFormData) => {\n      // Note: This would typically update password via API\n      return Promise.resolve();\n    },\n    onSuccess: () => {\n      passwordForm.reset();\n      toast({\n        title: \"Success\",\n        description: \"Password updated successfully\",\n      });\n    },\n    onError: (error: Error) => {\n      if (isUnauthorizedError(error)) {\n        toast({\n          title: \"Unauthorized\",\n          description: \"You are logged out. Logging in again...\",\n          variant: \"destructive\",\n        });\n        setTimeout(() => {\n          window.location.href = \"/api/login\";\n        }, 500);\n        return;\n      }\n      toast({\n        title: \"Error\",\n        description: \"Failed to update password\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  // Calendar settings mutation\n  const updateCalendarMutation = useMutation({\n    mutationFn: async (settings: any) => {\n      const response = await apiRequest('PUT', '/api/user-settings', {\n        calendarEnabled: settings.enabled ? 1 : 0,\n        calendarApiKey: settings.calendarId || null,\n        calendarId: settings.calendarId || null,\n      });\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/user-settings\"] });\n      toast({\n        title: \"Success\",\n        description: \"Calendar settings updated successfully\",\n      });\n    },\n    onError: (error: Error) => {\n      if (isUnauthorizedError(error)) {\n        toast({\n          title: \"Unauthorized\", \n          description: \"You are logged out. Logging in again...\",\n          variant: \"destructive\",\n        });\n        setTimeout(() => {\n          window.location.href = \"/api/login\";\n        }, 500);\n        return;\n      }\n      toast({\n        title: \"Error\",\n        description: \"Failed to update calendar settings\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  // Messaging settings mutation  \n  const updateMessagingMutation = useMutation({\n    mutationFn: async (settings: any) => {\n      const response = await apiRequest('PUT', '/api/user-settings', {\n        messagingEnabled: settings.enabled ? 1 : 0,\n        messageTemplates: JSON.stringify({ selectedTemplate: settings.selectedTemplate }),\n      });\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/user-settings\"] });\n      toast({\n        title: \"Success\", \n        description: \"Messaging settings updated successfully\",\n      });\n    },\n    onError: (error: Error) => {\n      if (isUnauthorizedError(error)) {\n        toast({\n          title: \"Unauthorized\",\n          description: \"You are logged out. Logging in again...\",\n          variant: \"destructive\",\n        });\n        setTimeout(() => {\n          window.location.href = \"/api/login\";\n        }, 500);\n        return;\n      }\n      toast({\n        title: \"Error\",\n        description: \"Failed to update messaging settings\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  // Debounced calendar ID save (after mutations are declared)\n  const [calendarIdTimer, setCalendarIdTimer] = useState<NodeJS.Timeout | null>(null);\n  \n  const saveCalendarId = useCallback((calendarId: string) => {\n    if (calendarIdTimer) {\n      clearTimeout(calendarIdTimer);\n    }\n    \n    const timer = setTimeout(() => {\n      updateCalendarMutation.mutate({ ...calendarSettings, calendarId });\n    }, 1000); // 1 second delay\n    \n    setCalendarIdTimer(timer);\n  }, [calendarSettings, updateCalendarMutation, calendarIdTimer]);\n\n  // Cleanup timer on unmount\n  useEffect(() => {\n    return () => {\n      if (calendarIdTimer) {\n        clearTimeout(calendarIdTimer);\n      }\n    };\n  }, [calendarIdTimer]);\n\n  if (!isAuthenticated || isLoading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-background\">\n        <div className=\"animate-spin rounded-full h-32 w-32 border-b-2 border-primary\"></div>\n      </div>\n    );\n  }\n\n  const onProfileSubmit = (data: ProfileFormData) => {\n    updateProfileMutation.mutate(data);\n  };\n\n  const onPasswordSubmit = (data: PasswordFormData) => {\n    updatePasswordMutation.mutate(data);\n  };\n\n  const handleExport = async (type: string) => {\n    try {\n      toast({\n        title: \"Export Started\", \n        description: `Preparing ${type} export...`,\n      });\n      \n      const response = await fetch(`/api/export/${type}`, {\n        method: 'GET',\n        credentials: 'include',\n      });\n      \n      if (!response.ok) {\n        throw new Error(`Export failed: ${response.statusText}`);\n      }\n      \n      const blob = await response.blob();\n      const url = window.URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.style.display = 'none';\n      a.href = url;\n      \n      // Add timestamp to filename\n      const now = new Date();\n      const timestamp = now.toISOString().slice(0, 10); // YYYY-MM-DD format\n      a.download = `${type}_export_${timestamp}.csv`;\n      \n      document.body.appendChild(a);\n      a.click();\n      window.URL.revokeObjectURL(url);\n      document.body.removeChild(a);\n      \n      toast({\n        title: \"Export Complete\",\n        description: `${type} data exported successfully`,\n      });\n    } catch (error) {\n      console.error('Export error:', error);\n      toast({\n        title: \"Export Failed\",\n        description: `Failed to export ${type} data`,\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const handleImport = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (!file) return;\n    \n    if (!file.name.endsWith('.csv')) {\n      toast({\n        title: \"Invalid File\",\n        description: \"Please select a CSV file\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n    \n    toast({\n      title: \"Processing Import\",\n      description: \"Reading and validating CSV file...\",\n    });\n    \n    const reader = new FileReader();\n    reader.onload = async (e) => {\n      try {\n        const text = e.target?.result as string;\n        const lines = text.split('\\n').filter(line => line.trim());\n        \n        if (lines.length < 2) {\n          toast({\n            title: \"Invalid File\",\n            description: \"CSV file must contain headers and at least one data row\",\n            variant: \"destructive\",\n          });\n          return;\n        }\n        \n        const headers = lines[0];\n        const dataRows = lines.slice(1);\n        \n        // Better CSV parsing that handles quoted values properly\n        const parseCsvRow = (row: string): string[] => {\n          const result = [];\n          let current = '';\n          let inQuotes = false;\n          \n          for (let i = 0; i < row.length; i++) {\n            const char = row[i];\n            const nextChar = row[i + 1];\n            \n            if (char === '\"') {\n              if (inQuotes && nextChar === '\"') {\n                current += '\"';\n                i++; // Skip next quote\n              } else {\n                inQuotes = !inQuotes;\n              }\n            } else if (char === ',' && !inQuotes) {\n              result.push(current.trim());\n              current = '';\n            } else {\n              current += char;\n            }\n          }\n          result.push(current.trim());\n          return result;\n        };\n        \n        const csvData = dataRows.map(parseCsvRow).filter(row => row.some(cell => cell.length > 0));\n        \n        if (csvData.length === 0) {\n          toast({\n            title: \"No Data Found\",\n            description: \"CSV file contains no valid data rows\",\n            variant: \"destructive\",\n          });\n          return;\n        }\n        \n        const res = await apiRequest('POST', '/api/import/orders', { csvData });\n        const response = await res.json();\n        \n        console.log('Import response:', response);\n        \n        // Ensure response has expected structure\n        if (!response || typeof response !== 'object') {\n          console.error('Invalid response structure:', response);\n          toast({\n            title: \"❌ Import Failed\",\n            description: \"Invalid response from server\",\n            variant: \"destructive\",\n          });\n          return;\n        }\n        \n        // Display results in UI\n        const statusDiv = document.getElementById('import-status');\n        const resultsDiv = document.getElementById('import-results');\n        \n        // Check if response indicates success\n        const isSuccess = response.success === true && (response.imported || 0) > 0;\n        const importedCount = response.imported || 0;\n        const errorCount = response.errors || 0;\n        \n        if (statusDiv && resultsDiv) {\n          statusDiv.className = isSuccess\n            ? 'bg-green-50 border border-green-200 rounded-lg p-4 mb-4'\n            : 'bg-red-50 border border-red-200 rounded-lg p-4 mb-4';\n          \n          const titleColor = isSuccess ? 'text-green-800' : 'text-red-800';\n          const textColor = isSuccess ? 'text-green-700' : 'text-red-700';\n          \n          let resultHTML = `<h5 class=\"font-medium ${titleColor} mb-2\">Import Results</h5>`;\n          resultHTML += `<div class=\"text-sm ${textColor} space-y-1\">`;\n          \n          if (response.success === true) {\n            if (importedCount > 0) {\n              resultHTML += `<p><strong>✅ Success:</strong> ${importedCount} orders imported successfully</p>`;\n              \n              if (errorCount > 0) {\n                resultHTML += `<p><strong>⚠️ Errors:</strong> ${errorCount} rows failed to import</p>`;\n                if (response.errorDetails && response.errorDetails.length > 0) {\n                  resultHTML += `<details class=\"mt-2\"><summary class=\"cursor-pointer font-medium\">View Failed Rows</summary>`;\n                  resultHTML += `<ul class=\"mt-2 ml-4 space-y-1\">`;\n                  response.errorDetails.forEach((error: any) => {\n                    resultHTML += `<li>• <strong>Row ${error.row}:</strong> ${error.error}</li>`;\n                  });\n                  resultHTML += `</ul></details>`;\n                }\n              }\n              \n              toast({\n                title: \"✅ Import Successful!\",\n                description: `Successfully imported ${importedCount} orders${errorCount > 0 ? `. ${errorCount} rows had errors.` : '.'}`,\n              });\n            } else {\n              resultHTML += `<p><strong>❌ No orders imported</strong></p>`;\n              if (response.errorDetails && response.errorDetails.length > 0) {\n                resultHTML += `<p>Errors found in ${errorCount} rows:</p>`;\n                resultHTML += `<ul class=\"mt-2 ml-4 space-y-1\">`;\n                response.errorDetails.forEach((error: any) => {\n                  resultHTML += `<li>• <strong>Row ${error.row}:</strong> ${error.error}</li>`;\n                });\n                resultHTML += `</ul>`;\n              }\n              \n              toast({\n                title: \"❌ Import Failed\",\n                description: `No orders were imported. ${errorCount} errors found.`,\n                variant: \"destructive\",\n              });\n            }\n          } else {\n            resultHTML += `<p><strong>❌ Import failed:</strong> ${response.message || \"Server error occurred\"}</p>`;\n            \n            toast({\n              title: \"❌ Import Failed\",\n              description: response.message || \"Server error occurred\",\n              variant: \"destructive\",\n            });\n          }\n          \n          resultHTML += `</div>`;\n          resultsDiv.innerHTML = resultHTML;\n          statusDiv.classList.remove('hidden');\n        }\n        \n        // Also log to console for debugging\n        if (response.success && response.imported > 0) {\n          console.group('✅ Import Results:');\n          console.log(`Successfully imported: ${response.imported} orders`);\n          if (response.errors > 0) {\n            console.log(`Failed rows: ${response.errors}`);\n            console.log('Error details:', response.errorDetails);\n          }\n          console.groupEnd();\n        } else {\n          console.group('❌ Import Failed:');\n          console.log('Response:', response);\n          if (response.errorDetails) {\n            console.log('Error details:', response.errorDetails);\n          }\n          console.groupEnd();\n        }\n        \n        // Clear the file input\n        event.target.value = '';\n        \n      } catch (error) {\n        console.error('Import error:', error);\n        toast({\n          title: \"Import Failed\", \n          description: \"Failed to process CSV file. Please check the format.\",\n          variant: \"destructive\",\n        });\n      }\n    };\n    \n    reader.readAsText(file);\n  };\n\n  const downloadTemplate = () => {\n    const link = document.createElement('a');\n    link.href = '/order-import-template.csv';\n    link.download = 'order-import-template.csv';\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n    \n    toast({\n      title: \"Template Downloaded\",\n      description: \"Order import template downloaded successfully\",\n    });\n  };\n\n  return (\n    <MainLayout>\n      <header className=\"bg-card border-b border-border px-8 py-6\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h1 className=\"text-2xl font-semibold\" data-testid=\"text-page-title\">Settings</h1>\n            <p className=\"text-muted-foreground\">Manage your account preferences and security</p>\n          </div>\n        </div>\n      </header>\n\n      <div className=\"p-8\">\n        <div className=\"max-w-4xl space-y-8\">\n          {/* Profile Settings */}\n          <Card className=\"card-shadow border-l-4 border-l-blue-500\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center text-lg\">\n                <User className=\"w-5 h-5 mr-2 text-blue-500\" />\n                Profile Information\n              </CardTitle>\n              <p className=\"text-sm text-muted-foreground\">Manage your personal information and preferences</p>\n            </CardHeader>\n            <CardContent>\n              <Form {...profileForm}>\n                <form onSubmit={profileForm.handleSubmit(onProfileSubmit)} className=\"space-y-4\">\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    <FormField\n                      control={profileForm.control}\n                      name=\"firstName\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>First Name</FormLabel>\n                          <FormControl>\n                            <Input \n                              placeholder=\"Enter first name\" \n                              {...field} \n                              data-testid=\"input-first-name\"\n                            />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <FormField\n                      control={profileForm.control}\n                      name=\"lastName\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Last Name</FormLabel>\n                          <FormControl>\n                            <Input \n                              placeholder=\"Enter last name\" \n                              {...field} \n                              data-testid=\"input-last-name\"\n                            />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <FormField\n                      control={profileForm.control}\n                      name=\"email\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Email</FormLabel>\n                          <FormControl>\n                            <Input \n                              type=\"email\" \n                              placeholder=\"Enter email\" \n                              {...field} \n                              data-testid=\"input-email\"\n                            />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <FormField\n                      control={profileForm.control}\n                      name=\"phone\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Phone</FormLabel>\n                          <FormControl>\n                            <Input \n                              type=\"tel\" \n                              placeholder=\"+91 9876543210\" \n                              {...field} \n                              data-testid=\"input-phone\"\n                            />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <FormField\n                      control={profileForm.control}\n                      name=\"timezone\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Timezone</FormLabel>\n                          <Select onValueChange={field.onChange} defaultValue={field.value}>\n                            <FormControl>\n                              <SelectTrigger data-testid=\"select-timezone\">\n                                <SelectValue placeholder=\"Select timezone\" />\n                              </SelectTrigger>\n                            </FormControl>\n                            <SelectContent>\n                              <SelectItem value=\"Asia/Kolkata\">Asia/Kolkata (GMT+5:30)</SelectItem>\n                              <SelectItem value=\"Asia/Mumbai\">Asia/Mumbai (GMT+5:30)</SelectItem>\n                            </SelectContent>\n                          </Select>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <FormField\n                      control={profileForm.control}\n                      name=\"language\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Language</FormLabel>\n                          <Select onValueChange={field.onChange} defaultValue={field.value}>\n                            <FormControl>\n                              <SelectTrigger data-testid=\"select-language\">\n                                <SelectValue placeholder=\"Select language\" />\n                              </SelectTrigger>\n                            </FormControl>\n                            <SelectContent>\n                              <SelectItem value=\"English\">English</SelectItem>\n                              <SelectItem value=\"Hindi\">Hindi</SelectItem>\n                            </SelectContent>\n                          </Select>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n                  </div>\n\n                  <div className=\"flex justify-end mt-6\">\n                    <Button \n                      type=\"submit\" \n                      disabled={updateProfileMutation.isPending}\n                      data-testid=\"button-save-profile\"\n                    >\n                      {updateProfileMutation.isPending ? \"Saving...\" : \"Save Changes\"}\n                    </Button>\n                  </div>\n                </form>\n              </Form>\n            </CardContent>\n          </Card>\n\n          {/* Security Settings */}\n          <Card className=\"card-shadow border-l-4 border-l-orange-500\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center text-lg\">\n                <SettingsIcon className=\"w-5 h-5 mr-2 text-orange-500\" />\n                Password Security\n              </CardTitle>\n              <p className=\"text-sm text-muted-foreground\">Update your password to keep your account secure</p>\n            </CardHeader>\n            <CardContent>\n              <Form {...passwordForm}>\n                <form onSubmit={passwordForm.handleSubmit(onPasswordSubmit)} className=\"space-y-4\">\n                  <FormField\n                    control={passwordForm.control}\n                    name=\"currentPassword\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Current Password</FormLabel>\n                        <FormControl>\n                          <Input \n                            type=\"password\" \n                            placeholder=\"Enter current password\" \n                            {...field} \n                            data-testid=\"input-current-password\"\n                          />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    <FormField\n                      control={passwordForm.control}\n                      name=\"newPassword\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>New Password</FormLabel>\n                          <FormControl>\n                            <Input \n                              type=\"password\" \n                              placeholder=\"Enter new password\" \n                              {...field} \n                              data-testid=\"input-new-password\"\n                            />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <FormField\n                      control={passwordForm.control}\n                      name=\"confirmPassword\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Confirm Password</FormLabel>\n                          <FormControl>\n                            <Input \n                              type=\"password\" \n                              placeholder=\"Confirm new password\" \n                              {...field} \n                              data-testid=\"input-confirm-password\"\n                            />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n                  </div>\n\n                  <div className=\"flex justify-end mt-6\">\n                    <Button \n                      type=\"submit\" \n                      disabled={updatePasswordMutation.isPending}\n                      data-testid=\"button-update-password\"\n                    >\n                      {updatePasswordMutation.isPending ? \"Updating...\" : \"Update Password\"}\n                    </Button>\n                  </div>\n                </form>\n              </Form>\n            </CardContent>\n          </Card>\n\n          {/* Notification Preferences */}\n          <Card className=\"card-shadow border-l-4 border-l-green-500\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center text-lg\">\n                <Bell className=\"w-5 h-5 mr-2 text-green-500\" />\n                Notification Preferences\n              </CardTitle>\n              <p className=\"text-sm text-muted-foreground\">Control how and when you receive notifications</p>\n            </CardHeader>\n            <CardContent>\n              <div className=\"space-y-4\">\n                {Object.entries(notificationSettings).map(([key, value]) => (\n                  <div key={key} className=\"flex items-center justify-between\">\n                    <div>\n                      <h4 className=\"font-medium\">\n                        {key.replace(/([A-Z])/g, ' $1').replace(/^./, str => str.toUpperCase())}\n                      </h4>\n                      <p className=\"text-sm text-muted-foreground\">\n                        {key === 'emailNotifications' && 'Receive order updates via email'}\n                        {key === 'pushNotifications' && 'Receive browser notifications'}\n                        {key === 'smsNotifications' && 'Receive SMS notifications'}\n                        {key === 'orderDelivered' && 'Get notified when orders are delivered'}\n                        {key === 'refundFormDue' && 'Get reminders for refund form submissions'}\n                        {key === 'paymentReceived' && 'Get notified when payments are received'}\n                        {key === 'orderDelayed' && 'Get notified about delayed orders'}\n                        {key === 'weeklyReports' && 'Receive weekly summary reports'}\n                      </p>\n                    </div>\n                    <Switch\n                      checked={value}\n                      onCheckedChange={(checked) => \n                        setNotificationSettings(prev => ({ ...prev, [key]: checked }))\n                      }\n                      data-testid={`switch-${key}`}\n                    />\n                  </div>\n                ))}\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* Application Preferences */}\n          <Card className=\"card-shadow border-l-4 border-l-purple-500\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center text-lg\">\n                <Database className=\"w-5 h-5 mr-2 text-purple-500\" />\n                Application Preferences\n              </CardTitle>\n              <p className=\"text-sm text-muted-foreground\">Customize your application experience</p>\n            </CardHeader>\n            <CardContent>\n              <div className=\"space-y-6\">\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                  <div>\n                    <h4 className=\"font-medium mb-2\">Default Currency</h4>\n                    <Select defaultValue=\"INR\">\n                      <SelectTrigger data-testid=\"select-currency\">\n                        <SelectValue placeholder=\"Select currency\" />\n                      </SelectTrigger>\n                      <SelectContent>\n                        <SelectItem value=\"INR\">Indian Rupee (₹)</SelectItem>\n                        <SelectItem value=\"USD\">US Dollar ($)</SelectItem>\n                      </SelectContent>\n                    </Select>\n                  </div>\n                  \n                  <div>\n                    <h4 className=\"font-medium mb-2\">Date Format</h4>\n                    <Select defaultValue=\"dd/mm/yyyy\">\n                      <SelectTrigger data-testid=\"select-date-format\">\n                        <SelectValue placeholder=\"Select date format\" />\n                      </SelectTrigger>\n                      <SelectContent>\n                        <SelectItem value=\"dd/mm/yyyy\">DD/MM/YYYY</SelectItem>\n                        <SelectItem value=\"mm/dd/yyyy\">MM/DD/YYYY</SelectItem>\n                        <SelectItem value=\"yyyy-mm-dd\">YYYY-MM-DD</SelectItem>\n                      </SelectContent>\n                    </Select>\n                  </div>\n                </div>\n                \n                <div className=\"space-y-3\">\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <h4 className=\"font-medium\">Auto-refresh Data</h4>\n                      <p className=\"text-sm text-muted-foreground\">Automatically refresh dashboard data every 30 seconds</p>\n                    </div>\n                    <Switch defaultChecked data-testid=\"switch-auto-refresh\" />\n                  </div>\n                  \n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <h4 className=\"font-medium\">Compact View</h4>\n                      <p className=\"text-sm text-muted-foreground\">Show more data in less space</p>\n                    </div>\n                    <Switch data-testid=\"switch-compact-view\" />\n                  </div>\n                  \n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <h4 className=\"font-medium\">Confirmation Dialogs</h4>\n                      <p className=\"text-sm text-muted-foreground\">Show confirmation dialogs for important actions</p>\n                    </div>\n                    <Switch defaultChecked data-testid=\"switch-confirmation-dialogs\" />\n                  </div>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* Data Export & Import */}\n          {/* Calendar Integration */}\n          <Card className=\"card-shadow border-l-4 border-l-purple-500\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center text-lg\">\n                <Calendar className=\"w-5 h-5 mr-2 text-purple-500\" />\n                Calendar Integration\n              </CardTitle>\n              <p className=\"text-sm text-muted-foreground\">Automatically sync order events with Google Calendar</p>\n            </CardHeader>\n            <CardContent>\n              <div className=\"space-y-6\">\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <h4 className=\"font-medium\">Enable Calendar Integration</h4>\n                    <p className=\"text-sm text-muted-foreground\">Automatically create calendar events for order milestones</p>\n                  </div>\n                  <Switch\n                    checked={calendarSettings.enabled}\n                    onCheckedChange={(checked) => {\n                      setCalendarSettings(prev => ({ ...prev, enabled: checked }));\n                      updateCalendarMutation.mutate({ ...calendarSettings, enabled: checked });\n                    }}\n                    disabled={updateCalendarMutation.isPending}\n                    data-testid=\"switch-calendar-enabled\"\n                  />\n                </div>\n\n                {calendarSettings.enabled && (\n                  <div className=\"space-y-4 pl-4 border-l-2 border-purple-100\">\n                    <div>\n                      <label className=\"text-sm font-medium\">Google Calendar Integration</label>\n                      <div className=\"mt-1 p-4 bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-950 dark:to-purple-950 rounded-lg border border-blue-200 dark:border-blue-800\">\n                        <h4 className=\"font-medium text-sm mb-2\">📅 Complete Order Timeline</h4>\n                        <p className=\"text-xs text-muted-foreground mb-3\">\n                          Click \"Add to Calendar\" on any order to create automatic reminders for every step of the process!\n                        </p>\n                        <div className=\"grid grid-cols-2 gap-2\">\n                          <div className=\"flex items-start gap-2\">\n                            <span className=\"text-base\">📦</span>\n                            <div>\n                              <p className=\"text-xs font-medium\">Delivery Day</p>\n                              <p className=\"text-xs text-muted-foreground\">Product arrival alert</p>\n                            </div>\n                          </div>\n                          <div className=\"flex items-start gap-2\">\n                            <span className=\"text-base\">⭐</span>\n                            <div>\n                              <p className=\"text-xs font-medium\">Review (Day +2)</p>\n                              <p className=\"text-xs text-muted-foreground\">Complete rating & review</p>\n                            </div>\n                          </div>\n                          <div className=\"flex items-start gap-2\">\n                            <span className=\"text-base\">💰</span>\n                            <div>\n                              <p className=\"text-xs font-medium\">Refund Form (Day +7)</p>\n                              <p className=\"text-xs text-muted-foreground\">Submit refund form</p>\n                            </div>\n                          </div>\n                          <div className=\"flex items-start gap-2\">\n                            <span className=\"text-base\">💸</span>\n                            <div>\n                              <p className=\"text-xs font-medium\">Payment (Day +20)</p>\n                              <p className=\"text-xs text-muted-foreground\">Contact mediator</p>\n                            </div>\n                          </div>\n                        </div>\n                        <p className=\"text-xs text-green-600 dark:text-green-400 mt-3 font-medium\">\n                          ✅ No setup required - works instantly with your Google account!\n                        </p>\n                      </div>\n                    </div>\n\n                    <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                      <div className=\"flex items-center justify-between\">\n                        <div>\n                          <h5 className=\"font-medium text-sm\">Order Events</h5>\n                          <p className=\"text-xs text-muted-foreground\">Create events when orders are placed</p>\n                        </div>\n                        <Switch\n                          checked={calendarSettings.createOrderEvents}\n                          onCheckedChange={(checked) => \n                            setCalendarSettings(prev => ({ ...prev, createOrderEvents: checked }))\n                          }\n                          data-testid=\"switch-order-events\"\n                        />\n                      </div>\n\n                      <div className=\"flex items-center justify-between\">\n                        <div>\n                          <h5 className=\"font-medium text-sm\">Delivery Reminders</h5>\n                          <p className=\"text-xs text-muted-foreground\">Remind about expected delivery dates</p>\n                        </div>\n                        <Switch\n                          checked={calendarSettings.createDeliveryEvents}\n                          onCheckedChange={(checked) => \n                            setCalendarSettings(prev => ({ ...prev, createDeliveryEvents: checked }))\n                          }\n                          data-testid=\"switch-delivery-events\"\n                        />\n                      </div>\n\n                      <div className=\"flex items-center justify-between\">\n                        <div>\n                          <h5 className=\"font-medium text-sm\">Refund Reminders</h5>\n                          <p className=\"text-xs text-muted-foreground\">Remind about refund form deadlines</p>\n                        </div>\n                        <Switch\n                          checked={calendarSettings.createRefundReminders}\n                          onCheckedChange={(checked) => \n                            setCalendarSettings(prev => ({ ...prev, createRefundReminders: checked }))\n                          }\n                          data-testid=\"switch-refund-reminders\"\n                        />\n                      </div>\n                    </div>\n\n                  </div>\n                )}\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* Messaging Templates */}\n          <Card className=\"card-shadow border-l-4 border-l-orange-500\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center text-lg\">\n                <MessageSquare className=\"w-5 h-5 mr-2 text-orange-500\" />\n                Messaging Templates\n              </CardTitle>\n              <p className=\"text-sm text-muted-foreground\">Configure message templates for communicating with mediators</p>\n            </CardHeader>\n            <CardContent>\n              <div className=\"space-y-6\">\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <h4 className=\"font-medium\">Enable Messaging</h4>\n                    <p className=\"text-sm text-muted-foreground\">Send automated messages to mediators via WhatsApp</p>\n                  </div>\n                  <Switch\n                    checked={messagingSettings.enabled}\n                    onCheckedChange={(checked) => {\n                      setMessagingSettings(prev => ({ ...prev, enabled: checked }));\n                      updateMessagingMutation.mutate({ ...messagingSettings, enabled: checked });\n                    }}\n                    disabled={updateMessagingMutation.isPending}\n                    data-testid=\"switch-messaging-enabled\"\n                  />\n                </div>\n\n                {messagingSettings.enabled && (\n                  <div className=\"space-y-4 pl-4 border-l-2 border-orange-100\">\n                    <div>\n                      <label className=\"text-sm font-medium\">Message Template Style</label>\n                      <Select \n                        value={messagingSettings.selectedTemplate} \n                        onValueChange={(value) => {\n                          setMessagingSettings(prev => ({ ...prev, selectedTemplate: value }));\n                          updateMessagingMutation.mutate({ ...messagingSettings, selectedTemplate: value });\n                        }}\n                        disabled={updateMessagingMutation.isPending}\n                      >\n                        <SelectTrigger className=\"mt-1\" data-testid=\"select-message-template\">\n                          <SelectValue placeholder=\"Select template style\" />\n                        </SelectTrigger>\n                        <SelectContent>\n                          <SelectItem value=\"default\">Default - Simple and clear</SelectItem>\n                          <SelectItem value=\"friendly\">Friendly - Casual with emojis</SelectItem>\n                          <SelectItem value=\"professional\">Professional - Formal business tone</SelectItem>\n                        </SelectContent>\n                      </Select>\n                    </div>\n\n                    <div className=\"space-y-3\">\n                      <h5 className=\"font-medium\">Template Preview</h5>\n                      <div className=\"bg-gray-50 dark:bg-gray-800 rounded-lg p-4 space-y-2\">\n                        <div>\n                          <span className=\"text-xs font-medium text-muted-foreground\">Order Confirmation:</span>\n                          <p className=\"text-sm\">{messageTemplates[messagingSettings.selectedTemplate as keyof typeof messageTemplates].orderConfirmation}</p>\n                        </div>\n                        <div>\n                          <span className=\"text-xs font-medium text-muted-foreground\">Delivery Reminder:</span>\n                          <p className=\"text-sm\">{messageTemplates[messagingSettings.selectedTemplate as keyof typeof messageTemplates].deliveryReminder}</p>\n                        </div>\n                        <div>\n                          <span className=\"text-xs font-medium text-muted-foreground\">Refund Form Reminder:</span>\n                          <p className=\"text-sm\">{messageTemplates[messagingSettings.selectedTemplate as keyof typeof messageTemplates].refundFormReminder}</p>\n                        </div>\n                        <div>\n                          <span className=\"text-xs font-medium text-muted-foreground\">Payment Request:</span>\n                          <p className=\"text-sm\">{messageTemplates[messagingSettings.selectedTemplate as keyof typeof messageTemplates].paymentRequest}</p>\n                        </div>\n                      </div>\n                    </div>\n\n                    <Button className=\"w-full\">\n                      <MessageSquare className=\"w-4 h-4 mr-2\" />\n                      Test Message to Mediator\n                    </Button>\n                  </div>\n                )}\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card className=\"card-shadow border-l-4 border-l-indigo-500\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center text-lg\">\n                <Database className=\"w-5 h-5 mr-2 text-indigo-500\" />\n                Data Management\n              </CardTitle>\n              <p className=\"text-sm text-muted-foreground\">Export your data or import orders in bulk</p>\n            </CardHeader>\n            <CardContent>\n              <div className=\"space-y-6\">\n                {/* Export Section */}\n                <div>\n                  <h4 className=\"font-medium mb-4 flex items-center\">\n                    <Download className=\"w-4 h-4 mr-2\" />\n                    Export Data\n                  </h4>\n                  <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                    <div className=\"text-center\">\n                      <h5 className=\"font-medium mb-2\">Orders Data</h5>\n                      <p className=\"text-sm text-muted-foreground mb-4\">\n                        Export all your order data including status, amounts, and mediator information\n                      </p>\n                      <Button \n                        variant=\"outline\" \n                        onClick={() => handleExport('orders')}\n                        data-testid=\"button-export-orders\"\n                      >\n                        <Download className=\"w-4 h-4 mr-2\" />\n                        Export Orders\n                      </Button>\n                    </div>\n                    \n                    <div className=\"text-center\">\n                      <h5 className=\"font-medium mb-2\">Mediators Data</h5>\n                      <p className=\"text-sm text-muted-foreground mb-4\">\n                        Export mediator information and performance statistics\n                      </p>\n                      <Button \n                        variant=\"outline\" \n                        onClick={() => handleExport('mediators')}\n                        data-testid=\"button-export-mediators\"\n                      >\n                        <Download className=\"w-4 h-4 mr-2\" />\n                        Export Mediators\n                      </Button>\n                    </div>\n                    \n                    <div className=\"text-center\">\n                      <h5 className=\"font-medium mb-2\">Accounts Data</h5>\n                      <p className=\"text-sm text-muted-foreground mb-4\">\n                        Export your e-commerce account information and activity\n                      </p>\n                      <Button \n                        variant=\"outline\" \n                        onClick={() => handleExport('accounts')}\n                        data-testid=\"button-export-accounts\"\n                      >\n                        <Download className=\"w-4 h-4 mr-2\" />\n                        Export Accounts\n                      </Button>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Import Section */}\n                <div className=\"border-t pt-6\">\n                  <h4 className=\"font-medium mb-4 flex items-center\">\n                    <Upload className=\"w-4 h-4 mr-2\" />\n                    Import Orders\n                  </h4>\n                  <div className=\"space-y-4\">\n                    <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4\">\n                      <h5 className=\"font-medium text-blue-800 mb-2\">📝 Before Importing:</h5>\n                      <div className=\"text-sm text-blue-700 space-y-1\">\n                        <p>• <strong>Download the template first</strong> - it contains your actual Account IDs and Mediator IDs</p>\n                        <p>• <strong>Account IDs:</strong> Copy from your Accounts page (click on any account to see its ID)</p>\n                        <p>• <strong>Mediator IDs:</strong> Copy from your Mediators page (click on any mediator to see its ID)</p>\n                        <p>• <strong>Order amounts:</strong> Enter in rupees (e.g., 1500 for ₹1500)</p>\n                        <p>• <strong>Dates:</strong> Use YYYY-MM-DD format (e.g., 2024-01-15)</p>\n                        <p>• <strong>Status:</strong> Use: Ordered, Delivered, Refund Requested, Refund Approved, Refunded, Cancelled, Returned, Disputed</p>\n                      </div>\n                    </div>\n                    \n                    {/* Import Status Display */}\n                    <div id=\"import-status\" className=\"hidden\">\n                      <div className=\"bg-green-50 border border-green-200 rounded-lg p-4\">\n                        <h5 className=\"font-medium text-green-800 mb-2\">Import Status</h5>\n                        <div id=\"import-results\" className=\"text-sm text-green-700\"></div>\n                      </div>\n                    </div>\n                    \n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                      <div>\n                        <label className=\"block text-sm font-medium mb-2\">\n                          Upload CSV File\n                        </label>\n                        <Input\n                          type=\"file\"\n                          accept=\".csv\"\n                          onChange={handleImport}\n                          data-testid=\"input-import-file\"\n                          className=\"border-2 border-dashed border-gray-300 hover:border-blue-500 transition-colors\"\n                        />\n                        <p className=\"text-xs text-muted-foreground mt-1\">\n                          Select a CSV file formatted according to the template\n                        </p>\n                      </div>\n                      \n                      <div className=\"flex flex-col justify-center\">\n                        <Button\n                          variant=\"outline\"\n                          onClick={downloadTemplate}\n                          data-testid=\"button-download-template\"\n                          className=\"mb-2 border-blue-500 text-blue-600 hover:bg-blue-50\"\n                        >\n                          <FileText className=\"w-4 h-4 mr-2\" />\n                          Download Template\n                        </Button>\n                        <p className=\"text-xs text-muted-foreground\">\n                          Get the CSV template with proper format and sample data\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n\n        </div>\n      </div>\n    </MainLayout>\n  );\n}\n","size_bytes":54486},"client/src/components/accounts/account-card.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { formatCurrency } from \"@/lib/currency\";\nimport { Account } from \"@shared/schema\";\nimport { Mail, Phone, Edit } from \"lucide-react\";\n\ninterface AccountCardProps {\n  account: Account;\n  stats?: {\n    activeOrders: number;\n    totalInvestment: number;\n    pendingAmount: number;\n    expectedRefund: number;\n  };\n  onEdit?: (account: Account) => void;\n  onViewOrders?: (account: Account) => void;\n}\n\nconst platformIcons: Record<string, string> = {\n  Amazon: \"🛒\",\n  Flipkart: \"🛍️\", \n  Myntra: \"👗\",\n  Meesho: \"🏪\",\n  Ajio: \"👕\",\n  Nykaa: \"💄\",\n  \"Paytm Mall\": \"💳\",\n  Snapdeal: \"🛒\",\n};\n\nconst platformColors: Record<string, string> = {\n  Amazon: \"bg-orange-50 text-orange-600\",\n  Flipkart: \"bg-blue-50 text-blue-600\",\n  Myntra: \"bg-pink-50 text-pink-600\",\n  Meesho: \"bg-purple-50 text-purple-600\", \n  Ajio: \"bg-indigo-50 text-indigo-600\",\n  Nykaa: \"bg-pink-50 text-pink-600\",\n  \"Paytm Mall\": \"bg-blue-50 text-blue-600\",\n  Snapdeal: \"bg-red-50 text-red-600\",\n};\n\nexport function AccountCard({ \n  account, \n  stats, \n  onEdit, \n  onViewOrders \n}: AccountCardProps) {\n  return (\n    <Card className=\"card-shadow hover-lift h-full\" data-testid={`account-card-${account.id}`}>\n      <CardContent className=\"p-6\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <div className=\"flex items-center space-x-3\">\n            <div className={`w-10 h-10 rounded-lg flex items-center justify-center text-lg transition-transform hover:scale-110 ${platformColors[account.platform] || 'bg-gray-50 text-gray-600'}`}>\n              {platformIcons[account.platform] || \"🏪\"}\n            </div>\n            <div>\n              <h3 className=\"font-semibold\" data-testid={`account-name-${account.id}`}>\n                {account.name}\n              </h3>\n              <Badge variant=\"secondary\" className=\"transition-colors\" data-testid={`account-platform-${account.id}`}>\n                {account.platform}\n              </Badge>\n              <p className=\"text-xs text-blue-600 font-mono bg-blue-50 px-2 py-1 rounded mt-1 transition-colors\" data-testid={`account-id-${account.id}`}>\n                ID: {account.id}\n              </p>\n            </div>\n          </div>\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            className=\"btn-press\"\n            onClick={() => onEdit?.(account)}\n            data-testid={`button-edit-account-${account.id}`}\n          >\n            <Edit className=\"w-4 h-4\" />\n          </Button>\n        </div>\n        \n        <div className=\"space-y-2 mb-4\">\n          <div className=\"flex items-center space-x-2\">\n            <Mail className=\"w-4 h-4 text-muted-foreground\" />\n            <span className=\"text-sm\" data-testid={`account-email-${account.id}`}>\n              {account.email}\n            </span>\n          </div>\n          <div className=\"flex items-center space-x-2\">\n            <Phone className=\"w-4 h-4 text-muted-foreground\" />\n            <span className=\"text-sm\" data-testid={`account-phone-${account.id}`}>\n              {account.phone}\n            </span>\n          </div>\n          {account.comments && (\n            <div className=\"text-sm text-muted-foreground mt-2\" data-testid={`account-comments-${account.id}`}>\n              {account.comments}\n            </div>\n          )}\n        </div>\n        \n        {stats && (\n          <div className=\"grid grid-cols-2 gap-4 mb-4\">\n            <div>\n              <p className=\"text-sm text-muted-foreground\">Active Orders</p>\n              <p className=\"text-lg font-semibold\" data-testid={`account-active-orders-${account.id}`}>\n                {stats.activeOrders}\n              </p>\n            </div>\n            <div>\n              <p className=\"text-sm text-muted-foreground\">Pending Amount</p>\n              <p className=\"text-lg font-semibold text-orange-600\" data-testid={`account-pending-amount-${account.id}`}>\n                {formatCurrency(stats.pendingAmount)}\n              </p>\n            </div>\n          </div>\n        )}\n        \n        <Button \n          variant=\"secondary\" \n          className=\"w-full btn-press\"\n          onClick={() => onViewOrders?.(account)}\n          data-testid={`button-view-account-orders-${account.id}`}\n        >\n          View Orders\n        </Button>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":4470},"client/src/components/accounts/account-form.tsx":{"content":"import { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { z } from \"zod\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { isUnauthorizedError } from \"@/lib/authUtils\";\nimport type { Account } from \"@shared/schema\";\n\nconst accountFormSchema = z.object({\n  name: z.string().min(3, \"Account name must be at least 3 characters\"),\n  platform: z.enum([\"Amazon\", \"Flipkart\", \"Myntra\", \"Meesho\", \"Ajio\", \"Nykaa\", \"Paytm Mall\", \"Snapdeal\"]),\n  email: z.string().email(\"Please enter a valid email address\"),\n  phone: z.string().min(10, \"Please enter a valid phone number\"),\n  password: z.string().optional(),\n  comments: z.string().optional(),\n});\n\ntype AccountFormData = z.infer<typeof accountFormSchema>;\n\ninterface AccountFormProps {\n  account?: Account | null;\n  onSuccess?: () => void;\n  onCancel?: () => void;\n}\n\nexport function AccountForm({ account, onSuccess, onCancel }: AccountFormProps) {\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const isEditing = !!account;\n\n  const form = useForm<AccountFormData>({\n    resolver: zodResolver(accountFormSchema),\n    defaultValues: {\n      name: account?.name || \"\",\n      platform: account?.platform || undefined,\n      email: account?.email || \"\",\n      phone: account?.phone || \"\",\n      password: \"\",\n      comments: account?.comments || \"\",\n    },\n  });\n\n  const createAccountMutation = useMutation({\n    mutationFn: async (data: AccountFormData) => {\n      return await apiRequest(\"POST\", \"/api/accounts\", data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/accounts\"] });\n      toast({\n        title: \"Success\",\n        description: \"Account created successfully\",\n      });\n      form.reset();\n      onSuccess?.();\n    },\n    onError: (error: Error) => {\n      if (isUnauthorizedError(error)) {\n        toast({\n          title: \"Unauthorized\",\n          description: \"You are logged out. Logging in again...\",\n          variant: \"destructive\",\n        });\n        setTimeout(() => {\n          window.location.href = \"/api/login\";\n        }, 500);\n        return;\n      }\n      toast({\n        title: \"Error\",\n        description: \"Failed to create account. Please try again.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const updateAccountMutation = useMutation({\n    mutationFn: async (data: AccountFormData) => {\n      // Remove password from update if it's empty\n      const updateData = { ...data };\n      if (!updateData.password) {\n        delete updateData.password;\n      }\n      return await apiRequest(\"PUT\", `/api/accounts/${account!.id}`, updateData);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/accounts\"] });\n      toast({\n        title: \"Success\",\n        description: \"Account updated successfully\",\n      });\n      onSuccess?.();\n    },\n    onError: (error: Error) => {\n      if (isUnauthorizedError(error)) {\n        toast({\n          title: \"Unauthorized\",\n          description: \"You are logged out. Logging in again...\",\n          variant: \"destructive\",\n        });\n        setTimeout(() => {\n          window.location.href = \"/api/login\";\n        }, 500);\n        return;\n      }\n      toast({\n        title: \"Error\",\n        description: \"Failed to update account. Please try again.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const deleteAccountMutation = useMutation({\n    mutationFn: async () => {\n      return await apiRequest(\"DELETE\", `/api/accounts/${account!.id}`);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/accounts\"] });\n      toast({\n        title: \"Success\",\n        description: \"Account deleted successfully\",\n      });\n      onSuccess?.();\n    },\n    onError: (error: Error) => {\n      if (isUnauthorizedError(error)) {\n        toast({\n          title: \"Unauthorized\",\n          description: \"You are logged out. Logging in again...\",\n          variant: \"destructive\",\n        });\n        setTimeout(() => {\n          window.location.href = \"/api/login\";\n        }, 500);\n        return;\n      }\n      toast({\n        title: \"Error\",\n        description: \"Failed to delete account. Please try again.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const onSubmit = (data: AccountFormData) => {\n    if (isEditing) {\n      updateAccountMutation.mutate(data);\n    } else {\n      createAccountMutation.mutate(data);\n    }\n  };\n\n  const handleDelete = () => {\n    if (confirm(\"Are you sure you want to delete this account? This action cannot be undone.\")) {\n      deleteAccountMutation.mutate();\n    }\n  };\n\n  const isSubmitting = createAccountMutation.isPending || updateAccountMutation.isPending;\n\n  return (\n    <Card className=\"card-shadow\">\n      <CardHeader>\n        <CardTitle>{isEditing ? \"Edit Account\" : \"Add New Account\"}</CardTitle>\n      </CardHeader>\n      <CardContent>\n        <Form {...form}>\n          <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <FormField\n                control={form.control}\n                name=\"name\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Account Name</FormLabel>\n                    <FormControl>\n                      <Input \n                        placeholder=\"e.g., John's Amazon Prime\" \n                        {...field} \n                        data-testid=\"input-account-name\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"platform\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Platform</FormLabel>\n                    <Select onValueChange={field.onChange} defaultValue={field.value}>\n                      <FormControl>\n                        <SelectTrigger data-testid=\"select-platform\">\n                          <SelectValue placeholder=\"Select platform\" />\n                        </SelectTrigger>\n                      </FormControl>\n                      <SelectContent>\n                        <SelectItem value=\"Amazon\">Amazon</SelectItem>\n                        <SelectItem value=\"Flipkart\">Flipkart</SelectItem>\n                        <SelectItem value=\"Myntra\">Myntra</SelectItem>\n                        <SelectItem value=\"Meesho\">Meesho</SelectItem>\n                        <SelectItem value=\"Ajio\">Ajio</SelectItem>\n                        <SelectItem value=\"Nykaa\">Nykaa</SelectItem>\n                        <SelectItem value=\"Paytm Mall\">Paytm Mall</SelectItem>\n                        <SelectItem value=\"Snapdeal\">Snapdeal</SelectItem>\n                      </SelectContent>\n                    </Select>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"email\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Email</FormLabel>\n                    <FormControl>\n                      <Input \n                        type=\"email\" \n                        placeholder=\"account@example.com\" \n                        {...field} \n                        data-testid=\"input-email\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"phone\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Phone Number</FormLabel>\n                    <FormControl>\n                      <Input \n                        type=\"tel\" \n                        placeholder=\"+91 9876543210\" \n                        {...field} \n                        data-testid=\"input-phone\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            </div>\n\n            <FormField\n              control={form.control}\n              name=\"password\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Password {isEditing && \"(Leave empty to keep current password)\"}</FormLabel>\n                  <FormControl>\n                    <Input \n                      type=\"password\" \n                      placeholder={isEditing ? \"Enter new password (optional)\" : \"Enter password\"} \n                      {...field} \n                      data-testid=\"input-password\"\n                    />\n                  </FormControl>\n                  <FormMessage />\n                  <p className=\"text-xs text-muted-foreground\">\n                    ⚠️ Password will be encrypted and stored securely\n                  </p>\n                </FormItem>\n              )}\n            />\n\n            <FormField\n              control={form.control}\n              name=\"comments\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Comments (Optional)</FormLabel>\n                  <FormControl>\n                    <Textarea \n                      placeholder=\"Additional notes about this account...\" \n                      {...field} \n                      data-testid=\"textarea-comments\"\n                      rows={3}\n                    />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <div className=\"flex justify-between pt-4\">\n              <div className=\"flex space-x-2\">\n                {onCancel && (\n                  <Button type=\"button\" variant=\"outline\" onClick={onCancel} data-testid=\"button-cancel\">\n                    Cancel\n                  </Button>\n                )}\n                \n                {isEditing && (\n                  <Button \n                    type=\"button\" \n                    variant=\"destructive\" \n                    onClick={handleDelete}\n                    disabled={deleteAccountMutation.isPending}\n                    data-testid=\"button-delete-account\"\n                  >\n                    {deleteAccountMutation.isPending ? \"Deleting...\" : \"Delete\"}\n                  </Button>\n                )}\n              </div>\n              \n              <Button \n                type=\"submit\" \n                disabled={isSubmitting}\n                data-testid=\"button-submit\"\n              >\n                {isSubmitting \n                  ? (isEditing ? \"Updating...\" : \"Creating...\") \n                  : (isEditing ? \"Update Account\" : \"Create Account\")\n                }\n              </Button>\n            </div>\n          </form>\n        </Form>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":11637},"client/src/components/dashboard/quick-actions.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { Plus, Star, DollarSign } from \"lucide-react\";\nimport { Link } from \"wouter\";\n\nconst actions = [\n  {\n    title: \"New Order\",\n    description: \"Create new review order\",\n    icon: Plus,\n    iconColor: \"text-blue-600\",\n    iconBg: \"bg-blue-50\",\n    href: \"/orders?action=new\",\n  },\n  {\n    title: \"Submit Review\",\n    description: \"Mark review as complete\",\n    icon: Star,\n    iconColor: \"text-green-600\",\n    iconBg: \"bg-green-50\",\n    href: \"/orders?filter=delivered\",\n  },\n  {\n    title: \"Request Refund\",\n    description: \"Submit refund form\",\n    icon: DollarSign,\n    iconColor: \"text-orange-600\",\n    iconBg: \"bg-orange-50\",\n    href: \"/orders?filter=deliverables-done\",\n  },\n];\n\nexport default function QuickActions() {\n  return (\n    <div className=\"grid grid-cols-1 md:grid-cols-3 gap-3 lg:gap-4 mb-6 lg:mb-8\">\n      {actions.map((action, index) => (\n        <Link key={action.title} href={action.href}>\n          <Card className={`card-shadow hover-lift cursor-pointer group stagger-item`}>\n            <CardContent className=\"p-4 lg:p-6\">\n              <div className=\"flex items-center space-x-3 lg:space-x-4\">\n                <div className={`w-10 h-10 lg:w-12 lg:h-12 ${action.iconBg} rounded-lg flex items-center justify-center group-hover:scale-110 transition-transform shrink-0`}>\n                  <action.icon className={`w-5 h-5 lg:w-6 lg:h-6 ${action.iconColor}`} />\n                </div>\n                <div className=\"flex-1 min-w-0\">\n                  <h3 className=\"font-medium text-sm lg:text-base\" data-testid={`quick-action-title-${action.title.toLowerCase().replace(/\\s+/g, '-')}`}>\n                    {action.title}\n                  </h3>\n                  <p className=\"text-xs lg:text-sm text-muted-foreground truncate\" data-testid={`quick-action-description-${action.title.toLowerCase().replace(/\\s+/g, '-')}`}>\n                    {action.description}\n                  </p>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        </Link>\n      ))}\n    </div>\n  );\n}\n\nexport { QuickActions };\n","size_bytes":2138},"client/src/components/dashboard/recent-orders.tsx":{"content":"import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Link } from \"wouter\";\nimport { formatCurrency } from \"@/lib/currency\";\nimport { OrderWithRelations } from \"@shared/schema\";\n\ninterface RecentOrdersProps {\n  orders: OrderWithRelations[];\n  isLoading?: boolean;\n}\n\nconst statusColors = {\n  \"Ordered\": \"bg-blue-50 text-blue-700\",\n  \"Delivered\": \"bg-green-50 text-green-700\", \n  \"Deliverables Done\": \"bg-purple-50 text-purple-700\",\n  \"Refund Form Done\": \"bg-indigo-50 text-indigo-700\",\n  \"Overdue Passed for Refund Form\": \"bg-red-50 text-red-700\",\n  \"Remind Mediator for Payment\": \"bg-orange-50 text-orange-700\",\n  \"Refunded\": \"bg-emerald-50 text-emerald-700\",\n  \"Cancelled\": \"bg-gray-50 text-gray-700\",\n};\n\nexport function RecentOrders({ orders, isLoading }: RecentOrdersProps) {\n  if (isLoading) {\n    return (\n      <Card className=\"card-shadow\">\n        <CardHeader className=\"p-4 lg:p-6\">\n          <div className=\"flex items-center justify-between\">\n            <CardTitle className=\"text-base lg:text-lg\">Recent Orders</CardTitle>\n          </div>\n        </CardHeader>\n        <CardContent className=\"p-4 lg:p-6\">\n          <div className=\"space-y-3 lg:space-y-4\">\n            {[1, 2, 3].map((i) => (\n              <div key={i} className=\"flex items-center space-x-3 lg:space-x-4 p-3 lg:p-4 border border-border rounded-lg animate-pulse\">\n                <div className=\"w-10 h-10 lg:w-12 lg:h-12 bg-muted rounded-lg shrink-0\"></div>\n                <div className=\"flex-1 space-y-2 min-w-0\">\n                  <div className=\"h-3 lg:h-4 bg-muted rounded w-3/4\"></div>\n                  <div className=\"h-2 lg:h-3 bg-muted rounded w-1/2\"></div>\n                </div>\n                <div className=\"space-y-2 shrink-0\">\n                  <div className=\"h-3 lg:h-4 bg-muted rounded w-16 lg:w-20\"></div>\n                  <div className=\"h-5 lg:h-6 bg-muted rounded w-20 lg:w-24\"></div>\n                </div>\n              </div>\n            ))}\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  return (\n    <Card className=\"card-shadow\">\n      <CardHeader className=\"p-4 lg:p-6\">\n        <div className=\"flex items-center justify-between\">\n          <CardTitle className=\"text-base lg:text-lg\">Recent Orders</CardTitle>\n          <Link href=\"/orders\">\n            <Button variant=\"ghost\" size=\"sm\" data-testid=\"link-view-all-orders\" className=\"text-xs lg:text-sm\">\n              View all\n            </Button>\n          </Link>\n        </div>\n      </CardHeader>\n      <CardContent className=\"p-4 lg:p-6\">\n        {orders.length === 0 ? (\n          <div className=\"text-center py-6 lg:py-8 text-muted-foreground\">\n            <p className=\"text-sm lg:text-base\">No orders yet</p>\n            <p className=\"text-xs lg:text-sm mt-1\">Create your first order to get started</p>\n          </div>\n        ) : (\n          <div className=\"space-y-3 lg:space-y-4\">\n            {orders.slice(0, 3).map((order) => (\n              <div \n                key={order.id} \n                className=\"flex items-center space-x-3 lg:space-x-4 p-3 lg:p-4 border border-border rounded-lg hover:bg-muted/20 transition-colors\"\n                data-testid={`recent-order-${order.id}`}\n              >\n                <div className=\"w-10 h-10 lg:w-12 lg:h-12 bg-muted rounded-lg flex items-center justify-center shrink-0\">\n                  <span className=\"text-[10px] lg:text-xs font-medium\">\n                    {order.platform.slice(0, 2).toUpperCase()}\n                  </span>\n                </div>\n                <div className=\"flex-1 min-w-0\">\n                  <p className=\"font-medium truncate text-sm lg:text-base\" data-testid={`order-product-name-${order.id}`}>\n                    {order.productName}\n                  </p>\n                  <p className=\"text-xs lg:text-sm text-muted-foreground\" data-testid={`order-platform-${order.id}`}>\n                    {order.platform}\n                  </p>\n                </div>\n                <div className=\"text-right shrink-0\">\n                  <p className=\"font-medium text-sm lg:text-base\" data-testid={`order-amount-${order.id}`}>\n                    {formatCurrency(order.orderAmount)}\n                  </p>\n                  <Badge \n                    className={`${statusColors[order.currentStatus as keyof typeof statusColors]} text-[10px] lg:text-xs`}\n                    data-testid={`order-status-${order.id}`}\n                  >\n                    {order.currentStatus}\n                  </Badge>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":4749},"client/src/components/dashboard/stats-card.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { LucideIcon } from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\n\ninterface StatsCardProps {\n  title: string;\n  value: string | number;\n  subtitle?: string;\n  icon: LucideIcon;\n  iconColor?: string;\n  valueColor?: string;\n  trend?: {\n    value: string;\n    isPositive: boolean;\n  };\n}\n\nexport default function StatsCard({ \n  title, \n  value, \n  subtitle, \n  icon: Icon, \n  iconColor = \"text-blue-600\",\n  valueColor,\n  trend \n}: StatsCardProps) {\n  return (\n    <Card className=\"card-shadow hover-lift h-full\">\n      <CardContent className=\"p-6\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex-1\">\n            <p className=\"text-sm text-muted-foreground mb-1\" data-testid={`stats-title-${title.toLowerCase().replace(/\\s+/g, '-')}`}>\n              {title}\n            </p>\n            <p className={cn(\"text-2xl font-semibold\", valueColor)} data-testid={`stats-value-${title.toLowerCase().replace(/\\s+/g, '-')}`}>\n              {value}\n            </p>\n            {(subtitle || trend) && (\n              <p className=\"text-xs text-muted-foreground mt-1\" data-testid={`stats-subtitle-${title.toLowerCase().replace(/\\s+/g, '-')}`}>\n                {trend && (\n                  <span className={trend.isPositive ? \"text-green-600\" : \"text-red-600\"}>\n                    {trend.value}\n                  </span>\n                )}\n                {trend && subtitle && \" • \"}\n                {subtitle}\n              </p>\n            )}\n          </div>\n          <div className={cn(\"w-12 h-12 rounded-lg flex items-center justify-center transition-transform hover:scale-110\", \n            iconColor === \"text-green-600\" ? \"bg-green-50\" :\n            iconColor === \"text-blue-600\" ? \"bg-blue-50\" :\n            iconColor === \"text-orange-600\" ? \"bg-orange-50\" :\n            iconColor === \"text-emerald-600\" ? \"bg-emerald-50\" :\n            iconColor === \"text-purple-600\" ? \"bg-purple-50\" :\n            \"bg-gray-50\"\n          )}>\n            <Icon className={cn(\"w-6 h-6\", iconColor)} />\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n\nexport { StatsCard };\n","size_bytes":2192},"client/src/components/layout/main-layout.tsx":{"content":"import Sidebar from \"./sidebar\";\n\ninterface MainLayoutProps {\n  children: React.ReactNode;\n}\n\nexport default function MainLayout({ children }: MainLayoutProps) {\n  return (\n    <div className=\"flex min-h-screen bg-background\">\n      <Sidebar />\n      <main className=\"flex-1 lg:ml-60 pt-16 pb-16 lg:pt-0 lg:pb-0 page-enter\">\n        {children}\n      </main>\n    </div>\n  );\n}\n","size_bytes":376},"client/src/components/layout/sidebar.tsx":{"content":"import { Link, useLocation } from \"wouter\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { Button } from \"@/components/ui/button\";\nimport { \n  ChartLine, \n  ShoppingCart, \n  Users, \n  CreditCard, \n  Bell,\n  Activity,\n  Settings,\n  Star,\n  LogOut,\n  Menu\n} from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\nimport { useState } from \"react\";\nimport {\n  Sheet,\n  SheetContent,\n  SheetTrigger,\n} from \"@/components/ui/sheet\";\n\nconst menuItems = [\n  { path: \"/\", icon: ChartLine, label: \"Dashboard\" },\n  { path: \"/orders\", icon: ShoppingCart, label: \"Orders\" },\n  { path: \"/mediators\", icon: Users, label: \"Mediators\" },\n  { path: \"/accounts\", icon: CreditCard, label: \"Accounts\" },\n  { path: \"/notifications\", icon: Bell, label: \"Notifications\" },\n  { path: \"/activity-log\", icon: Activity, label: \"Activity Log\" },\n  { path: \"/settings\", icon: Settings, label: \"Settings\" },\n];\n\nfunction SidebarContent({ onNavigate }: { onNavigate?: () => void }) {\n  const [location] = useLocation();\n  const { user } = useAuth();\n\n  return (\n    <>\n      <div className=\"p-6\">\n        <div className=\"flex items-center space-x-3 mb-8\">\n          <div className=\"w-8 h-8 bg-primary rounded-lg flex items-center justify-center\">\n            <Star className=\"h-4 w-4 text-primary-foreground\" />\n          </div>\n          <h1 className=\"text-xl font-semibold\">ReviewSystem</h1>\n        </div>\n        \n        <nav className=\"space-y-1\">\n          {menuItems.map((item) => {\n            const isActive = location === item.path;\n            const Icon = item.icon;\n            \n            return (\n              <Link\n                key={item.path}\n                href={item.path}\n                onClick={onNavigate}\n                data-testid={`nav-${item.label.toLowerCase()}`}\n                className={cn(\n                  \"flex items-center space-x-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200\",\n                  isActive\n                    ? \"bg-primary text-primary-foreground shadow-sm\"\n                    : \"text-muted-foreground hover:bg-muted hover:text-foreground\"\n                )}\n              >\n                <Icon className=\"h-5 w-5\" />\n                <span>{item.label}</span>\n              </Link>\n            );\n          })}\n        </nav>\n      </div>\n      <div className=\"absolute bottom-0 left-0 right-0 p-6 border-t border-border bg-card\">\n        <div className=\"flex items-center space-x-3\">\n          <img \n            src={user?.profileImageUrl || \"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-4.0.3&auto=format&fit=crop&w=32&h=32&q=80\"} \n            alt=\"User avatar\" \n            className=\"w-8 h-8 rounded-full object-cover\"\n            data-testid=\"img-user-avatar\"\n          />\n          <div className=\"flex-1 min-w-0\">\n            <p className=\"text-sm font-medium truncate\" data-testid=\"text-user-name\">\n              {user?.firstName && user?.lastName \n                ? `${user.firstName} ${user.lastName}` \n                : user?.email?.split('@')[0] || 'User'\n              }\n            </p>\n            <p className=\"text-xs text-muted-foreground truncate\" data-testid=\"text-user-email\">\n              {user?.email}\n            </p>\n          </div>\n          <Button \n            variant=\"ghost\" \n            size=\"sm\"\n            onClick={() => window.location.href = '/api/logout'}\n            data-testid=\"button-logout\"\n            className=\"p-2 text-muted-foreground hover:text-foreground\"\n          >\n            <LogOut className=\"h-4 w-4\" />\n          </Button>\n        </div>\n      </div>\n    </>\n  );\n}\n\nfunction BottomNav() {\n  const [location] = useLocation();\n\n  return (\n    <nav className=\"lg:hidden fixed bottom-0 left-0 right-0 h-16 bg-card border-t border-border z-40 flex items-center justify-around px-2\">\n      {menuItems.slice(0, 4).map((item) => {\n        const isActive = location === item.path;\n        const Icon = item.icon;\n        \n        return (\n          <Link\n            key={item.path}\n            href={item.path}\n            data-testid={`bottom-nav-${item.label.toLowerCase()}`}\n            className={cn(\n              \"flex flex-col items-center justify-center p-2 rounded-lg transition-all duration-200 min-w-[64px]\",\n              isActive\n                ? \"text-primary\"\n                : \"text-muted-foreground\"\n            )}\n          >\n            <Icon className=\"h-5 w-5 mb-1\" />\n            <span className=\"text-[10px] font-medium\">{item.label}</span>\n          </Link>\n        );\n      })}\n    </nav>\n  );\n}\n\nexport default function Sidebar() {\n  const [open, setOpen] = useState(false);\n\n  return (\n    <>\n      {/* Desktop Sidebar */}\n      <aside className=\"hidden lg:block w-60 bg-card border-r border-border fixed h-full left-0 top-0 overflow-y-auto\">\n        <SidebarContent />\n      </aside>\n\n      {/* Mobile Header with Hamburger */}\n      <header className=\"lg:hidden fixed top-0 left-0 right-0 h-16 bg-card border-b border-border z-40 flex items-center px-4\">\n        <Sheet open={open} onOpenChange={setOpen}>\n          <SheetTrigger asChild>\n            <Button variant=\"ghost\" size=\"sm\" data-testid=\"button-mobile-menu\">\n              <Menu className=\"h-5 w-5\" />\n            </Button>\n          </SheetTrigger>\n          <SheetContent side=\"left\" className=\"w-60 p-0\">\n            <SidebarContent onNavigate={() => setOpen(false)} />\n          </SheetContent>\n        </Sheet>\n        <div className=\"flex items-center space-x-2 ml-3\">\n          <div className=\"w-6 h-6 bg-primary rounded-lg flex items-center justify-center\">\n            <Star className=\"h-3 w-3 text-primary-foreground\" />\n          </div>\n          <h1 className=\"text-lg font-semibold\">ReviewSystem</h1>\n        </div>\n      </header>\n\n      {/* Mobile Bottom Navigation */}\n      <BottomNav />\n    </>\n  );\n}\n","size_bytes":5853},"client/src/components/mediators/mediator-card.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { formatCurrency } from \"@/lib/currency\";\nimport { Mediator } from \"@shared/schema\";\nimport { MessageCircle, Edit } from \"lucide-react\";\n\ninterface MediatorCardProps {\n  mediator: Mediator;\n  stats?: {\n    activeOrders: number;\n    totalInvestment: number;\n    expectedReturns: number;\n    successRate: number;\n  };\n  onEdit?: (mediator: Mediator) => void;\n  onViewOrders?: (mediator: Mediator) => void;\n  onMessage?: (mediator: Mediator) => void;\n}\n\nexport function MediatorCard({ \n  mediator, \n  stats, \n  onEdit, \n  onViewOrders, \n  onMessage \n}: MediatorCardProps) {\n  const handleWhatsApp = () => {\n    const phoneNumber = mediator.whatsappNumber.replace(/\\D/g, '');\n    const message = encodeURIComponent(\"Hi! I wanted to discuss about our orders.\");\n    window.open(`https://wa.me/${phoneNumber}?text=${message}`, '_blank');\n  };\n\n  return (\n    <Card className=\"card-shadow hover-lift h-full\" data-testid={`mediator-card-${mediator.id}`}>\n      <CardContent className=\"p-6\">\n        <div className=\"flex items-start justify-between mb-4\">\n          <div className=\"flex items-center space-x-3\">\n            <Avatar className=\"w-12 h-12 transition-transform hover:scale-105\">\n              <AvatarFallback>\n                {mediator.name.split(' ').map(n => n[0]).join('').toUpperCase()}\n              </AvatarFallback>\n            </Avatar>\n            <div>\n              <h3 className=\"font-semibold\" data-testid={`mediator-name-${mediator.id}`}>\n                {mediator.name}\n              </h3>\n              <p className=\"text-sm text-muted-foreground\" data-testid={`mediator-phone-${mediator.id}`}>\n                {mediator.whatsappNumber}\n              </p>\n              <p className=\"text-xs text-blue-600 font-mono bg-blue-50 px-2 py-1 rounded mt-1 transition-colors\" data-testid={`mediator-id-${mediator.id}`}>\n                ID: {mediator.id}\n              </p>\n            </div>\n          </div>\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            onClick={handleWhatsApp}\n            className=\"text-green-600 hover:text-green-700 hover:scale-110 transition-transform\"\n            data-testid={`button-whatsapp-${mediator.id}`}\n          >\n            <MessageCircle className=\"w-5 h-5\" />\n          </Button>\n        </div>\n        \n        {stats && (\n          <>\n            <div className=\"grid grid-cols-2 gap-4 mb-4\">\n              <div>\n                <p className=\"text-sm text-muted-foreground\">Active Orders</p>\n                <p className=\"text-lg font-semibold\" data-testid={`mediator-active-orders-${mediator.id}`}>\n                  {stats.activeOrders}\n                </p>\n              </div>\n              <div>\n                <p className=\"text-sm text-muted-foreground\">Success Rate</p>\n                <p className=\"text-lg font-semibold text-green-600\" data-testid={`mediator-success-rate-${mediator.id}`}>\n                  {stats.successRate.toFixed(1)}%\n                </p>\n              </div>\n            </div>\n            \n            <div className=\"space-y-2 mb-4\">\n              <div className=\"flex justify-between\">\n                <span className=\"text-sm text-muted-foreground\">Total Investment</span>\n                <span className=\"text-sm font-medium\" data-testid={`mediator-investment-${mediator.id}`}>\n                  {formatCurrency(stats.totalInvestment)}\n                </span>\n              </div>\n              <div className=\"flex justify-between\">\n                <span className=\"text-sm text-muted-foreground\">Expected Returns</span>\n                <span className=\"text-sm font-medium\" data-testid={`mediator-returns-${mediator.id}`}>\n                  {formatCurrency(stats.expectedReturns)}\n                </span>\n              </div>\n            </div>\n          </>\n        )}\n        \n        <div className=\"flex space-x-2\">\n          <Button \n            variant=\"secondary\" \n            className=\"flex-1 btn-press\"\n            onClick={() => onViewOrders?.(mediator)}\n            data-testid={`button-view-orders-${mediator.id}`}\n          >\n            View Orders\n          </Button>\n          <Button \n            variant=\"ghost\" \n            size=\"sm\"\n            className=\"btn-press\"\n            onClick={() => onEdit?.(mediator)}\n            data-testid={`button-edit-${mediator.id}`}\n          >\n            <Edit className=\"w-4 h-4\" />\n          </Button>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":4638},"client/src/components/mediators/mediator-form.tsx":{"content":"import { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { z } from \"zod\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { isUnauthorizedError } from \"@/lib/authUtils\";\nimport type { Mediator } from \"@shared/schema\";\n\nconst mediatorFormSchema = z.object({\n  name: z.string().min(3, \"Mediator name must be at least 3 characters\"),\n  whatsappNumber: z.string()\n    .min(10, \"Please enter a valid WhatsApp number\")\n    .regex(/^\\+?[1-9]\\d{1,14}$/, \"Please enter a valid phone number with country code\"),\n});\n\ntype MediatorFormData = z.infer<typeof mediatorFormSchema>;\n\ninterface MediatorFormProps {\n  mediator?: Mediator | null;\n  onSuccess?: () => void;\n  onCancel?: () => void;\n}\n\nexport function MediatorForm({ mediator, onSuccess, onCancel }: MediatorFormProps) {\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const isEditing = !!mediator;\n\n  const form = useForm<MediatorFormData>({\n    resolver: zodResolver(mediatorFormSchema),\n    defaultValues: {\n      name: mediator?.name || \"\",\n      whatsappNumber: mediator?.whatsappNumber || \"\",\n    },\n  });\n\n  const createMediatorMutation = useMutation({\n    mutationFn: async (data: MediatorFormData) => {\n      return await apiRequest(\"POST\", \"/api/mediators\", data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/mediators\"] });\n      toast({\n        title: \"Success\",\n        description: \"Mediator created successfully\",\n      });\n      form.reset();\n      onSuccess?.();\n    },\n    onError: (error: Error) => {\n      if (isUnauthorizedError(error)) {\n        toast({\n          title: \"Unauthorized\",\n          description: \"You are logged out. Logging in again...\",\n          variant: \"destructive\",\n        });\n        setTimeout(() => {\n          window.location.href = \"/api/login\";\n        }, 500);\n        return;\n      }\n      toast({\n        title: \"Error\",\n        description: \"Failed to create mediator. Please try again.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const updateMediatorMutation = useMutation({\n    mutationFn: async (data: MediatorFormData) => {\n      return await apiRequest(\"PUT\", `/api/mediators/${mediator!.id}`, data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/mediators\"] });\n      toast({\n        title: \"Success\",\n        description: \"Mediator updated successfully\",\n      });\n      onSuccess?.();\n    },\n    onError: (error: Error) => {\n      if (isUnauthorizedError(error)) {\n        toast({\n          title: \"Unauthorized\",\n          description: \"You are logged out. Logging in again...\",\n          variant: \"destructive\",\n        });\n        setTimeout(() => {\n          window.location.href = \"/api/login\";\n        }, 500);\n        return;\n      }\n      toast({\n        title: \"Error\",\n        description: \"Failed to update mediator. Please try again.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const deleteMediatorMutation = useMutation({\n    mutationFn: async () => {\n      return await apiRequest(\"DELETE\", `/api/mediators/${mediator!.id}`);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/mediators\"] });\n      toast({\n        title: \"Success\",\n        description: \"Mediator deleted successfully\",\n      });\n      onSuccess?.();\n    },\n    onError: (error: Error) => {\n      if (isUnauthorizedError(error)) {\n        toast({\n          title: \"Unauthorized\",\n          description: \"You are logged out. Logging in again...\",\n          variant: \"destructive\",\n        });\n        setTimeout(() => {\n          window.location.href = \"/api/login\";\n        }, 500);\n        return;\n      }\n      toast({\n        title: \"Error\",\n        description: \"Failed to delete mediator. Please try again.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const onSubmit = (data: MediatorFormData) => {\n    if (isEditing) {\n      updateMediatorMutation.mutate(data);\n    } else {\n      createMediatorMutation.mutate(data);\n    }\n  };\n\n  const handleDelete = () => {\n    if (confirm(\"Are you sure you want to delete this mediator? This action cannot be undone.\")) {\n      deleteMediatorMutation.mutate();\n    }\n  };\n\n  const isSubmitting = createMediatorMutation.isPending || updateMediatorMutation.isPending;\n\n  return (\n    <Card className=\"card-shadow\">\n      <CardHeader>\n        <CardTitle>{isEditing ? \"Edit Mediator\" : \"Add New Mediator\"}</CardTitle>\n      </CardHeader>\n      <CardContent>\n        <Form {...form}>\n          <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n            <FormField\n              control={form.control}\n              name=\"name\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Mediator Name</FormLabel>\n                  <FormControl>\n                    <Input \n                      placeholder=\"Enter mediator's business name\" \n                      {...field} \n                      data-testid=\"input-mediator-name\"\n                    />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <FormField\n              control={form.control}\n              name=\"whatsappNumber\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>WhatsApp Number</FormLabel>\n                  <FormControl>\n                    <Input \n                      placeholder=\"+91 9876543210\" \n                      {...field} \n                      data-testid=\"input-whatsapp-number\"\n                    />\n                  </FormControl>\n                  <FormMessage />\n                  <p className=\"text-xs text-muted-foreground\">\n                    Include country code (e.g., +91 for India)\n                  </p>\n                </FormItem>\n              )}\n            />\n\n            <div className=\"flex justify-between pt-4\">\n              <div className=\"flex space-x-2\">\n                {onCancel && (\n                  <Button type=\"button\" variant=\"outline\" onClick={onCancel} data-testid=\"button-cancel\">\n                    Cancel\n                  </Button>\n                )}\n                \n                {isEditing && (\n                  <Button \n                    type=\"button\" \n                    variant=\"destructive\" \n                    onClick={handleDelete}\n                    disabled={deleteMediatorMutation.isPending}\n                    data-testid=\"button-delete-mediator\"\n                  >\n                    {deleteMediatorMutation.isPending ? \"Deleting...\" : \"Delete\"}\n                  </Button>\n                )}\n              </div>\n              \n              <Button \n                type=\"submit\" \n                disabled={isSubmitting}\n                data-testid=\"button-submit\"\n              >\n                {isSubmitting \n                  ? (isEditing ? \"Updating...\" : \"Creating...\") \n                  : (isEditing ? \"Update Mediator\" : \"Create Mediator\")\n                }\n              </Button>\n            </div>\n          </form>\n        </Form>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":7615},"client/src/components/notifications/notification-item.tsx":{"content":"import { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { formatDistanceToNow } from \"date-fns\";\nimport { NotificationWithOrder } from \"@shared/schema\";\nimport { AlertTriangle, CheckCircle, Info, Truck } from \"lucide-react\";\n\ninterface NotificationItemProps {\n  notification: NotificationWithOrder;\n  onMarkRead?: (id: string) => void;\n  onViewOrder?: (orderId: string) => void;\n  onMessageMediator?: (orderId: string) => void;\n}\n\nconst typeIcons = {\n  Critical: AlertTriangle,\n  Warning: AlertTriangle,\n  Success: CheckCircle,\n  Info: Info,\n};\n\nconst typeColors = {\n  Critical: \"bg-red-50 text-red-600\",\n  Warning: \"bg-orange-50 text-orange-600\", \n  Success: \"bg-green-50 text-green-600\",\n  Info: \"bg-blue-50 text-blue-600\",\n};\n\nexport function NotificationItem({ \n  notification, \n  onMarkRead, \n  onViewOrder,\n  onMessageMediator \n}: NotificationItemProps) {\n  const Icon = typeIcons[notification.type] || Info;\n  const isUnread = notification.isRead === 0;\n\n  return (\n    <div \n      className={`p-6 hover:bg-muted/20 transition-colors ${isUnread ? 'bg-muted/10' : ''}`}\n      data-testid={`notification-${notification.id}`}\n    >\n      <div className=\"flex items-start space-x-4\">\n        <div className={`w-10 h-10 rounded-lg flex items-center justify-center flex-shrink-0 ${typeColors[notification.type]}`}>\n          <Icon className=\"w-5 h-5\" />\n        </div>\n        <div className=\"flex-1 min-w-0\">\n          <div className=\"flex items-center justify-between mb-1\">\n            <div className=\"flex items-center space-x-2\">\n              <h4 className=\"font-medium text-sm\" data-testid={`notification-title-${notification.id}`}>\n                {notification.title}\n              </h4>\n              {isUnread && (\n                <Badge variant=\"secondary\" className=\"text-xs\">\n                  New\n                </Badge>\n              )}\n            </div>\n            <span className=\"text-xs text-muted-foreground\" data-testid={`notification-time-${notification.id}`}>\n              {notification.createdAt ? formatDistanceToNow(new Date(notification.createdAt), { addSuffix: true }) : 'Unknown time'}\n            </span>\n          </div>\n          <p className=\"text-sm text-muted-foreground mb-2\" data-testid={`notification-message-${notification.id}`}>\n            {notification.message}\n          </p>\n          {notification.order && (\n            <p className=\"text-xs text-muted-foreground mb-2\" data-testid={`notification-order-id-${notification.id}`}>\n              Order ID: <span className=\"font-mono font-medium\">{notification.order.orderId}</span> • {notification.order.productName}\n            </p>\n          )}\n          <div className=\"flex items-center space-x-3\">\n            {notification.order && onViewOrder && (\n              <Button \n                variant=\"link\" \n                size=\"sm\" \n                className=\"text-xs p-0 h-auto\"\n                onClick={() => onViewOrder(notification.order!.id)}\n                data-testid={`button-view-order-${notification.id}`}\n              >\n                View Order\n              </Button>\n            )}\n            {notification.order && onMessageMediator && (\n              <Button \n                variant=\"link\" \n                size=\"sm\" \n                className=\"text-xs p-0 h-auto text-primary\"\n                onClick={() => onMessageMediator(notification.order!.id)}\n                data-testid={`button-message-mediator-${notification.id}`}\n              >\n                Message Mediator\n              </Button>\n            )}\n            {isUnread && onMarkRead && (\n              <Button \n                variant=\"link\" \n                size=\"sm\" \n                className=\"text-xs p-0 h-auto\"\n                onClick={() => onMarkRead(notification.id)}\n                data-testid={`button-mark-read-${notification.id}`}\n              >\n                Mark Read\n              </Button>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":4029},"client/src/components/orders/order-card.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { formatCurrency } from \"@/lib/currency\";\nimport { OrderWithRelations } from \"@shared/schema\";\nimport { \n  Calendar, \n  User, \n  CreditCard, \n  ArrowRight, \n  ExternalLink,\n  MessageCircle \n} from \"lucide-react\";\nimport { format } from \"date-fns\";\n\ninterface OrderCardProps {\n  order: OrderWithRelations;\n  onView?: (order: OrderWithRelations) => void;\n  onEdit?: (order: OrderWithRelations) => void;\n  onUpdateStatus?: (order: OrderWithRelations) => void;\n  onMessageMediator?: (order: OrderWithRelations) => void;\n}\n\nconst statusColors = {\n  \"Ordered\": \"bg-blue-50 text-blue-700 dark:bg-blue-950 dark:text-blue-300\",\n  \"Delivered\": \"bg-green-50 text-green-700 dark:bg-green-950 dark:text-green-300\", \n  \"Deliverables Done\": \"bg-purple-50 text-purple-700 dark:bg-purple-950 dark:text-purple-300\",\n  \"Refund Form Done\": \"bg-indigo-50 text-indigo-700 dark:bg-indigo-950 dark:text-indigo-300\",\n  \"Overdue Passed for Refund Form\": \"bg-red-50 text-red-700 dark:bg-red-950 dark:text-red-300\",\n  \"Remind Mediator for Payment\": \"bg-orange-50 text-orange-700 dark:bg-orange-950 dark:text-orange-300\",\n  \"Refunded\": \"bg-emerald-50 text-emerald-700 dark:bg-emerald-950 dark:text-emerald-300\",\n  \"Cancelled\": \"bg-gray-50 text-gray-700 dark:bg-gray-950 dark:text-gray-300\",\n};\n\nconst platformIcons: Record<string, string> = {\n  Amazon: \"🛒\",\n  Flipkart: \"🛍️\", \n  Myntra: \"👗\",\n  Meesho: \"🏪\",\n  Ajio: \"👕\",\n  Nykaa: \"💄\",\n  \"Paytm Mall\": \"💳\",\n  Snapdeal: \"🛒\",\n};\n\nexport function OrderCard({ \n  order, \n  onView, \n  onEdit, \n  onUpdateStatus, \n  onMessageMediator \n}: OrderCardProps) {\n  const profit = order.refundAmount - order.orderAmount;\n  const isProfit = profit >= 0;\n\n  const handleProductLink = () => {\n    if (order.productLink) {\n      window.open(order.productLink, '_blank');\n    }\n  };\n\n  const handleWhatsAppMediator = () => {\n    const phoneNumber = order.mediator.whatsappNumber.replace(/\\D/g, '');\n    const message = encodeURIComponent(\n      `Hi! Regarding order: ${order.productName}\\nOrder ID: ${order.orderId}\\nPlatform: ${order.platform}\\nCurrent Status: ${order.currentStatus}`\n    );\n    window.open(`https://wa.me/${phoneNumber}?text=${message}`, '_blank');\n  };\n\n  return (\n    <Card className=\"card-shadow hover:shadow-md transition-shadow\" data-testid={`order-card-${order.id}`}>\n      <CardContent className=\"p-6\">\n        {/* Header */}\n        <div className=\"flex items-start justify-between mb-4\">\n          <div className=\"flex items-center space-x-3\">\n            <div className=\"text-2xl\">\n              {platformIcons[order.platform] || \"🏪\"}\n            </div>\n            <div>\n              <h3 className=\"font-semibold truncate\" data-testid={`order-product-name-${order.id}`}>\n                {order.productName}\n              </h3>\n              <div className=\"flex items-center space-x-2 text-sm text-muted-foreground\">\n                <span data-testid={`order-platform-${order.id}`}>{order.platform}</span>\n                <span>•</span>\n                <span data-testid={`order-id-${order.id}`}>{order.orderId}</span>\n              </div>\n            </div>\n          </div>\n          <Badge \n            className={statusColors[order.currentStatus as keyof typeof statusColors]}\n            data-testid={`order-status-${order.id}`}\n          >\n            {order.currentStatus}\n          </Badge>\n        </div>\n\n        {/* Financial Info */}\n        <div className=\"grid grid-cols-3 gap-4 mb-4\">\n          <div>\n            <p className=\"text-sm text-muted-foreground\">Order Amount</p>\n            <p className=\"font-semibold\" data-testid={`order-amount-${order.id}`}>\n              {formatCurrency(order.orderAmount)}\n            </p>\n          </div>\n          <div>\n            <p className=\"text-sm text-muted-foreground\">Refund Amount</p>\n            <p className=\"font-semibold\" data-testid={`order-refund-${order.id}`}>\n              {formatCurrency(order.refundAmount)}\n            </p>\n          </div>\n          <div>\n            <p className=\"text-sm text-muted-foreground\">Profit/Loss</p>\n            <p className={`font-semibold ${isProfit ? 'text-green-600' : 'text-red-600'}`} data-testid={`order-profit-${order.id}`}>\n              {isProfit ? '+' : ''}{formatCurrency(Math.abs(profit))}\n            </p>\n          </div>\n        </div>\n\n        {/* Order Details */}\n        <div className=\"space-y-2 mb-4\">\n          <div className=\"flex items-center space-x-2 text-sm\">\n            <User className=\"h-4 w-4 text-muted-foreground\" />\n            <span className=\"text-muted-foreground\">Mediator:</span>\n            <span data-testid={`order-mediator-${order.id}`}>{order.mediator.name}</span>\n          </div>\n          <div className=\"flex items-center space-x-2 text-sm\">\n            <CreditCard className=\"h-4 w-4 text-muted-foreground\" />\n            <span className=\"text-muted-foreground\">Account:</span>\n            <span data-testid={`order-account-${order.id}`}>{order.account.name}</span>\n          </div>\n          <div className=\"flex items-center space-x-2 text-sm\">\n            <Calendar className=\"h-4 w-4 text-muted-foreground\" />\n            <span className=\"text-muted-foreground\">Order Date:</span>\n            <span data-testid={`order-date-${order.id}`}>\n              {format(new Date(order.orderDate), 'MMM dd, yyyy')}\n            </span>\n          </div>\n          {order.deliveryDate && (\n            <div className=\"flex items-center space-x-2 text-sm\">\n              <Calendar className=\"h-4 w-4 text-muted-foreground\" />\n              <span className=\"text-muted-foreground\">Delivery Date:</span>\n              <span data-testid={`order-delivery-date-${order.id}`}>\n                {format(new Date(order.deliveryDate), 'MMM dd, yyyy')}\n              </span>\n            </div>\n          )}\n        </div>\n\n        {/* Actions */}\n        <div className=\"flex flex-wrap gap-2\">\n          <Button \n            variant=\"outline\" \n            size=\"sm\"\n            onClick={() => onView?.(order)}\n            data-testid={`button-view-order-${order.id}`}\n          >\n            View Details\n          </Button>\n          \n          <Button \n            variant=\"outline\" \n            size=\"sm\"\n            onClick={() => onEdit?.(order)}\n            data-testid={`button-edit-order-${order.id}`}\n          >\n            Edit\n          </Button>\n          \n          {order.currentStatus !== \"Refunded\" && order.currentStatus !== \"Cancelled\" && (\n            <Button \n              variant=\"outline\" \n              size=\"sm\"\n              onClick={() => onUpdateStatus?.(order)}\n              data-testid={`button-update-status-${order.id}`}\n            >\n              Update Status\n            </Button>\n          )}\n          \n          <Button \n            variant=\"ghost\" \n            size=\"sm\"\n            onClick={handleWhatsAppMediator}\n            className=\"text-green-600 hover:text-green-700\"\n            data-testid={`button-whatsapp-${order.id}`}\n          >\n            <MessageCircle className=\"h-4 w-4\" />\n          </Button>\n          \n          {order.productLink && (\n            <Button \n              variant=\"ghost\" \n              size=\"sm\"\n              onClick={handleProductLink}\n              data-testid={`button-product-link-${order.id}`}\n            >\n              <ExternalLink className=\"h-4 w-4\" />\n            </Button>\n          )}\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":7593},"client/src/components/orders/order-form.tsx":{"content":"import { useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { useMutation, useQuery, useQueryClient } from \"@tanstack/react-query\";\nimport { z } from \"zod\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { parseRupeesToPaise } from \"@/lib/currency\";\nimport { isUnauthorizedError } from \"@/lib/authUtils\";\nimport { OrderWithRelations } from \"@shared/schema\";\n\nconst orderFormSchema = z.object({\n  productName: z.string().min(3, \"Product name must be at least 3 characters\"),\n  platform: z.enum([\"Amazon\", \"Flipkart\", \"Myntra\", \"Meesho\", \"Ajio\", \"Nykaa\", \"Paytm Mall\", \"Snapdeal\"]),\n  accountId: z.string().min(1, \"Please select an account\"),\n  orderId: z.string().min(1, \"Order ID is required\"),\n  orderAmount: z.number().min(1, \"Order amount must be greater than 0\"),\n  refundAmount: z.number().min(1, \"Refund amount must be greater than 0\"),\n  productLink: z.string().url(\"Please enter a valid URL\").optional().or(z.literal(\"\")),\n  mediatorId: z.string().min(1, \"Please select a mediator\"),\n  orderDate: z.string().min(1, \"Order date is required\"),\n  deliveryDate: z.string().optional(),\n  refundFormDate: z.string().optional(),\n  remindRefundDate: z.string().optional(),\n  refundFormLink: z.string().url(\"Please enter a valid URL\").optional().or(z.literal(\"\")),\n  comments: z.string().optional(),\n  currentStatus: z.enum([\n    \"Ordered\",\n    \"Delivered\", \n    \"Deliverables Done\",\n    \"Refund Form Done\",\n    \"Overdue Passed for Refund Form\",\n    \"Remind Mediator for Payment\",\n    \"Refunded\",\n    \"Cancelled\"\n  ]).default(\"Ordered\"),\n});\n\ntype OrderFormData = z.infer<typeof orderFormSchema>;\n\ninterface OrderFormProps {\n  order?: OrderWithRelations | null;\n  onSuccess?: () => void;\n  onCancel?: () => void;\n}\n\nexport function OrderForm({ order, onSuccess, onCancel }: OrderFormProps) {\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const [selectedPlatform, setSelectedPlatform] = useState<string>(order?.platform || \"\");\n\n  const form = useForm<OrderFormData>({\n    resolver: zodResolver(orderFormSchema),\n    defaultValues: {\n      productName: order?.productName || \"\",\n      platform: order?.platform || undefined,\n      accountId: order?.accountId || \"\",\n      orderId: order?.orderId || \"\",\n      orderAmount: order ? order.orderAmount / 100 : 0, // Convert from paise to rupees\n      refundAmount: order ? order.refundAmount / 100 : 0, // Convert from paise to rupees\n      productLink: order?.productLink || \"\",\n      mediatorId: order?.mediatorId || \"\",\n      orderDate: order?.orderDate ? new Date(order.orderDate).toISOString().split('T')[0] : new Date().toISOString().split('T')[0],\n      deliveryDate: order?.deliveryDate ? new Date(order.deliveryDate).toISOString().split('T')[0] : \"\",\n      refundFormDate: order?.refundFormDate ? new Date(order.refundFormDate).toISOString().split('T')[0] : \"\",\n      remindRefundDate: order?.remindRefundDate ? new Date(order.remindRefundDate).toISOString().split('T')[0] : \"\",\n      refundFormLink: order?.refundFormLink || \"\",\n      comments: order?.comments || \"\",\n      currentStatus: order?.currentStatus || \"Ordered\",\n    },\n  });\n\n  // Fetch mediators\n  const { data: mediators = [] } = useQuery({\n    queryKey: [\"/api/mediators\"],\n  });\n\n  // Fetch accounts filtered by platform\n  const { data: accounts = [] } = useQuery({\n    queryKey: [\"/api/accounts\", selectedPlatform],\n    queryFn: async () => {\n      const url = selectedPlatform ? `/api/accounts?platform=${selectedPlatform}` : \"/api/accounts\";\n      const response = await fetch(url, {\n        credentials: 'include',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      });\n      if (!response.ok) throw new Error('Failed to fetch accounts');\n      return response.json();\n    },\n    enabled: !!selectedPlatform,\n  });\n\n  const createOrderMutation = useMutation({\n    mutationFn: async (data: OrderFormData) => {\n      const orderData = {\n        ...data,\n        orderAmount: parseRupeesToPaise(data.orderAmount),\n        refundAmount: parseRupeesToPaise(data.refundAmount),\n        // Send dates as strings - the schema will transform them\n        orderDate: data.orderDate,\n        deliveryDate: data.deliveryDate || undefined,\n        refundFormDate: data.refundFormDate || undefined,\n        remindRefundDate: data.remindRefundDate || undefined,\n        refundFormLink: data.refundFormLink?.trim() || null,\n        comments: data.comments?.trim() || null,\n      };\n      \n      return await apiRequest(\"POST\", \"/api/orders\", orderData);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/orders\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/dashboard/stats\"] });\n      toast({\n        title: \"Success\",\n        description: \"Order created successfully\",\n      });\n      onSuccess?.();\n    },\n    onError: (error: Error) => {\n      if (isUnauthorizedError(error)) {\n        toast({\n          title: \"Unauthorized\",\n          description: \"You are logged out. Logging in again...\",\n          variant: \"destructive\",\n        });\n        setTimeout(() => {\n          window.location.href = \"/api/login\";\n        }, 500);\n        return;\n      }\n      toast({\n        title: \"Error\",\n        description: \"Failed to create order. Please try again.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const updateOrderMutation = useMutation({\n    mutationFn: async (data: OrderFormData) => {\n      const orderData = {\n        ...data,\n        orderAmount: parseRupeesToPaise(data.orderAmount),\n        refundAmount: parseRupeesToPaise(data.refundAmount),\n        orderDate: data.orderDate,\n        deliveryDate: data.deliveryDate || undefined,\n        refundFormDate: data.refundFormDate || undefined,\n        remindRefundDate: data.remindRefundDate || undefined,\n        refundFormLink: data.refundFormLink?.trim() || null,\n        comments: data.comments?.trim() || null,\n      };\n      \n      const res = await apiRequest(\"PUT\", `/api/orders/${order!.id}`, orderData);\n      return res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/orders\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/dashboard/stats\"] });\n      toast({\n        title: \"Success\",\n        description: \"Order updated successfully\",\n      });\n      onSuccess?.();\n    },\n    onError: (error: Error) => {\n      if (isUnauthorizedError(error)) {\n        toast({\n          title: \"Unauthorized\",\n          description: \"You are logged out. Logging in again...\",\n          variant: \"destructive\",\n        });\n        setTimeout(() => {\n          window.location.href = \"/api/login\";\n        }, 500);\n        return;\n      }\n      toast({\n        title: \"Error\",\n        description: \"Failed to update order. Please try again.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const isEditing = !!order;\n\n  const onSubmit = (data: OrderFormData) => {\n    if (isEditing) {\n      updateOrderMutation.mutate(data);\n    } else {\n      createOrderMutation.mutate(data);\n    }\n  };\n\n  return (\n    <Card className=\"card-shadow\">\n      <CardHeader className=\"p-4 lg:p-6\">\n        <CardTitle className=\"text-lg lg:text-xl\">{isEditing ? 'Edit Order' : 'Create New Order'}</CardTitle>\n      </CardHeader>\n      <CardContent className=\"p-4 lg:p-6\">\n        <Form {...form}>\n          <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-3 lg:space-y-4\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3 lg:gap-4\">\n              <FormField\n                control={form.control}\n                name=\"productName\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Product Name</FormLabel>\n                    <FormControl>\n                      <Input \n                        placeholder=\"Enter product name\" \n                        {...field} \n                        data-testid=\"input-product-name\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"platform\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Platform</FormLabel>\n                    <Select \n                      onValueChange={(value) => {\n                        field.onChange(value);\n                        setSelectedPlatform(value);\n                        form.setValue(\"accountId\", \"\"); // Reset account selection\n                      }} \n                      defaultValue={field.value}\n                    >\n                      <FormControl>\n                        <SelectTrigger data-testid=\"select-platform\">\n                          <SelectValue placeholder=\"Select platform\" />\n                        </SelectTrigger>\n                      </FormControl>\n                      <SelectContent>\n                        <SelectItem value=\"Amazon\">Amazon</SelectItem>\n                        <SelectItem value=\"Flipkart\">Flipkart</SelectItem>\n                        <SelectItem value=\"Myntra\">Myntra</SelectItem>\n                        <SelectItem value=\"Meesho\">Meesho</SelectItem>\n                        <SelectItem value=\"Ajio\">Ajio</SelectItem>\n                        <SelectItem value=\"Nykaa\">Nykaa</SelectItem>\n                        <SelectItem value=\"Paytm Mall\">Paytm Mall</SelectItem>\n                        <SelectItem value=\"Snapdeal\">Snapdeal</SelectItem>\n                      </SelectContent>\n                    </Select>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"accountId\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Account</FormLabel>\n                    <Select onValueChange={field.onChange} defaultValue={field.value}>\n                      <FormControl>\n                        <SelectTrigger data-testid=\"select-account\">\n                          <SelectValue placeholder=\"Select account\" />\n                        </SelectTrigger>\n                      </FormControl>\n                      <SelectContent>\n                        {accounts.map((account: any) => (\n                          <SelectItem key={account.id} value={account.id}>\n                            {account.name} ({account.email})\n                          </SelectItem>\n                        ))}\n                      </SelectContent>\n                    </Select>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"orderId\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Order ID</FormLabel>\n                    <FormControl>\n                      <Input \n                        placeholder=\"Platform order ID\" \n                        {...field}\n                        data-testid=\"input-order-id\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"orderAmount\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Order Amount (₹)</FormLabel>\n                    <FormControl>\n                      <Input \n                        type=\"number\" \n                        placeholder=\"0\" \n                        {...field}\n                        onChange={(e) => field.onChange(parseFloat(e.target.value) || 0)}\n                        data-testid=\"input-order-amount\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"refundAmount\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Refund Amount (₹)</FormLabel>\n                    <FormControl>\n                      <Input \n                        type=\"number\" \n                        placeholder=\"0\" \n                        {...field}\n                        onChange={(e) => field.onChange(parseFloat(e.target.value) || 0)}\n                        data-testid=\"input-refund-amount\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"mediatorId\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Mediator</FormLabel>\n                    <Select onValueChange={field.onChange} defaultValue={field.value}>\n                      <FormControl>\n                        <SelectTrigger data-testid=\"select-mediator\">\n                          <SelectValue placeholder=\"Select mediator\" />\n                        </SelectTrigger>\n                      </FormControl>\n                      <SelectContent>\n                        {(mediators as any[]).map((mediator: any) => (\n                          <SelectItem key={mediator.id} value={mediator.id}>\n                            {mediator.name}\n                          </SelectItem>\n                        ))}\n                      </SelectContent>\n                    </Select>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"orderDate\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Order Date</FormLabel>\n                    <FormControl>\n                      <Input \n                        type=\"date\" \n                        {...field}\n                        data-testid=\"input-order-date\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-3 lg:gap-4\">\n              <FormField\n                control={form.control}\n                name=\"deliveryDate\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel className=\"text-sm lg:text-base\">Delivery Date (Optional)</FormLabel>\n                    <FormControl>\n                      <Input \n                        type=\"date\" \n                        {...field}\n                        data-testid=\"input-delivery-date\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"refundFormDate\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel className=\"text-sm lg:text-base\">Refund Form Date (Optional)</FormLabel>\n                    <FormControl>\n                      <Input \n                        type=\"date\" \n                        {...field}\n                        data-testid=\"input-refund-form-date\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"remindRefundDate\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel className=\"text-sm lg:text-base\">Remind Refund Date (Optional)</FormLabel>\n                    <FormControl>\n                      <Input \n                        type=\"date\" \n                        {...field}\n                        data-testid=\"input-remind-refund-date\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"refundFormLink\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel className=\"text-sm lg:text-base\">Refund Form Link (Optional)</FormLabel>\n                    <FormControl>\n                      <Input \n                        type=\"url\" \n                        placeholder=\"https://example.com/refund-form\"\n                        {...field}\n                        data-testid=\"input-refund-form-link\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"comments\"\n                render={({ field }) => (\n                  <FormItem className=\"md:col-span-2\">\n                    <FormLabel className=\"text-sm lg:text-base\">Comments (Optional)</FormLabel>\n                    <FormControl>\n                      <Textarea \n                        placeholder=\"Add any additional notes or comments about this order...\"\n                        className=\"min-h-[100px]\"\n                        {...field}\n                        data-testid=\"textarea-comments\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            </div>\n\n            <FormField\n              control={form.control}\n              name=\"productLink\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Product Link (Optional)</FormLabel>\n                  <FormControl>\n                    <Input \n                      placeholder=\"https://...\" \n                      {...field}\n                      data-testid=\"input-product-link\"\n                    />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <div className=\"flex flex-col sm:flex-row justify-end gap-3 sm:gap-4 pt-3 lg:pt-4\">\n              {onCancel && (\n                <Button \n                  type=\"button\" \n                  variant=\"outline\" \n                  onClick={onCancel} \n                  data-testid=\"button-cancel\"\n                  className=\"w-full sm:w-auto\"\n                >\n                  Cancel\n                </Button>\n              )}\n              <Button \n                type=\"submit\" \n                disabled={createOrderMutation.isPending || updateOrderMutation.isPending}\n                data-testid=\"button-submit\"\n                className=\"w-full sm:w-auto\"\n              >\n                {(createOrderMutation.isPending || updateOrderMutation.isPending) \n                  ? (isEditing ? \"Updating...\" : \"Creating...\") \n                  : (isEditing ? \"Update Order\" : \"Create Order\")}\n              </Button>\n            </div>\n          </form>\n        </Form>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":20059},"client/src/components/orders/orders-table.tsx":{"content":"import { useState } from \"react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Input } from \"@/components/ui/input\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogFooter,\n} from \"@/components/ui/dialog\";\nimport { formatCurrency } from \"@/lib/currency\";\nimport { OrderWithRelations } from \"@shared/schema\";\nimport { Search, Eye, Edit2, ExternalLink, Copy } from \"lucide-react\";\nimport { CreateEventButton } from \"@/components/calendar/create-event-button\";\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { isUnauthorizedError } from \"@/lib/authUtils\";\n\ninterface OrdersTableProps {\n  orders: OrderWithRelations[];\n  mediators: any[];\n  isLoading?: boolean;\n  onNewOrder?: () => void;\n  onEditOrder?: (order: OrderWithRelations) => void;\n}\n\nconst statusColors = {\n  \"Ordered\": \"bg-blue-50 text-blue-700\",\n  \"Delivered\": \"bg-green-50 text-green-700\", \n  \"Deliverables Done\": \"bg-purple-50 text-purple-700\",\n  \"Refund Form Done\": \"bg-indigo-50 text-indigo-700\",\n  \"Overdue Passed for Refund Form\": \"bg-red-50 text-red-700\",\n  \"Remind Mediator for Payment\": \"bg-orange-50 text-orange-700\",\n  \"Refunded\": \"bg-emerald-50 text-emerald-700\",\n  \"Cancelled\": \"bg-gray-50 text-gray-700\",\n};\n\nconst platforms = [\"Amazon\", \"Flipkart\", \"Myntra\", \"Meesho\", \"Ajio\", \"Nykaa\", \"Paytm Mall\", \"Snapdeal\"];\n\nconst orderStatuses = [\n  \"Ordered\",\n  \"Delivered\", \n  \"Deliverables Done\",\n  \"Refund Form Done\",\n  \"Overdue Passed for Refund Form\",\n  \"Remind Mediator for Payment\",\n  \"Refunded\",\n  \"Cancelled\"\n];\n\nexport function OrdersTable({ orders, mediators, isLoading, onNewOrder, onEditOrder }: OrdersTableProps) {\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const [filters, setFilters] = useState({\n    status: \"\",\n    platform: \"\",\n    mediatorId: \"\",\n    search: \"\",\n  });\n  const [selectedOrder, setSelectedOrder] = useState<OrderWithRelations | null>(null);\n  const [showOrderDetails, setShowOrderDetails] = useState(false);\n\n  const updateStatusMutation = useMutation({\n    mutationFn: async ({ orderId, newStatus }: { orderId: string; newStatus: string }) => {\n      const res = await apiRequest(\"PUT\", `/api/orders/${orderId}`, { currentStatus: newStatus });\n      return res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/orders\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/dashboard/stats\"] });\n      toast({\n        title: \"Success\",\n        description: \"Order status updated successfully\",\n      });\n    },\n    onError: (error: Error) => {\n      if (isUnauthorizedError(error)) {\n        toast({\n          title: \"Unauthorized\",\n          description: \"You are logged out. Logging in again...\",\n          variant: \"destructive\",\n        });\n        setTimeout(() => {\n          window.location.href = \"/api/login\";\n        }, 500);\n        return;\n      }\n      toast({\n        title: \"Error\",\n        description: \"Failed to update order status. Please try again.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const filteredOrders = orders.filter((order) => {\n    const matchesStatus = !filters.status || filters.status === \"all\" || order.currentStatus === filters.status;\n    const matchesPlatform = !filters.platform || filters.platform === \"all\" || order.platform === filters.platform;\n    const matchesMediator = !filters.mediatorId || filters.mediatorId === \"all\" || order.mediatorId === filters.mediatorId;\n    const matchesSearch = !filters.search || \n      order.productName.toLowerCase().includes(filters.search.toLowerCase()) ||\n      order.orderId.toLowerCase().includes(filters.search.toLowerCase());\n\n    return matchesStatus && matchesPlatform && matchesMediator && matchesSearch;\n  });\n\n  const calculateProfit = (order: OrderWithRelations) => {\n    const profit = order.refundAmount - order.orderAmount;\n    return {\n      amount: profit,\n      isPositive: profit >= 0,\n    };\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"space-y-6\">\n        <Card className=\"card-shadow animate-pulse\">\n          <CardContent className=\"p-6\">\n            <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n              {[1, 2, 3, 4].map((i) => (\n                <div key={i} className=\"space-y-2\">\n                  <div className=\"h-4 bg-muted rounded w-1/2\"></div>\n                  <div className=\"h-10 bg-muted rounded\"></div>\n                </div>\n              ))}\n            </div>\n          </CardContent>\n        </Card>\n        \n        <Card className=\"card-shadow\">\n          <CardContent className=\"p-6\">\n            <div className=\"space-y-4\">\n              {[1, 2, 3, 4, 5].map((i) => (\n                <div key={i} className=\"h-16 bg-muted rounded animate-pulse\"></div>\n              ))}\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-4 lg:space-y-6\">\n      {/* Filters */}\n      <Card className=\"card-shadow\">\n        <CardContent className=\"p-4 lg:p-6\">\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 lg:gap-4\">\n            <div>\n              <label className=\"block text-sm font-medium mb-2\">Status</label>\n              <Select value={filters.status} onValueChange={(value) => setFilters(prev => ({ ...prev, status: value }))}>\n                <SelectTrigger data-testid=\"filter-status\">\n                  <SelectValue placeholder=\"All Statuses\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">All Statuses</SelectItem>\n                  {Object.keys(statusColors).map((status) => (\n                    <SelectItem key={status} value={status}>{status}</SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n            \n            <div>\n              <label className=\"block text-sm font-medium mb-2\">Platform</label>\n              <Select value={filters.platform} onValueChange={(value) => setFilters(prev => ({ ...prev, platform: value }))}>\n                <SelectTrigger data-testid=\"filter-platform\">\n                  <SelectValue placeholder=\"All Platforms\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">All Platforms</SelectItem>\n                  {platforms.map((platform) => (\n                    <SelectItem key={platform} value={platform}>{platform}</SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n            \n            <div>\n              <label className=\"block text-sm font-medium mb-2\">Mediator</label>\n              <Select value={filters.mediatorId} onValueChange={(value) => setFilters(prev => ({ ...prev, mediatorId: value }))}>\n                <SelectTrigger data-testid=\"filter-mediator\">\n                  <SelectValue placeholder=\"All Mediators\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">All Mediators</SelectItem>\n                  {mediators.map((mediator) => (\n                    <SelectItem key={mediator.id} value={mediator.id}>{mediator.name}</SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n            \n            <div>\n              <label className=\"block text-sm font-medium mb-2\">Search</label>\n              <div className=\"relative\">\n                <Input\n                  placeholder=\"Search orders...\"\n                  value={filters.search}\n                  onChange={(e) => setFilters(prev => ({ ...prev, search: e.target.value }))}\n                  className=\"pl-10\"\n                  data-testid=\"input-search\"\n                />\n                <Search className=\"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground\" />\n              </div>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Mobile Card View */}\n      <div className=\"lg:hidden space-y-3\">\n        {filteredOrders.length === 0 ? (\n          <Card className=\"card-shadow\">\n            <CardContent className=\"p-6 text-center text-muted-foreground\">\n              <p>No orders found</p>\n              <p className=\"text-sm mt-1\">\n                {orders.length === 0 ? \"Create your first order to get started\" : \"Try adjusting your filters\"}\n              </p>\n            </CardContent>\n          </Card>\n        ) : (\n          filteredOrders.map((order) => {\n            const profit = calculateProfit(order);\n            return (\n              <Card key={order.id} className=\"card-shadow\" data-testid={`order-card-${order.id}`}>\n                <CardContent className=\"p-4 space-y-3\">\n                  {/* Header */}\n                  <div className=\"flex items-start justify-between\">\n                    <div className=\"flex-1 min-w-0\">\n                      <h3 className=\"font-semibold text-base truncate\" data-testid={`order-product-${order.id}`}>\n                        {order.productName}\n                      </h3>\n                      <p className=\"text-xs text-muted-foreground font-mono\" data-testid={`order-id-${order.id}`}>\n                        {order.orderId}\n                      </p>\n                    </div>\n                    <Badge className={`${statusColors[order.currentStatus as keyof typeof statusColors]} text-[10px] shrink-0 ml-2`}>\n                      {order.currentStatus}\n                    </Badge>\n                  </div>\n\n                  {/* Info Grid */}\n                  <div className=\"grid grid-cols-2 gap-2 text-sm\">\n                    <div>\n                      <span className=\"text-muted-foreground text-xs\">Platform</span>\n                      <p className=\"font-medium\" data-testid={`order-platform-${order.id}`}>{order.platform}</p>\n                    </div>\n                    <div>\n                      <span className=\"text-muted-foreground text-xs\">Mediator</span>\n                      <p className=\"font-medium truncate\" data-testid={`order-mediator-${order.id}`}>{order.mediator.name}</p>\n                    </div>\n                    <div>\n                      <span className=\"text-muted-foreground text-xs\">Order Amount</span>\n                      <p className=\"font-semibold text-blue-600\" data-testid={`order-amount-${order.id}`}>\n                        {formatCurrency(order.orderAmount)}\n                      </p>\n                    </div>\n                    <div>\n                      <span className=\"text-muted-foreground text-xs\">Refund Amount</span>\n                      <p className=\"font-semibold text-green-600\" data-testid={`order-refund-${order.id}`}>\n                        {formatCurrency(order.refundAmount)}\n                      </p>\n                    </div>\n                  </div>\n\n                  {/* Profit/Loss */}\n                  <div className=\"flex items-center justify-between pt-2 border-t\">\n                    <div>\n                      <span className=\"text-muted-foreground text-xs\">Profit/Loss</span>\n                      <p className={`font-semibold ${profit.isPositive ? 'text-green-600' : 'text-red-600'}`} data-testid={`order-profit-${order.id}`}>\n                        {profit.isPositive ? '+' : '-'}{formatCurrency(Math.abs(profit.amount))}\n                      </p>\n                    </div>\n                    <div className=\"flex items-center gap-2\">\n                      <Button \n                        variant=\"outline\" \n                        size=\"sm\"\n                        onClick={() => {\n                          setSelectedOrder(order);\n                          setShowOrderDetails(true);\n                        }}\n                        data-testid={`button-view-${order.id}`}\n                      >\n                        <Eye className=\"w-4 h-4\" />\n                      </Button>\n                      <Button \n                        variant=\"outline\" \n                        size=\"sm\"\n                        onClick={() => onEditOrder?.(order)}\n                        data-testid={`button-edit-${order.id}`}\n                      >\n                        <Edit2 className=\"w-4 h-4\" />\n                      </Button>\n                      <CreateEventButton order={order} />\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            );\n          })\n        )}\n      </div>\n\n      {/* Desktop Table View */}\n      <Card className=\"card-shadow hidden lg:block\">\n        <CardHeader>\n          <div className=\"flex items-center justify-between\">\n            <CardTitle>Orders ({filteredOrders.length})</CardTitle>\n            {onNewOrder && (\n              <Button onClick={onNewOrder} data-testid=\"button-new-order\">\n                New Order\n              </Button>\n            )}\n          </div>\n        </CardHeader>\n        <CardContent>\n          {filteredOrders.length === 0 ? (\n            <div className=\"text-center py-8 text-muted-foreground\">\n              <p>No orders found</p>\n              <p className=\"text-sm mt-1\">\n                {orders.length === 0 ? \"Create your first order to get started\" : \"Try adjusting your filters\"}\n              </p>\n            </div>\n          ) : (\n            <div className=\"overflow-x-auto\">\n              <Table>\n                <TableHeader>\n                  <TableRow>\n                    <TableHead>Product</TableHead>\n                    <TableHead>Platform</TableHead>\n                    <TableHead>Mediator</TableHead>\n                    <TableHead>Order Amount</TableHead>\n                    <TableHead>Refund Amount</TableHead>\n                    <TableHead>Profit/Loss</TableHead>\n                    <TableHead>Status</TableHead>\n                    <TableHead>Actions</TableHead>\n                  </TableRow>\n                </TableHeader>\n                <TableBody>\n                  {filteredOrders.map((order) => {\n                    const profit = calculateProfit(order);\n                    return (\n                      <TableRow key={order.id} className=\"hover:bg-muted/20\" data-testid={`order-row-${order.id}`}>\n                        <TableCell>\n                          <div>\n                            <p className=\"font-medium\" data-testid={`order-product-${order.id}`}>\n                              {order.productName}\n                            </p>\n                            <p className=\"text-sm text-muted-foreground\" data-testid={`order-id-${order.id}`}>\n                              {order.orderId}\n                            </p>\n                          </div>\n                        </TableCell>\n                        <TableCell data-testid={`order-platform-${order.id}`}>\n                          {order.platform}\n                        </TableCell>\n                        <TableCell data-testid={`order-mediator-${order.id}`}>\n                          {order.mediator.name}\n                        </TableCell>\n                        <TableCell className=\"font-medium\" data-testid={`order-amount-${order.id}`}>\n                          {formatCurrency(order.orderAmount)}\n                        </TableCell>\n                        <TableCell className=\"font-medium\" data-testid={`order-refund-${order.id}`}>\n                          {formatCurrency(order.refundAmount)}\n                        </TableCell>\n                        <TableCell \n                          className={`font-medium ${profit.isPositive ? 'text-green-600' : 'text-red-600'}`}\n                          data-testid={`order-profit-${order.id}`}\n                        >\n                          {formatCurrency(Math.abs(profit.amount))}\n                        </TableCell>\n                        <TableCell>\n                          <Select\n                            value={order.currentStatus}\n                            onValueChange={(value) => {\n                              updateStatusMutation.mutate({\n                                orderId: order.id,\n                                newStatus: value\n                              });\n                            }}\n                            disabled={updateStatusMutation.isPending}\n                          >\n                            <SelectTrigger className=\"w-[200px] h-auto p-1\">\n                              <SelectValue>\n                                <Badge \n                                  className={statusColors[order.currentStatus as keyof typeof statusColors]}\n                                  data-testid={`order-status-${order.id}`}\n                                >\n                                  {order.currentStatus}\n                                </Badge>\n                              </SelectValue>\n                            </SelectTrigger>\n                            <SelectContent>\n                              {orderStatuses.map((status) => (\n                                <SelectItem key={status} value={status}>\n                                  <Badge \n                                    className={statusColors[status as keyof typeof statusColors]}\n                                  >\n                                    {status}\n                                  </Badge>\n                                </SelectItem>\n                              ))}\n                            </SelectContent>\n                          </Select>\n                        </TableCell>\n                        <TableCell>\n                          <div className=\"flex items-center space-x-2\">\n                            <Button \n                              variant=\"ghost\" \n                              size=\"sm\" \n                              onClick={() => {\n                                setSelectedOrder(order);\n                                setShowOrderDetails(true);\n                              }}\n                              data-testid={`button-view-${order.id}`}\n                              className=\"text-blue-600 hover:text-blue-700\"\n                            >\n                              <Eye className=\"w-4 h-4 mr-1\" />\n                              View\n                            </Button>\n                            <Button \n                              variant=\"ghost\" \n                              size=\"sm\"\n                              onClick={() => {\n                                onEditOrder?.(order);\n                              }}\n                              data-testid={`button-edit-${order.id}`}\n                              className=\"text-green-600 hover:text-green-700\"\n                            >\n                              <Edit2 className=\"w-4 h-4 mr-1\" />\n                              Edit\n                            </Button>\n                            <CreateEventButton\n                              order={order}\n                            />\n                          </div>\n                        </TableCell>\n                      </TableRow>\n                    );\n                  })}\n                </TableBody>\n              </Table>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Order Details Modal */}\n      <Dialog open={showOrderDetails} onOpenChange={setShowOrderDetails}>\n        <DialogContent className=\"max-w-2xl\">\n          <DialogHeader>\n            <DialogTitle>Order Details</DialogTitle>\n          </DialogHeader>\n          \n          {selectedOrder && (\n            <div className=\"grid gap-6\">\n              {/* Product Information */}\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"text-sm font-medium text-muted-foreground\">Product Name</label>\n                  <p className=\"text-lg font-semibold\">{selectedOrder.productName}</p>\n                </div>\n                <div>\n                  <label className=\"text-sm font-medium text-muted-foreground\">Platform</label>\n                  <p className=\"text-lg\">{selectedOrder.platform}</p>\n                </div>\n              </div>\n\n              {/* Order Information */}\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"text-sm font-medium text-muted-foreground\">Order ID</label>\n                  <div className=\"flex items-center gap-2\">\n                    <p className=\"font-mono\">{selectedOrder.orderId}</p>\n                    <Button\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      onClick={() => {\n                        navigator.clipboard.writeText(selectedOrder.orderId);\n                        toast({ title: \"Copied!\", description: \"Order ID copied to clipboard\" });\n                      }}\n                    >\n                      <Copy className=\"w-4 h-4\" />\n                    </Button>\n                  </div>\n                </div>\n                <div>\n                  <label className=\"text-sm font-medium text-muted-foreground\">Status</label>\n                  <div className=\"mt-1\">\n                    <Badge className={statusColors[selectedOrder.currentStatus as keyof typeof statusColors]}>\n                      {selectedOrder.currentStatus}\n                    </Badge>\n                  </div>\n                </div>\n              </div>\n\n              {/* Financial Information */}\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"text-sm font-medium text-muted-foreground\">Order Amount</label>\n                  <p className=\"text-lg font-semibold text-blue-600\">{formatCurrency(selectedOrder.orderAmount)}</p>\n                </div>\n                <div>\n                  <label className=\"text-sm font-medium text-muted-foreground\">Refund Amount</label>\n                  <p className=\"text-lg font-semibold text-green-600\">{formatCurrency(selectedOrder.refundAmount)}</p>\n                </div>\n              </div>\n\n              {/* Account & Mediator */}\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"text-sm font-medium text-muted-foreground\">Account</label>\n                  <p className=\"text-lg\">{selectedOrder.account.name}</p>\n                  <p className=\"text-sm text-muted-foreground\">{selectedOrder.account.email}</p>\n                </div>\n                <div>\n                  <label className=\"text-sm font-medium text-muted-foreground\">Mediator</label>\n                  <p className=\"text-lg\">{selectedOrder.mediator.name}</p>\n                  <p className=\"text-sm text-muted-foreground\">{selectedOrder.mediator.whatsappNumber}</p>\n                </div>\n              </div>\n\n              {/* Dates */}\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"text-sm font-medium text-muted-foreground\">Order Date</label>\n                  <p className=\"text-lg\">{new Date(selectedOrder.orderDate).toLocaleDateString()}</p>\n                </div>\n                {selectedOrder.deliveryDate && (\n                  <div>\n                    <label className=\"text-sm font-medium text-muted-foreground\">Delivery Date</label>\n                    <p className=\"text-lg\">{new Date(selectedOrder.deliveryDate).toLocaleDateString()}</p>\n                  </div>\n                )}\n              </div>\n\n              {selectedOrder.refundFormDate && (\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div>\n                    <label className=\"text-sm font-medium text-muted-foreground\">Refund Form Date</label>\n                    <p className=\"text-lg\">{new Date(selectedOrder.refundFormDate).toLocaleDateString()}</p>\n                  </div>\n                  {selectedOrder.remindRefundDate && (\n                    <div>\n                      <label className=\"text-sm font-medium text-muted-foreground\">Remind Refund Date</label>\n                      <p className=\"text-lg\">{new Date(selectedOrder.remindRefundDate).toLocaleDateString()}</p>\n                    </div>\n                  )}\n                </div>\n              )}\n\n              {/* Product Link */}\n              {selectedOrder.productLink && (\n                <div>\n                  <label className=\"text-sm font-medium text-muted-foreground\">Product Link</label>\n                  <div className=\"flex items-center gap-2 mt-1\">\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      onClick={() => selectedOrder.productLink && window.open(selectedOrder.productLink, '_blank')}\n                      className=\"flex items-center gap-2\"\n                    >\n                      <ExternalLink className=\"w-4 h-4\" />\n                      Open Product\n                    </Button>\n                  </div>\n                </div>\n              )}\n\n              {/* Refund Form Link */}\n              {selectedOrder.refundFormLink && (\n                <div>\n                  <label className=\"text-sm font-medium text-muted-foreground\">Refund Form Link</label>\n                  <div className=\"flex items-center gap-2 mt-1\">\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      onClick={() => selectedOrder.refundFormLink && window.open(selectedOrder.refundFormLink, '_blank')}\n                      className=\"flex items-center gap-2\"\n                    >\n                      <ExternalLink className=\"w-4 h-4\" />\n                      Open Refund Form\n                    </Button>\n                  </div>\n                </div>\n              )}\n\n              {/* Comments */}\n              {selectedOrder.comments && (\n                <div>\n                  <label className=\"text-sm font-medium text-muted-foreground\">Comments</label>\n                  <div className=\"bg-gray-50 dark:bg-gray-800 rounded-lg p-3 mt-1\">\n                    <p className=\"text-sm whitespace-pre-wrap\">{selectedOrder.comments}</p>\n                  </div>\n                </div>\n              )}\n            </div>\n          )}\n          \n          <DialogFooter>\n            <Button variant=\"outline\" onClick={() => setShowOrderDetails(false)}>\n              Close\n            </Button>\n            <Button onClick={() => {\n              setShowOrderDetails(false);\n              if (selectedOrder) {\n                onEditOrder?.(selectedOrder);\n              }\n            }}>\n              Edit Order\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n","size_bytes":27132},"client/src/components/ui/accordion.tsx":{"content":"import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\n\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","size_bytes":1977},"client/src/components/ui/alert-dialog.tsx":{"content":"import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","size_bytes":4420},"client/src/components/ui/alert.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","size_bytes":1584},"client/src/components/ui/aspect-ratio.tsx":{"content":"import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n","size_bytes":140},"client/src/components/ui/avatar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","size_bytes":1419},"client/src/components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\n        outline: \"text-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  )\n}\n\nexport { Badge, badgeVariants }\n","size_bytes":1128},"client/src/components/ui/breadcrumb.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef<\n  HTMLOListElement,\n  React.ComponentPropsWithoutRef<\"ol\">\n>(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props}\n  />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentPropsWithoutRef<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props}\n  />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props}\n    />\n  )\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef<\n  HTMLSpanElement,\n  React.ComponentPropsWithoutRef<\"span\">\n>(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props}\n  />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\n    {...props}\n  >\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","size_bytes":2712},"client/src/components/ui/button.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","size_bytes":1901},"client/src/components/ui/calendar.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { DayPicker } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ className, ...props }) => (\n          <ChevronLeft className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n        IconRight: ({ className, ...props }) => (\n          <ChevronRight className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n      }}\n      {...props}\n    />\n  )\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }\n","size_bytes":2695},"client/src/components/ui/card.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n","size_bytes":1858},"client/src/components/ui/carousel.tsx":{"content":"import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","size_bytes":6210},"client/src/components/ui/chart.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload.map((item, index) => {\n            const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n            const indicatorColor = color || item.payload.fill || item.color\n\n            return (\n              <div\n                key={item.dataKey}\n                className={cn(\n                  \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                  indicator === \"dot\" && \"items-center\"\n                )}\n              >\n                {formatter && item?.value !== undefined && item.name ? (\n                  formatter(item.value, item.name, item, index, item.payload)\n                ) : (\n                  <>\n                    {itemConfig?.icon ? (\n                      <itemConfig.icon />\n                    ) : (\n                      !hideIndicator && (\n                        <div\n                          className={cn(\n                            \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                            {\n                              \"h-2.5 w-2.5\": indicator === \"dot\",\n                              \"w-1\": indicator === \"line\",\n                              \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                indicator === \"dashed\",\n                              \"my-0.5\": nestLabel && indicator === \"dashed\",\n                            }\n                          )}\n                          style={\n                            {\n                              \"--color-bg\": indicatorColor,\n                              \"--color-border\": indicatorColor,\n                            } as React.CSSProperties\n                          }\n                        />\n                      )\n                    )}\n                    <div\n                      className={cn(\n                        \"flex flex-1 justify-between leading-none\",\n                        nestLabel ? \"items-end\" : \"items-center\"\n                      )}\n                    >\n                      <div className=\"grid gap-1.5\">\n                        {nestLabel ? tooltipLabel : null}\n                        <span className=\"text-muted-foreground\">\n                          {itemConfig?.label || item.name}\n                        </span>\n                      </div>\n                      {item.value && (\n                        <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                          {item.value.toLocaleString()}\n                        </span>\n                      )}\n                    </div>\n                  </>\n                )}\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload.map((item) => {\n          const key = `${nameKey || item.dataKey || \"value\"}`\n          const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n          return (\n            <div\n              key={item.value}\n              className={cn(\n                \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n              )}\n            >\n              {itemConfig?.icon && !hideIcon ? (\n                <itemConfig.icon />\n              ) : (\n                <div\n                  className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                  style={{\n                    backgroundColor: item.color,\n                  }}\n                />\n              )}\n              {itemConfig?.label}\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","size_bytes":10481},"client/src/components/ui/checkbox.tsx":{"content":"import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","size_bytes":1056},"client/src/components/ui/collapsible.tsx":{"content":"\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","size_bytes":329},"client/src/components/ui/command.tsx":{"content":"import * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","size_bytes":4885},"client/src/components/ui/context-menu.tsx":{"content":"import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","size_bytes":7428},"client/src/components/ui/dialog.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","size_bytes":3848},"client/src/components/ui/drawer.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","size_bytes":3021},"client/src/components/ui/dropdown-menu.tsx":{"content":"import * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n","size_bytes":7609},"client/src/components/ui/form.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","size_bytes":4120},"client/src/components/ui/hover-card.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef<\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","size_bytes":1251},"client/src/components/ui/input-otp.tsx":{"content":"import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Dot } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef<\n  React.ElementRef<typeof OTPInput>,\n  React.ComponentPropsWithoutRef<typeof OTPInput>\n>(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\n      containerClassName\n    )}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props}\n  />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\n>(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-2 ring-ring ring-offset-background\",\n        className\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Dot />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","size_bytes":2154},"client/src/components/ui/input.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","size_bytes":791},"client/src/components/ui/label.tsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","size_bytes":710},"client/src/components/ui/menubar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-10 items-center space-x-1 rounded-md border bg-background p-1\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n","size_bytes":8605},"client/src/components/ui/navigation-menu.tsx":{"content":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","size_bytes":5128},"client/src/components/ui/pagination.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props}\n  />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<ButtonProps, \"size\"> &\n  React.ComponentProps<\"a\">\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(\n      buttonVariants({\n        variant: isActive ? \"outline\" : \"ghost\",\n        size,\n      }),\n      className\n    )}\n    {...props}\n  />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}\n  >\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}\n  >\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationEllipsis,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n}\n","size_bytes":2751},"client/src/components/ui/popover.tsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }\n","size_bytes":1280},"client/src/components/ui/progress.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n","size_bytes":791},"client/src/components/ui/radio-group.tsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","size_bytes":1467},"client/src/components/ui/resizable.tsx":{"content":"\"use client\"\n\nimport { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","size_bytes":1723},"client/src/components/ui/scroll-area.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","size_bytes":1642},"client/src/components/ui/select.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","size_bytes":5742},"client/src/components/ui/separator.tsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n","size_bytes":756},"client/src/components/ui/sheet.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","size_bytes":4281},"client/src/components/ui/sidebar.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { VariantProps, cva } from \"class-variance-authority\"\nimport { PanelLeft } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nconst SidebarProvider = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    defaultOpen?: boolean\n    open?: boolean\n    onOpenChange?: (open: boolean) => void\n  }\n>(\n  (\n    {\n      defaultOpen = true,\n      open: openProp,\n      onOpenChange: setOpenProp,\n      className,\n      style,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const isMobile = useIsMobile()\n    const [openMobile, setOpenMobile] = React.useState(false)\n\n    // This is the internal state of the sidebar.\n    // We use openProp and setOpenProp for control from outside the component.\n    const [_open, _setOpen] = React.useState(defaultOpen)\n    const open = openProp ?? _open\n    const setOpen = React.useCallback(\n      (value: boolean | ((value: boolean) => boolean)) => {\n        const openState = typeof value === \"function\" ? value(open) : value\n        if (setOpenProp) {\n          setOpenProp(openState)\n        } else {\n          _setOpen(openState)\n        }\n\n        // This sets the cookie to keep the sidebar state.\n        document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n      },\n      [setOpenProp, open]\n    )\n\n    // Helper to toggle the sidebar.\n    const toggleSidebar = React.useCallback(() => {\n      return isMobile\n        ? setOpenMobile((open) => !open)\n        : setOpen((open) => !open)\n    }, [isMobile, setOpen, setOpenMobile])\n\n    // Adds a keyboard shortcut to toggle the sidebar.\n    React.useEffect(() => {\n      const handleKeyDown = (event: KeyboardEvent) => {\n        if (\n          event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n          (event.metaKey || event.ctrlKey)\n        ) {\n          event.preventDefault()\n          toggleSidebar()\n        }\n      }\n\n      window.addEventListener(\"keydown\", handleKeyDown)\n      return () => window.removeEventListener(\"keydown\", handleKeyDown)\n    }, [toggleSidebar])\n\n    // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n    // This makes it easier to style the sidebar with Tailwind classes.\n    const state = open ? \"expanded\" : \"collapsed\"\n\n    const contextValue = React.useMemo<SidebarContextProps>(\n      () => ({\n        state,\n        open,\n        setOpen,\n        isMobile,\n        openMobile,\n        setOpenMobile,\n        toggleSidebar,\n      }),\n      [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n    )\n\n    return (\n      <SidebarContext.Provider value={contextValue}>\n        <TooltipProvider delayDuration={0}>\n          <div\n            style={\n              {\n                \"--sidebar-width\": SIDEBAR_WIDTH,\n                \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n                ...style,\n              } as React.CSSProperties\n            }\n            className={cn(\n              \"group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar\",\n              className\n            )}\n            ref={ref}\n            {...props}\n          >\n            {children}\n          </div>\n        </TooltipProvider>\n      </SidebarContext.Provider>\n    )\n  }\n)\nSidebarProvider.displayName = \"SidebarProvider\"\n\nconst Sidebar = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    side?: \"left\" | \"right\"\n    variant?: \"sidebar\" | \"floating\" | \"inset\"\n    collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n  }\n>(\n  (\n    {\n      side = \"left\",\n      variant = \"sidebar\",\n      collapsible = \"offcanvas\",\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n    if (collapsible === \"none\") {\n      return (\n        <div\n          className={cn(\n            \"flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground\",\n            className\n          )}\n          ref={ref}\n          {...props}\n        >\n          {children}\n        </div>\n      )\n    }\n\n    if (isMobile) {\n      return (\n        <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n          <SheetContent\n            data-sidebar=\"sidebar\"\n            data-mobile=\"true\"\n            className=\"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden\"\n            style={\n              {\n                \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n              } as React.CSSProperties\n            }\n            side={side}\n          >\n            <SheetHeader className=\"sr-only\">\n              <SheetTitle>Sidebar</SheetTitle>\n              <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n            </SheetHeader>\n            <div className=\"flex h-full w-full flex-col\">{children}</div>\n          </SheetContent>\n        </Sheet>\n      )\n    }\n\n    return (\n      <div\n        ref={ref}\n        className=\"group peer hidden text-sidebar-foreground md:block\"\n        data-state={state}\n        data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n        data-variant={variant}\n        data-side={side}\n      >\n        {/* This is what handles the sidebar gap on desktop */}\n        <div\n          className={cn(\n            \"relative w-[--sidebar-width] bg-transparent transition-[width] duration-200 ease-linear\",\n            \"group-data-[collapsible=offcanvas]:w-0\",\n            \"group-data-[side=right]:rotate-180\",\n            variant === \"floating\" || variant === \"inset\"\n              ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]\"\n              : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon]\"\n          )}\n        />\n        <div\n          className={cn(\n            \"fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] duration-200 ease-linear md:flex\",\n            side === \"left\"\n              ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n              : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n            // Adjust the padding for floating and inset variants.\n            variant === \"floating\" || variant === \"inset\"\n              ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]\"\n              : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n            className\n          )}\n          {...props}\n        >\n          <div\n            data-sidebar=\"sidebar\"\n            className=\"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow\"\n          >\n            {children}\n          </div>\n        </div>\n      </div>\n    )\n  }\n)\nSidebar.displayName = \"Sidebar\"\n\nconst SidebarTrigger = React.forwardRef<\n  React.ElementRef<typeof Button>,\n  React.ComponentProps<typeof Button>\n>(({ className, onClick, ...props }, ref) => {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      ref={ref}\n      data-sidebar=\"trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeft />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n})\nSidebarTrigger.displayName = \"SidebarTrigger\"\n\nconst SidebarRail = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\">\n>(({ className, ...props }, ref) => {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <button\n      ref={ref}\n      data-sidebar=\"rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex\",\n        \"[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarRail.displayName = \"SidebarRail\"\n\nconst SidebarInset = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"main\">\n>(({ className, ...props }, ref) => {\n  return (\n    <main\n      ref={ref}\n      className={cn(\n        \"relative flex w-full flex-1 flex-col bg-background\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarInset.displayName = \"SidebarInset\"\n\nconst SidebarInput = React.forwardRef<\n  React.ElementRef<typeof Input>,\n  React.ComponentProps<typeof Input>\n>(({ className, ...props }, ref) => {\n  return (\n    <Input\n      ref={ref}\n      data-sidebar=\"input\"\n      className={cn(\n        \"h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarInput.displayName = \"SidebarInput\"\n\nconst SidebarHeader = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarHeader.displayName = \"SidebarHeader\"\n\nconst SidebarFooter = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarFooter.displayName = \"SidebarFooter\"\n\nconst SidebarSeparator = React.forwardRef<\n  React.ElementRef<typeof Separator>,\n  React.ComponentProps<typeof Separator>\n>(({ className, ...props }, ref) => {\n  return (\n    <Separator\n      ref={ref}\n      data-sidebar=\"separator\"\n      className={cn(\"mx-2 w-auto bg-sidebar-border\", className)}\n      {...props}\n    />\n  )\n})\nSidebarSeparator.displayName = \"SidebarSeparator\"\n\nconst SidebarContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarContent.displayName = \"SidebarContent\"\n\nconst SidebarGroup = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarGroup.displayName = \"SidebarGroup\"\n\nconst SidebarGroupLabel = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & { asChild?: boolean }\n>(({ className, asChild = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarGroupLabel.displayName = \"SidebarGroupLabel\"\n\nconst SidebarGroupAction = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & { asChild?: boolean }\n>(({ className, asChild = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 after:md:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarGroupAction.displayName = \"SidebarGroupAction\"\n\nconst SidebarGroupContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    data-sidebar=\"group-content\"\n    className={cn(\"w-full text-sm\", className)}\n    {...props}\n  />\n))\nSidebarGroupContent.displayName = \"SidebarGroupContent\"\n\nconst SidebarMenu = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    data-sidebar=\"menu\"\n    className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n    {...props}\n  />\n))\nSidebarMenu.displayName = \"SidebarMenu\"\n\nconst SidebarMenuItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    data-sidebar=\"menu-item\"\n    className={cn(\"group/menu-item relative\", className)}\n    {...props}\n  />\n))\nSidebarMenuItem.displayName = \"SidebarMenuItem\"\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:!p-0\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst SidebarMenuButton = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & {\n    asChild?: boolean\n    isActive?: boolean\n    tooltip?: string | React.ComponentProps<typeof TooltipContent>\n  } & VariantProps<typeof sidebarMenuButtonVariants>\n>(\n  (\n    {\n      asChild = false,\n      isActive = false,\n      variant = \"default\",\n      size = \"default\",\n      tooltip,\n      className,\n      ...props\n    },\n    ref\n  ) => {\n    const Comp = asChild ? Slot : \"button\"\n    const { isMobile, state } = useSidebar()\n\n    const button = (\n      <Comp\n        ref={ref}\n        data-sidebar=\"menu-button\"\n        data-size={size}\n        data-active={isActive}\n        className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n        {...props}\n      />\n    )\n\n    if (!tooltip) {\n      return button\n    }\n\n    if (typeof tooltip === \"string\") {\n      tooltip = {\n        children: tooltip,\n      }\n    }\n\n    return (\n      <Tooltip>\n        <TooltipTrigger asChild>{button}</TooltipTrigger>\n        <TooltipContent\n          side=\"right\"\n          align=\"center\"\n          hidden={state !== \"collapsed\" || isMobile}\n          {...tooltip}\n        />\n      </Tooltip>\n    )\n  }\n)\nSidebarMenuButton.displayName = \"SidebarMenuButton\"\n\nconst SidebarMenuAction = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & {\n    asChild?: boolean\n    showOnHover?: boolean\n  }\n>(({ className, asChild = false, showOnHover = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 after:md:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarMenuAction.displayName = \"SidebarMenuAction\"\n\nconst SidebarMenuBadge = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    data-sidebar=\"menu-badge\"\n    className={cn(\n      \"pointer-events-none absolute right-1 flex h-5 min-w-5 select-none items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground\",\n      \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n      \"peer-data-[size=sm]/menu-button:top-1\",\n      \"peer-data-[size=default]/menu-button:top-1.5\",\n      \"peer-data-[size=lg]/menu-button:top-2.5\",\n      \"group-data-[collapsible=icon]:hidden\",\n      className\n    )}\n    {...props}\n  />\n))\nSidebarMenuBadge.displayName = \"SidebarMenuBadge\"\n\nconst SidebarMenuSkeleton = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    showIcon?: boolean\n  }\n>(({ className, showIcon = false, ...props }, ref) => {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-[--skeleton-width] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n})\nSidebarMenuSkeleton.displayName = \"SidebarMenuSkeleton\"\n\nconst SidebarMenuSub = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    data-sidebar=\"menu-sub\"\n    className={cn(\n      \"mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5\",\n      \"group-data-[collapsible=icon]:hidden\",\n      className\n    )}\n    {...props}\n  />\n))\nSidebarMenuSub.displayName = \"SidebarMenuSub\"\n\nconst SidebarMenuSubItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ ...props }, ref) => <li ref={ref} {...props} />)\nSidebarMenuSubItem.displayName = \"SidebarMenuSubItem\"\n\nconst SidebarMenuSubButton = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentProps<\"a\"> & {\n    asChild?: boolean\n    size?: \"sm\" | \"md\"\n    isActive?: boolean\n  }\n>(({ asChild = false, size = \"md\", isActive, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarMenuSubButton.displayName = \"SidebarMenuSubButton\"\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","size_bytes":23567},"client/src/components/ui/skeleton.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","size_bytes":261},"client/src/components/ui/slider.tsx":{"content":"import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n","size_bytes":1077},"client/src/components/ui/switch.tsx":{"content":"import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n","size_bytes":1139},"client/src/components/ui/table.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","size_bytes":2765},"client/src/components/ui/tabs.tsx":{"content":"import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","size_bytes":1883},"client/src/components/ui/textarea.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n","size_bytes":689},"client/src/components/ui/toast.tsx":{"content":"import * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","size_bytes":4845},"client/src/components/ui/toaster.tsx":{"content":"import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","size_bytes":772},"client/src/components/ui/toggle-group.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","size_bytes":1753},"client/src/components/ui/toggle.tsx":{"content":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-2\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-10 px-3 min-w-10\",\n        sm: \"h-9 px-2.5 min-w-9\",\n        lg: \"h-11 px-5 min-w-11\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","size_bytes":1527},"client/src/components/ui/tooltip.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","size_bytes":1209},"server/google-calendar.ts":{"content":"import { OAuth2Client } from 'google-auth-library';\nimport { google } from 'googleapis';\n\nconst GOOGLE_CLIENT_ID = process.env.GOOGLE_CLIENT_ID;\nconst GOOGLE_CLIENT_SECRET = process.env.GOOGLE_CLIENT_SECRET;\n// Get the current domain from the request or use localhost for development\nconst getRedirectUri = (req?: any) => {\n  if (process.env.NODE_ENV === 'production' && req) {\n    const host = req.get('host');\n    return `https://${host}/api/auth/google/callback`;\n  }\n  return 'http://localhost:5000/api/auth/google/callback';\n};\n\nexport class GoogleCalendarService {\n  private oauth2Client: OAuth2Client;\n\n  constructor() {\n    // Initialize with a default redirect URI, will be updated in getAuthUrl\n    this.oauth2Client = new OAuth2Client(\n      GOOGLE_CLIENT_ID,\n      GOOGLE_CLIENT_SECRET,\n      'http://localhost:5000/api/auth/google/callback'\n    );\n  }\n\n  getAuthUrl(userId: string, req?: any): string {\n    // Update OAuth2Client with correct redirect URI\n    const redirectUri = getRedirectUri(req);\n    this.oauth2Client = new OAuth2Client(\n      GOOGLE_CLIENT_ID,\n      GOOGLE_CLIENT_SECRET,\n      redirectUri\n    );\n    const scopes = [\n      'https://www.googleapis.com/auth/calendar',\n      'https://www.googleapis.com/auth/calendar.events'\n    ];\n\n    return this.oauth2Client.generateAuthUrl({\n      access_type: 'offline',\n      scope: scopes,\n      state: userId, // Pass userId to link the callback to the user\n      prompt: 'consent' // Force consent to get refresh token\n    });\n  }\n\n  async exchangeCodeForTokens(code: string) {\n    try {\n      const { tokens } = await this.oauth2Client.getToken(code);\n      return tokens;\n    } catch (error) {\n      console.error('Error exchanging code for tokens:', error);\n      throw error;\n    }\n  }\n\n  async createCalendarEvent(\n    accessToken: string,\n    refreshToken: string,\n    eventData: {\n      title: string;\n      description: string;\n      startDateTime: Date;\n      endDateTime: Date;\n      calendarId?: string;\n    }\n  ) {\n    try {\n      // Set credentials\n      this.oauth2Client.setCredentials({\n        access_token: accessToken,\n        refresh_token: refreshToken\n      });\n\n      const calendar = google.calendar({ version: 'v3', auth: this.oauth2Client });\n\n      const event = {\n        summary: eventData.title,\n        description: eventData.description,\n        start: {\n          dateTime: eventData.startDateTime.toISOString(),\n          timeZone: 'Asia/Kolkata', // Indian timezone\n        },\n        end: {\n          dateTime: eventData.endDateTime.toISOString(),\n          timeZone: 'Asia/Kolkata',\n        },\n        reminders: {\n          useDefault: false,\n          overrides: [\n            { method: 'email', minutes: 24 * 60 }, // 1 day before\n            { method: 'popup', minutes: 60 }, // 1 hour before\n          ],\n        },\n      };\n\n      const response = await calendar.events.insert({\n        calendarId: eventData.calendarId || 'primary',\n        requestBody: event,\n      });\n\n      return response.data;\n    } catch (error) {\n      console.error('Error creating calendar event:', error);\n      throw error;\n    }\n  }\n\n  async updateCalendarEvent(\n    accessToken: string,\n    refreshToken: string,\n    eventId: string,\n    eventData: {\n      title: string;\n      description: string;\n      startDateTime: Date;\n      endDateTime: Date;\n      calendarId?: string;\n    }\n  ) {\n    try {\n      this.oauth2Client.setCredentials({\n        access_token: accessToken,\n        refresh_token: refreshToken\n      });\n\n      const calendar = google.calendar({ version: 'v3', auth: this.oauth2Client });\n\n      const event = {\n        summary: eventData.title,\n        description: eventData.description,\n        start: {\n          dateTime: eventData.startDateTime.toISOString(),\n          timeZone: 'Asia/Kolkata',\n        },\n        end: {\n          dateTime: eventData.endDateTime.toISOString(),\n          timeZone: 'Asia/Kolkata',\n        },\n        reminders: {\n          useDefault: false,\n          overrides: [\n            { method: 'email', minutes: 24 * 60 },\n            { method: 'popup', minutes: 60 },\n          ],\n        },\n      };\n\n      const response = await calendar.events.update({\n        calendarId: eventData.calendarId || 'primary',\n        eventId,\n        requestBody: event,\n      });\n\n      return response.data;\n    } catch (error) {\n      console.error('Error updating calendar event:', error);\n      throw error;\n    }\n  }\n\n  async deleteCalendarEvent(\n    accessToken: string,\n    refreshToken: string,\n    eventId: string,\n    calendarId?: string\n  ) {\n    try {\n      this.oauth2Client.setCredentials({\n        access_token: accessToken,\n        refresh_token: refreshToken\n      });\n\n      const calendar = google.calendar({ version: 'v3', auth: this.oauth2Client });\n\n      await calendar.events.delete({\n        calendarId: calendarId || 'primary',\n        eventId,\n      });\n\n      return true;\n    } catch (error) {\n      console.error('Error deleting calendar event:', error);\n      // Don't throw - if event doesn't exist, that's okay\n      return false;\n    }\n  }\n\n  async refreshAccessToken(refreshToken: string) {\n    try {\n      this.oauth2Client.setCredentials({\n        refresh_token: refreshToken\n      });\n      \n      const { credentials } = await this.oauth2Client.refreshAccessToken();\n      return credentials;\n    } catch (error) {\n      console.error('Error refreshing access token:', error);\n      throw error;\n    }\n  }\n}\n\nexport const googleCalendarService = new GoogleCalendarService();","size_bytes":5554},"client/src/components/calendar/calendar-connect-button.tsx":{"content":"import { Button } from \"@/components/ui/button\";\nimport { Link as LinkIcon, Loader2 } from \"lucide-react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\n\nexport function CalendarConnectButton() {\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n\n  // Mutation to get auth URL and redirect\n  const connectMutation = useMutation({\n    mutationFn: () => apiRequest('GET', '/api/calendar/auth'),\n    onSuccess: (data: any) => {\n      if (data?.authUrl) {\n        // Redirect to Google OAuth\n        window.location.href = data.authUrl;\n      }\n    },\n    onError: (error) => {\n      console.error('Calendar auth error:', error);\n      toast({\n        title: \"Connection Failed\",\n        description: \"Failed to connect to Google Calendar. Please try again.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleConnect = () => {\n    connectMutation.mutate();\n  };\n\n  return (\n    <Button \n      onClick={handleConnect} \n      disabled={connectMutation.isPending}\n      variant=\"outline\"\n      className=\"w-full\"\n      data-testid=\"button-connect-calendar\"\n    >\n      {connectMutation.isPending ? (\n        <>\n          <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n          Connecting...\n        </>\n      ) : (\n        <>\n          <LinkIcon className=\"w-4 h-4 mr-2\" />\n          Connect Google Calendar\n        </>\n      )}\n    </Button>\n  );\n}","size_bytes":1516},"client/src/components/calendar/create-event-button.tsx":{"content":"import { Button } from \"@/components/ui/button\";\nimport { Calendar } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { createOrderCalendarUrls } from \"@/lib/google-calendar-url\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport { OrderWithRelations } from \"@shared/schema\";\n\ninterface CreateEventButtonProps {\n  order: OrderWithRelations;\n  disabled?: boolean;\n}\n\nexport function CreateEventButton({ \n  order,\n  disabled = false \n}: CreateEventButtonProps) {\n  const { toast } = useToast();\n\n  // Safety check for order\n  if (!order) {\n    return null;\n  }\n\n  const toDate = (dateInput: string | Date | null | undefined): Date | null => {\n    if (!dateInput) return null;\n    return typeof dateInput === 'string' ? new Date(dateInput) : dateInput;\n  };\n\n  const hasDeliveryDate = !!toDate(order.deliveryDate);\n\n  // Don't show button if no delivery date (all reminders are based on delivery date)\n  if (!hasDeliveryDate) {\n    return null;\n  }\n\n  const calendarUrls = createOrderCalendarUrls(order);\n\n  const handleAddToCalendar = (url: string, eventType: string) => {\n    window.open(url, '_blank');\n    toast({\n      title: \"Opening Google Calendar\",\n      description: `Click 'Save' in Google Calendar to add your ${eventType} reminder!`,\n    });\n  };\n\n  const handleAddAllEvents = () => {\n    const events = [\n      { url: calendarUrls.delivery, name: 'delivery' },\n      { url: calendarUrls.reviewRating, name: 'review rating' },\n      { url: calendarUrls.refundForm, name: 'refund form' },\n      { url: calendarUrls.mediatorPayment, name: 'mediator follow-up' },\n    ].filter(e => e.url);\n\n    events.forEach((event, index) => {\n      setTimeout(() => {\n        if (event.url) {\n          handleAddToCalendar(event.url, event.name);\n        }\n      }, index * 500);\n    });\n\n    toast({\n      title: \"Adding All Events\",\n      description: `Adding ${events.length} reminders to your calendar!`,\n    });\n  };\n\n  // Always show dropdown menu with all reminder options\n  return (\n    <DropdownMenu>\n      <DropdownMenuTrigger asChild>\n        <Button \n          disabled={disabled}\n          variant=\"outline\"\n          size=\"sm\"\n          data-testid={`button-add-calendar-${order.id}`}\n        >\n          <Calendar className=\"w-4 h-4 mr-2\" />\n          Add to Calendar\n        </Button>\n      </DropdownMenuTrigger>\n      <DropdownMenuContent align=\"end\" className=\"w-64\">\n        {calendarUrls.delivery && (\n          <DropdownMenuItem\n            onClick={() => handleAddToCalendar(calendarUrls.delivery!, 'delivery')}\n            data-testid={`menu-delivery-${order.id}`}\n          >\n            <div className=\"flex flex-col items-start\">\n              <span className=\"font-medium\">📦 Delivery Day</span>\n              <span className=\"text-xs text-muted-foreground\">Product arrival notification</span>\n            </div>\n          </DropdownMenuItem>\n        )}\n        {calendarUrls.reviewRating && (\n          <DropdownMenuItem\n            onClick={() => handleAddToCalendar(calendarUrls.reviewRating!, 'review rating')}\n            data-testid={`menu-review-${order.id}`}\n          >\n            <div className=\"flex flex-col items-start\">\n              <span className=\"font-medium\">⭐ Complete Review (Day +2)</span>\n              <span className=\"text-xs text-muted-foreground\">Submit rating & review</span>\n            </div>\n          </DropdownMenuItem>\n        )}\n        {calendarUrls.refundForm && (\n          <DropdownMenuItem\n            onClick={() => handleAddToCalendar(calendarUrls.refundForm!, 'refund form')}\n            data-testid={`menu-refund-${order.id}`}\n          >\n            <div className=\"flex flex-col items-start\">\n              <span className=\"font-medium\">💰 Refund Form (Day +7)</span>\n              <span className=\"text-xs text-muted-foreground\">Fill & submit refund form</span>\n            </div>\n          </DropdownMenuItem>\n        )}\n        {calendarUrls.mediatorPayment && (\n          <DropdownMenuItem\n            onClick={() => handleAddToCalendar(calendarUrls.mediatorPayment!, 'mediator follow-up')}\n            data-testid={`menu-mediator-${order.id}`}\n          >\n            <div className=\"flex flex-col items-start\">\n              <span className=\"font-medium\">💸 Payment Check (Day +20)</span>\n              <span className=\"text-xs text-muted-foreground\">Contact mediator for payment</span>\n            </div>\n          </DropdownMenuItem>\n        )}\n        <DropdownMenuItem\n          onClick={handleAddAllEvents}\n          data-testid={`menu-all-${order.id}`}\n          className=\"border-t mt-1 pt-2\"\n        >\n          <div className=\"flex flex-col items-start\">\n            <span className=\"font-medium\">✨ Add All Reminders</span>\n            <span className=\"text-xs text-muted-foreground\">Complete timeline for this order</span>\n          </div>\n        </DropdownMenuItem>\n      </DropdownMenuContent>\n    </DropdownMenu>\n  );\n}","size_bytes":5031},"server/db-migration.ts":{"content":"import { neon } from '@neondatabase/serverless';\n\nconst sql = neon(process.env.DATABASE_URL!);\n\nexport async function runStartupMigrations() {\n  try {\n    console.log('Running startup migrations...');\n    \n    // Add Google Calendar token columns if they don't exist\n    await sql`\n      ALTER TABLE user_settings \n      ADD COLUMN IF NOT EXISTS google_access_token TEXT,\n      ADD COLUMN IF NOT EXISTS google_refresh_token TEXT,\n      ADD COLUMN IF NOT EXISTS google_token_expiry TIMESTAMP\n    `;\n    \n    // Create reminder_category enum if it doesn't exist\n    await sql`\n      DO $$ BEGIN\n        CREATE TYPE reminder_category AS ENUM (\n          'General',\n          'Delivery',\n          'Review_Rating',\n          'Refund_Form',\n          'Mediator_Payment'\n        );\n      EXCEPTION\n        WHEN duplicate_object THEN null;\n      END $$;\n    `;\n    \n    // Add reminderCategory column to notifications table if it doesn't exist\n    await sql`\n      ALTER TABLE notifications \n      ADD COLUMN IF NOT EXISTS reminder_category reminder_category DEFAULT 'General'\n    `;\n    \n    console.log('Startup migrations completed successfully');\n  } catch (error) {\n    console.error('Error running startup migrations:', error);\n    // Don't throw - let the app continue running\n  }\n}","size_bytes":1282},"server/calendar-export.ts":{"content":"import { format } from 'date-fns';\n\ninterface CalendarEvent {\n  title: string;\n  description: string;\n  startDateTime: Date;\n  endDateTime: Date;\n  location?: string;\n}\n\nexport function generateICSFile(events: CalendarEvent[]): string {\n  const formatDate = (date: Date): string => {\n    return format(date, \"yyyyMMdd'T'HHmmss'Z'\");\n  };\n\n  const generateUID = (): string => {\n    return `${Date.now()}-${Math.random().toString(36).substr(2, 9)}@reviewer-system.com`;\n  };\n\n  const escapeText = (text: string): string => {\n    return text\n      .replace(/\\\\/g, '\\\\\\\\')\n      .replace(/;/g, '\\\\;')\n      .replace(/,/g, '\\\\,')\n      .replace(/\\n/g, '\\\\n');\n  };\n\n  let icsContent = [\n    'BEGIN:VCALENDAR',\n    'VERSION:2.0',\n    'PRODID:-//Online Reviewer System//Calendar Export//EN',\n    'CALSCALE:GREGORIAN',\n    'METHOD:PUBLISH'\n  ];\n\n  for (const event of events) {\n    const startDate = formatDate(event.startDateTime);\n    const endDate = formatDate(event.endDateTime);\n    const uid = generateUID();\n    \n    icsContent.push(\n      'BEGIN:VEVENT',\n      `UID:${uid}`,\n      `DTSTART:${startDate}`,\n      `DTEND:${endDate}`,\n      `SUMMARY:${escapeText(event.title)}`,\n      `DESCRIPTION:${escapeText(event.description)}`,\n      ...(event.location ? [`LOCATION:${escapeText(event.location)}`] : []),\n      `DTSTAMP:${formatDate(new Date())}`,\n      'STATUS:CONFIRMED',\n      'BEGIN:VALARM',\n      'TRIGGER:-PT1H',\n      'ACTION:DISPLAY',\n      'DESCRIPTION:Reminder',\n      'END:VALARM',\n      'END:VEVENT'\n    );\n  }\n\n  icsContent.push('END:VCALENDAR');\n  return icsContent.join('\\r\\n');\n}\n\nexport function createOrderCalendarEvents(order: {\n  id: string;\n  productName: string;\n  orderId: string;\n  platform: string;\n  deliveryDate?: Date | string | null;\n  refundFormDate?: Date | string | null;\n}): CalendarEvent[] {\n  const events: CalendarEvent[] = [];\n\n  // Helper function to convert string dates to Date objects\n  const toDate = (dateInput: string | Date | null | undefined): Date | null => {\n    if (!dateInput) return null;\n    return typeof dateInput === 'string' ? new Date(dateInput) : dateInput;\n  };\n\n  const deliveryDate = toDate(order.deliveryDate);\n  const refundDate = toDate(order.refundFormDate);\n\n  // Delivery reminder event\n  if (deliveryDate) {\n    const deliveryStart = new Date(deliveryDate);\n    deliveryStart.setHours(10, 0, 0, 0); // 10 AM\n    const deliveryEnd = new Date(deliveryStart);\n    deliveryEnd.setHours(11, 0, 0, 0); // 11 AM\n\n    events.push({\n      title: `📦 Product Delivery: ${order.productName}`,\n      description: `Order ID: ${order.orderId}\\\\nPlatform: ${order.platform}\\\\nExpected delivery for: ${order.productName}\\\\n\\\\nNext Steps:\\\\n- Check for delivery confirmation\\\\n- Unbox and test the product\\\\n- Prepare for review submission`,\n      startDateTime: deliveryStart,\n      endDateTime: deliveryEnd,\n    });\n  }\n\n  // Refund form reminder event\n  if (refundDate) {\n    const refundStart = new Date(refundDate);\n    refundStart.setHours(14, 0, 0, 0); // 2 PM\n    const refundEnd = new Date(refundStart);\n    refundEnd.setHours(15, 0, 0, 0); // 3 PM\n\n    events.push({\n      title: `💰 Submit Refund Form: ${order.productName}`,\n      description: `Order ID: ${order.orderId}\\\\nPlatform: ${order.platform}\\\\nRefund form deadline for: ${order.productName}\\\\n\\\\nAction Required:\\\\n- Submit product review on platform\\\\n- Fill and submit refund form\\\\n- Upload required screenshots`,\n      startDateTime: refundStart,\n      endDateTime: refundEnd,\n    });\n  }\n\n  return events;\n}","size_bytes":3540},"client/src/lib/google-calendar-url.ts":{"content":"import { format } from 'date-fns';\nimport type { OrderWithRelations } from '@shared/schema';\n\ninterface CalendarEvent {\n  title: string;\n  description: string;\n  startDateTime: Date;\n  endDateTime: Date;\n  location?: string;\n}\n\n// Format date for Google Calendar URL (YYYYMMDDTHHMMSSZ)\nfunction formatGoogleCalendarDate(date: Date): string {\n  return format(date, \"yyyyMMdd'T'HHmmss'Z'\");\n}\n\n// Generate Google Calendar URL\nexport function createGoogleCalendarUrl(event: CalendarEvent): string {\n  const startDate = formatGoogleCalendarDate(event.startDateTime);\n  const endDate = formatGoogleCalendarDate(event.endDateTime);\n  \n  const params = new URLSearchParams({\n    action: 'TEMPLATE',\n    text: event.title,\n    dates: `${startDate}/${endDate}`,\n    details: event.description,\n    ...(event.location && { location: event.location }),\n  });\n\n  return `https://calendar.google.com/calendar/render?${params.toString()}`;\n}\n\n// Create calendar events for an order with all reminder types\nexport function createOrderCalendarUrls(order: OrderWithRelations): { \n  delivery?: string; \n  reviewRating?: string;\n  refundForm?: string;\n  mediatorPayment?: string;\n} {\n  const urls: { \n    delivery?: string; \n    reviewRating?: string;\n    refundForm?: string;\n    mediatorPayment?: string;\n  } = {};\n\n  const toDate = (dateInput: string | Date | null | undefined): Date | null => {\n    if (!dateInput) return null;\n    return typeof dateInput === 'string' ? new Date(dateInput) : dateInput;\n  };\n\n  const deliveryDate = toDate(order.deliveryDate);\n\n  // 1. Delivery reminder event (on delivery date)\n  if (deliveryDate) {\n    const deliveryStart = new Date(deliveryDate);\n    deliveryStart.setHours(10, 0, 0, 0); // 10 AM\n    const deliveryEnd = new Date(deliveryStart);\n    deliveryEnd.setHours(11, 0, 0, 0); // 11 AM\n\n    urls.delivery = createGoogleCalendarUrl({\n      title: `📦 Product Delivery: ${order.productName}`,\n      description: `Product: ${order.productName}\\nAccount: ${order.account.name}\\nPlatform: ${order.platform}`,\n      startDateTime: deliveryStart,\n      endDateTime: deliveryEnd,\n    });\n\n    // 2. Review Rating reminder (2 days after delivery)\n    const reviewRatingDate = new Date(deliveryDate);\n    reviewRatingDate.setDate(reviewRatingDate.getDate() + 2);\n    reviewRatingDate.setHours(14, 0, 0, 0); // 2 PM\n    const reviewRatingEnd = new Date(reviewRatingDate);\n    reviewRatingEnd.setHours(15, 0, 0, 0); // 3 PM\n\n    const reviewDescription = `Product: ${order.productName}\\nAccount: ${order.account.name}\\nPlatform: ${order.platform}\\nOrder ID: ${order.orderId}\\nMediator: ${order.mediator.name} (${order.mediator.whatsappNumber})${order.comments ? `\\n\\nComments:\\n${order.comments}` : ''}`;\n\n    urls.reviewRating = createGoogleCalendarUrl({\n      title: `⭐ Complete Review & Rating: ${order.productName}`,\n      description: reviewDescription,\n      startDateTime: reviewRatingDate,\n      endDateTime: reviewRatingEnd,\n    });\n\n    // 3. Refund Form reminder (7 days after delivery)\n    const refundFormDate = new Date(deliveryDate);\n    refundFormDate.setDate(refundFormDate.getDate() + 7);\n    refundFormDate.setHours(15, 0, 0, 0); // 3 PM\n    const refundFormEnd = new Date(refundFormDate);\n    refundFormEnd.setHours(16, 0, 0, 0); // 4 PM\n\n    const refundDescription = `Product: ${order.productName}\\nAccount: ${order.account.name}\\nPlatform: ${order.platform}\\nOrder ID: ${order.orderId}\\nMediator: ${order.mediator.name}${order.refundFormLink ? `\\n\\nRefund Form Link:\\n${order.refundFormLink}` : ''}`;\n\n    urls.refundForm = createGoogleCalendarUrl({\n      title: `💰 Submit Refund Form: ${order.productName}`,\n      description: refundDescription,\n      startDateTime: refundFormDate,\n      endDateTime: refundFormEnd,\n    });\n\n    // 4. Mediator Payment reminder (20 days after delivery)\n    const mediatorPaymentDate = new Date(deliveryDate);\n    mediatorPaymentDate.setDate(mediatorPaymentDate.getDate() + 20);\n    mediatorPaymentDate.setHours(10, 0, 0, 0); // 10 AM\n    const mediatorPaymentEnd = new Date(mediatorPaymentDate);\n    mediatorPaymentEnd.setHours(11, 0, 0, 0); // 11 AM\n\n    // Create WhatsApp message for mediator contact\n    const phoneNumber = order.mediator.whatsappNumber.replace(/\\D/g, '');\n    const whatsappMessage = `Hi ${order.mediator.name}! Following up on payment for Order ID: ${order.orderId} - ${order.productName}`;\n    const encodedMessage = encodeURIComponent(whatsappMessage);\n    const whatsappLink = `https://wa.me/${phoneNumber}?text=${encodedMessage}`;\n\n    const paymentDescription = `Product: ${order.productName}\\nAccount: ${order.account.name}\\nPlatform: ${order.platform}\\nOrder ID: ${order.orderId}\\nMediator: ${order.mediator.name} (${order.mediator.whatsappNumber})\\n\\nDirect WhatsApp Link:\\n${whatsappLink}`;\n\n    urls.mediatorPayment = createGoogleCalendarUrl({\n      title: `💸 Follow Up: Payment Status - ${order.productName}`,\n      description: paymentDescription,\n      startDateTime: mediatorPaymentDate,\n      endDateTime: mediatorPaymentEnd,\n    });\n  }\n\n  return urls;\n}","size_bytes":5080},"client/src/components/dashboard/smart-notifications.tsx":{"content":"import { useMemo } from \"react\";\nimport { OrderWithRelations } from \"@shared/schema\";\nimport { Card, CardHeader, CardTitle, CardContent } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { \n  AlertCircle, \n  Clock, \n  Calendar,\n  ArrowRight,\n  Bell,\n  CheckCircle2\n} from \"lucide-react\";\nimport { formatDistanceToNow } from \"date-fns\";\nimport { Link } from \"wouter\";\nimport { formatCurrency } from \"@/lib/currency\";\n\ninterface SmartNotificationsProps {\n  orders: OrderWithRelations[];\n  isLoading?: boolean;\n}\n\ninterface Notification {\n  id: string;\n  orderId: string;\n  type: \"critical\" | \"warning\" | \"info\";\n  title: string;\n  message: string;\n  actionLabel: string;\n  orderDetails: {\n    productName: string;\n    platform: string;\n    amount: number;\n  };\n  daysOverdue?: number;\n  deadline?: Date;\n}\n\nexport function SmartNotifications({ orders, isLoading }: SmartNotificationsProps) {\n  const notifications = useMemo(() => {\n    const now = new Date();\n    const notifications: Notification[] = [];\n\n    orders.forEach(order => {\n      const twoDaysFromNow = new Date(now.getTime() + 2 * 24 * 60 * 60 * 1000);\n      const threeDaysFromNow = new Date(now.getTime() + 3 * 24 * 60 * 60 * 1000);\n\n      // Critical: Overdue refund form\n      if (order.currentStatus === \"Overdue Passed for Refund Form\") {\n        notifications.push({\n          id: `${order.id}-overdue-refund`,\n          orderId: order.id,\n          type: \"critical\",\n          title: \"Overdue Refund Form\",\n          message: \"Refund form deadline has passed\",\n          actionLabel: \"Submit Now\",\n          orderDetails: {\n            productName: order.productName,\n            platform: order.platform,\n            amount: order.refundAmount,\n          },\n        });\n      }\n\n      // Critical: Delivered but no action taken\n      if (order.currentStatus === \"Delivered\" && order.deliveryDate) {\n        const daysSinceDelivery = Math.floor((now.getTime() - new Date(order.deliveryDate).getTime()) / (1000 * 60 * 60 * 24));\n        if (daysSinceDelivery >= 3) {\n          notifications.push({\n            id: `${order.id}-delivered-action`,\n            orderId: order.id,\n            type: \"critical\",\n            title: \"Action Required\",\n            message: `Delivered ${daysSinceDelivery} days ago - Submit review now`,\n            actionLabel: \"Complete Review\",\n            orderDetails: {\n              productName: order.productName,\n              platform: order.platform,\n              amount: order.refundAmount,\n            },\n            daysOverdue: daysSinceDelivery - 3,\n          });\n        }\n      }\n\n      // Warning: Upcoming delivery deadline\n      if (order.deliveryDate && order.currentStatus === \"Ordered\") {\n        const deliveryDate = new Date(order.deliveryDate);\n        if (deliveryDate <= threeDaysFromNow && deliveryDate > now) {\n          notifications.push({\n            id: `${order.id}-delivery-soon`,\n            orderId: order.id,\n            type: \"warning\",\n            title: \"Delivery Expected Soon\",\n            message: `Expected ${formatDistanceToNow(deliveryDate, { addSuffix: true })}`,\n            actionLabel: \"View Order\",\n            orderDetails: {\n              productName: order.productName,\n              platform: order.platform,\n              amount: order.orderAmount,\n            },\n            deadline: deliveryDate,\n          });\n        }\n      }\n\n      // Warning: Upcoming refund form deadline\n      if (order.refundFormDate && order.currentStatus === \"Deliverables Done\") {\n        const refundFormDate = new Date(order.refundFormDate);\n        if (refundFormDate <= threeDaysFromNow && refundFormDate > now) {\n          notifications.push({\n            id: `${order.id}-refund-soon`,\n            orderId: order.id,\n            type: \"warning\",\n            title: \"Refund Form Due Soon\",\n            message: `Due ${formatDistanceToNow(refundFormDate, { addSuffix: true })}`,\n            actionLabel: \"Submit Form\",\n            orderDetails: {\n              productName: order.productName,\n              platform: order.platform,\n              amount: order.refundAmount,\n            },\n            deadline: refundFormDate,\n          });\n        }\n      }\n\n      // Info: Remind mediator for payment\n      if (order.currentStatus === \"Remind Mediator for Payment\") {\n        notifications.push({\n          id: `${order.id}-remind-mediator`,\n          orderId: order.id,\n          type: \"info\",\n          title: \"Follow Up with Mediator\",\n          message: \"Payment reminder needed\",\n          actionLabel: \"Contact Mediator\",\n          orderDetails: {\n            productName: order.productName,\n            platform: order.platform,\n            amount: order.refundAmount,\n          },\n        });\n      }\n    });\n\n    // Sort by priority: critical first, then warning, then info\n    return notifications.sort((a, b) => {\n      const priority = { critical: 0, warning: 1, info: 2 };\n      return priority[a.type] - priority[b.type];\n    }).slice(0, 5); // Show max 5 notifications\n  }, [orders]);\n\n  if (isLoading) {\n    return (\n      <Card className=\"card-shadow\">\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Bell className=\"w-5 h-5\" />\n            Smart Notifications\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"space-y-3\">\n            {[1, 2, 3].map(i => (\n              <div key={i} className=\"h-20 bg-muted/20 rounded-lg animate-pulse\" />\n            ))}\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  if (notifications.length === 0) {\n    return (\n      <Card className=\"card-shadow\">\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Bell className=\"w-5 h-5\" />\n            Smart Notifications\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"flex flex-col items-center justify-center py-8 text-center\">\n            <CheckCircle2 className=\"w-12 h-12 text-green-600 mb-3\" />\n            <p className=\"text-sm font-medium\">All caught up!</p>\n            <p className=\"text-xs text-muted-foreground mt-1\">No orders need immediate attention</p>\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  const getNotificationIcon = (type: Notification[\"type\"]) => {\n    switch (type) {\n      case \"critical\":\n        return <AlertCircle className=\"w-4 h-4\" />;\n      case \"warning\":\n        return <Clock className=\"w-4 h-4\" />;\n      case \"info\":\n        return <Calendar className=\"w-4 h-4\" />;\n    }\n  };\n\n  const getNotificationColor = (type: Notification[\"type\"]) => {\n    switch (type) {\n      case \"critical\":\n        return \"text-red-600 bg-red-50 border-red-200 dark:bg-red-950 dark:border-red-900\";\n      case \"warning\":\n        return \"text-orange-600 bg-orange-50 border-orange-200 dark:bg-orange-950 dark:border-orange-900\";\n      case \"info\":\n        return \"text-blue-600 bg-blue-50 border-blue-200 dark:bg-blue-950 dark:border-blue-900\";\n    }\n  };\n\n  const getBadgeVariant = (type: Notification[\"type\"]) => {\n    switch (type) {\n      case \"critical\":\n        return \"destructive\";\n      case \"warning\":\n        return \"outline\";\n      case \"info\":\n        return \"secondary\";\n    }\n  };\n\n  return (\n    <Card className=\"card-shadow\" data-testid=\"smart-notifications\">\n      <CardHeader>\n        <CardTitle className=\"flex items-center gap-2\">\n          <Bell className=\"w-5 h-5\" />\n          Smart Notifications\n          {notifications.length > 0 && (\n            <Badge variant=\"destructive\" className=\"ml-auto\">\n              {notifications.length}\n            </Badge>\n          )}\n        </CardTitle>\n      </CardHeader>\n      <CardContent>\n        <div className=\"space-y-3\">\n          {notifications.map((notification) => (\n            <Link key={notification.id} href={`/orders?highlight=${notification.orderId}`}>\n              <div\n                className={`p-3 rounded-lg border transition-all hover:shadow-md cursor-pointer ${getNotificationColor(notification.type)}`}\n                data-testid={`notification-${notification.type}`}\n              >\n                <div className=\"flex items-start gap-3\">\n                  <div className=\"mt-0.5\">\n                    {getNotificationIcon(notification.type)}\n                  </div>\n                  <div className=\"flex-1 min-w-0\">\n                    <div className=\"flex items-start justify-between gap-2 mb-1\">\n                      <p className=\"text-sm font-semibold truncate\">\n                        {notification.title}\n                      </p>\n                      <Badge variant={getBadgeVariant(notification.type)} className=\"text-xs shrink-0\">\n                        {notification.type.toUpperCase()}\n                      </Badge>\n                    </div>\n                    <p className=\"text-xs mb-2\">\n                      {notification.message}\n                    </p>\n                    <div className=\"flex items-center justify-between gap-2\">\n                      <div className=\"text-xs truncate\">\n                        <span className=\"font-medium\">{notification.orderDetails.productName}</span>\n                        {\" • \"}\n                        <span>{notification.orderDetails.platform}</span>\n                        {\" • \"}\n                        <span className=\"font-semibold\">{formatCurrency(notification.orderDetails.amount)}</span>\n                      </div>\n                      <ArrowRight className=\"w-3 h-3 shrink-0\" />\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </Link>\n          ))}\n        </div>\n        \n        {notifications.length >= 5 && (\n          <Link href=\"/orders\">\n            <Button variant=\"outline\" className=\"w-full mt-3\" size=\"sm\" data-testid=\"view-all-orders\">\n              View All Orders\n              <ArrowRight className=\"w-4 h-4 ml-2\" />\n            </Button>\n          </Link>\n        )}\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":10120},"client/src/pages/activity-log.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport MainLayout from \"@/components/layout/main-layout\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { ActivityLogWithOrder, OrderWithRelations } from \"@shared/schema\";\nimport { formatDistanceToNow } from \"date-fns\";\nimport { \n  Activity, \n  Filter, \n  ChevronRight,\n  Clock,\n  PackageCheck,\n  Edit,\n  Calendar,\n  X\n} from \"lucide-react\";\nimport { formatCurrency } from \"@/lib/currency\";\n\nconst activityTypeColors: Record<string, string> = {\n  \"Order Created\": \"bg-blue-100 text-blue-800 dark:bg-blue-950 dark:text-blue-300\",\n  \"Status Changed\": \"bg-purple-100 text-purple-800 dark:bg-purple-950 dark:text-purple-300\",\n  \"Order Updated\": \"bg-orange-100 text-orange-800 dark:bg-orange-950 dark:text-orange-300\",\n  \"Dates Modified\": \"bg-green-100 text-green-800 dark:bg-green-950 dark:text-green-300\",\n  \"Calendar Event Created\": \"bg-indigo-100 text-indigo-800 dark:bg-indigo-950 dark:text-indigo-300\",\n  \"Calendar Event Updated\": \"bg-cyan-100 text-cyan-800 dark:bg-cyan-950 dark:text-cyan-300\",\n  \"Calendar Event Deleted\": \"bg-red-100 text-red-800 dark:bg-red-950 dark:text-red-300\",\n};\n\nconst activityTypeIcons: Record<string, React.ReactNode> = {\n  \"Order Created\": <PackageCheck className=\"w-4 h-4\" />,\n  \"Status Changed\": <Activity className=\"w-4 h-4\" />,\n  \"Order Updated\": <Edit className=\"w-4 h-4\" />,\n  \"Dates Modified\": <Clock className=\"w-4 h-4\" />,\n  \"Calendar Event Created\": <Calendar className=\"w-4 h-4\" />,\n  \"Calendar Event Updated\": <Calendar className=\"w-4 h-4\" />,\n  \"Calendar Event Deleted\": <Calendar className=\"w-4 h-4\" />,\n};\n\nexport default function ActivityLog() {\n  const { isAuthenticated } = useAuth();\n  const [selectedOrderId, setSelectedOrderId] = useState<string | null>(null);\n  const [selectedActivityType, setSelectedActivityType] = useState<string | null>(null);\n\n  const { data: orders = [] } = useQuery<OrderWithRelations[]>({\n    queryKey: [\"/api/orders\"],\n    enabled: isAuthenticated,\n  });\n\n  // Build query params\n  const params = new URLSearchParams();\n  if (selectedOrderId) params.append('orderId', selectedOrderId);\n  if (selectedActivityType) params.append('activityType', selectedActivityType);\n  params.append('limit', '50');\n  \n  const queryString = params.toString();\n  const queryUrl = queryString ? `/api/activity-logs?${queryString}` : '/api/activity-logs';\n\n  const { data: activityLogs = [], isLoading } = useQuery<ActivityLogWithOrder[]>({\n    queryKey: [queryUrl],\n    enabled: isAuthenticated,\n  });\n\n  const clearFilters = () => {\n    setSelectedOrderId(null);\n    setSelectedActivityType(null);\n  };\n\n  const hasActiveFilters = selectedOrderId || selectedActivityType;\n\n  return (\n    <MainLayout>\n      {/* Header */}\n      <header className=\"bg-card border-b border-border px-4 lg:px-8 py-4 lg:py-6\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h1 className=\"text-xl lg:text-2xl font-semibold flex items-center gap-2\" data-testid=\"page-title\">\n              <Activity className=\"w-6 h-6\" />\n              Activity Log\n            </h1>\n            <p className=\"text-sm text-muted-foreground hidden sm:block\">Track all changes to your orders</p>\n          </div>\n        </div>\n      </header>\n\n      <div className=\"p-4 lg:p-8\">\n        {/* Filters */}\n        <Card className=\"mb-6 card-shadow\">\n          <CardContent className=\"p-4 lg:p-6\">\n            <div className=\"flex flex-col sm:flex-row gap-3 lg:gap-4\">\n              <div className=\"flex items-center gap-2 text-sm font-medium text-muted-foreground shrink-0\">\n                <Filter className=\"w-4 h-4\" />\n                Filters:\n              </div>\n              \n              <div className=\"flex-1 flex flex-col sm:flex-row gap-3\">\n                {/* Order Filter */}\n                <Select\n                  value={selectedOrderId || \"all\"}\n                  onValueChange={(value) => setSelectedOrderId(value === \"all\" ? null : value)}\n                >\n                  <SelectTrigger className=\"w-full sm:w-[250px]\" data-testid=\"filter-order\">\n                    <SelectValue placeholder=\"All Orders\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"all\">All Orders</SelectItem>\n                    {orders.map((order) => (\n                      <SelectItem key={order.id} value={order.id}>\n                        {order.productName} ({order.platform})\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n\n                {/* Activity Type Filter */}\n                <Select\n                  value={selectedActivityType || \"all\"}\n                  onValueChange={(value) => setSelectedActivityType(value === \"all\" ? null : value)}\n                >\n                  <SelectTrigger className=\"w-full sm:w-[200px]\" data-testid=\"filter-activity-type\">\n                    <SelectValue placeholder=\"All Activity Types\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"all\">All Activity Types</SelectItem>\n                    <SelectItem value=\"Order Created\">Order Created</SelectItem>\n                    <SelectItem value=\"Status Changed\">Status Changed</SelectItem>\n                    <SelectItem value=\"Order Updated\">Order Updated</SelectItem>\n                    <SelectItem value=\"Dates Modified\">Dates Modified</SelectItem>\n                    <SelectItem value=\"Calendar Event Created\">Calendar Event Created</SelectItem>\n                    <SelectItem value=\"Calendar Event Updated\">Calendar Event Updated</SelectItem>\n                    <SelectItem value=\"Calendar Event Deleted\">Calendar Event Deleted</SelectItem>\n                  </SelectContent>\n                </Select>\n\n                {hasActiveFilters && (\n                  <Button \n                    variant=\"outline\" \n                    size=\"sm\" \n                    onClick={clearFilters}\n                    className=\"sm:ml-auto\"\n                    data-testid=\"clear-filters\"\n                  >\n                    <X className=\"w-4 h-4 mr-2\" />\n                    Clear Filters\n                  </Button>\n                )}\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Activity Timeline */}\n        <Card className=\"card-shadow\">\n          <CardContent className=\"p-4 lg:p-6\">\n            {isLoading ? (\n              <div className=\"space-y-4\">\n                {[1, 2, 3, 4, 5].map((i) => (\n                  <div key={i} className=\"flex gap-4\">\n                    <div className=\"w-10 h-10 bg-muted rounded-full animate-pulse\" />\n                    <div className=\"flex-1 space-y-2\">\n                      <div className=\"h-4 bg-muted rounded w-1/4 animate-pulse\" />\n                      <div className=\"h-3 bg-muted rounded w-3/4 animate-pulse\" />\n                      <div className=\"h-3 bg-muted rounded w-1/2 animate-pulse\" />\n                    </div>\n                  </div>\n                ))}\n              </div>\n            ) : activityLogs.length === 0 ? (\n              <div className=\"text-center py-12\">\n                <Activity className=\"w-12 h-12 text-muted-foreground mx-auto mb-3\" />\n                <p className=\"text-sm font-medium text-muted-foreground\">No activity logs found</p>\n                <p className=\"text-xs text-muted-foreground mt-1\">\n                  {hasActiveFilters ? \"Try adjusting your filters\" : \"Activity will appear here when you create or update orders\"}\n                </p>\n              </div>\n            ) : (\n              <div className=\"space-y-4\">\n                {activityLogs.map((log, index) => (\n                  <div \n                    key={log.id} \n                    className=\"flex gap-4 group hover:bg-muted/30 -mx-2 p-2 rounded-lg transition-colors\"\n                    data-testid={`activity-log-${index}`}\n                  >\n                    {/* Timeline dot */}\n                    <div className=\"relative\">\n                      <div className={`w-10 h-10 rounded-full flex items-center justify-center ${activityTypeColors[log.activityType] || \"bg-gray-100 text-gray-800\"}`}>\n                        {activityTypeIcons[log.activityType] || <Activity className=\"w-4 h-4\" />}\n                      </div>\n                      {index !== activityLogs.length - 1 && (\n                        <div className=\"absolute top-10 left-1/2 -translate-x-1/2 w-0.5 h-full bg-border\" />\n                      )}\n                    </div>\n\n                    {/* Content */}\n                    <div className=\"flex-1 min-w-0 pt-1\">\n                      <div className=\"flex items-start justify-between gap-2 mb-1\">\n                        <div className=\"flex-1 min-w-0\">\n                          <div className=\"flex items-center gap-2 mb-1\">\n                            <Badge variant=\"outline\" className=\"text-xs\">\n                              {log.activityType}\n                            </Badge>\n                            <span className=\"text-xs text-muted-foreground\">\n                              {log.createdAt && formatDistanceToNow(new Date(log.createdAt), { addSuffix: true })}\n                            </span>\n                          </div>\n                          <p className=\"text-sm font-medium mb-1\">{log.description}</p>\n                          \n                          {log.order && (\n                            <div className=\"flex items-center gap-2 text-xs text-muted-foreground mb-2\">\n                              <span className=\"truncate font-medium\">{log.order.productName}</span>\n                              <ChevronRight className=\"w-3 h-3 shrink-0\" />\n                              <Badge variant=\"secondary\" className=\"text-xs\">\n                                {log.order.platform}\n                              </Badge>\n                              <span className=\"shrink-0\">{formatCurrency(log.order.orderAmount)}</span>\n                            </div>\n                          )}\n\n                          {(log.oldValue || log.newValue) && (\n                            <div className=\"mt-2 p-2 bg-muted/50 rounded-md text-xs\">\n                              {log.oldValue && (\n                                <div className=\"mb-1\">\n                                  <span className=\"font-medium\">From: </span>\n                                  <span className=\"text-muted-foreground\">{log.oldValue}</span>\n                                </div>\n                              )}\n                              {log.newValue && (\n                                <div>\n                                  <span className=\"font-medium\">To: </span>\n                                  <span className=\"text-muted-foreground\">{log.newValue}</span>\n                                </div>\n                              )}\n                            </div>\n                          )}\n                        </div>\n                        \n                        <Badge variant=\"outline\" className=\"text-xs shrink-0\">\n                          {log.triggeredBy}\n                        </Badge>\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            )}\n          </CardContent>\n        </Card>\n      </div>\n    </MainLayout>\n  );\n}\n","size_bytes":11708},"server/calendar-sync.ts":{"content":"import { googleCalendarService } from \"./google-calendar\";\nimport { storage } from \"./storage\";\nimport { Order } from \"@shared/schema\";\n\ninterface CalendarEventIds {\n  delivery?: string;\n  review?: string;\n  refundForm?: string;\n}\n\nexport async function syncOrderToCalendar(\n  userId: string,\n  order: Order,\n  action: \"create\" | \"update\" | \"delete\"\n): Promise<void> {\n  try {\n    // Get user settings to check if calendar is enabled\n    const settings = await storage.getUserSettings(userId);\n    \n    if (!settings?.calendarEnabled || !settings.googleAccessToken) {\n      return; // Calendar not enabled or not connected\n    }\n\n    // Parse existing event IDs\n    const existingEventIds: CalendarEventIds = order.calendarEventIds \n      ? JSON.parse(order.calendarEventIds) \n      : {};\n\n    // Handle delete action\n    if (action === \"delete\") {\n      // Delete all calendar events for this order\n      if (existingEventIds.delivery) {\n        await googleCalendarService.deleteCalendarEvent(\n          settings.googleAccessToken,\n          settings.googleRefreshToken!,\n          existingEventIds.delivery,\n          settings.calendarId || 'primary'\n        );\n      }\n      if (existingEventIds.review) {\n        await googleCalendarService.deleteCalendarEvent(\n          settings.googleAccessToken,\n          settings.googleRefreshToken!,\n          existingEventIds.review,\n          settings.calendarId || 'primary'\n        );\n      }\n      if (existingEventIds.refundForm) {\n        await googleCalendarService.deleteCalendarEvent(\n          settings.googleAccessToken,\n          settings.googleRefreshToken!,\n          existingEventIds.refundForm,\n          settings.calendarId || 'primary'\n        );\n      }\n\n      // Log calendar event deletion\n      await storage.createActivityLog(userId, {\n        orderId: order.id,\n        activityType: \"Calendar Event Deleted\",\n        description: `Calendar events removed for ${order.productName}`,\n        triggeredBy: \"System\"\n      });\n      return;\n    }\n\n    const newEventIds: CalendarEventIds = {};\n\n    // If delivery date is cleared, delete all events and clear IDs\n    if (!order.deliveryDate && action === \"update\") {\n      if (existingEventIds.delivery) {\n        await googleCalendarService.deleteCalendarEvent(\n          settings.googleAccessToken,\n          settings.googleRefreshToken!,\n          existingEventIds.delivery,\n          settings.calendarId || 'primary'\n        );\n      }\n      if (existingEventIds.review) {\n        await googleCalendarService.deleteCalendarEvent(\n          settings.googleAccessToken,\n          settings.googleRefreshToken!,\n          existingEventIds.review,\n          settings.calendarId || 'primary'\n        );\n      }\n      if (existingEventIds.refundForm) {\n        await googleCalendarService.deleteCalendarEvent(\n          settings.googleAccessToken,\n          settings.googleRefreshToken!,\n          existingEventIds.refundForm,\n          settings.calendarId || 'primary'\n        );\n      }\n\n      // Clear calendar event IDs\n      await storage.updateOrder(order.id, userId, {\n        calendarEventIds: null\n      });\n\n      await storage.createActivityLog(userId, {\n        orderId: order.id,\n        activityType: \"Calendar Event Deleted\",\n        description: `Calendar events removed (delivery date cleared) for ${order.productName}`,\n        triggeredBy: \"System\"\n      });\n      return;\n    }\n\n    // Only sync if delivery date is set\n    if (!order.deliveryDate) {\n      return;\n    }\n\n    const deliveryDate = new Date(order.deliveryDate);\n    \n    // 1. Delivery reminder event\n    const deliveryStart = new Date(deliveryDate);\n    deliveryStart.setHours(10, 0, 0, 0);\n    const deliveryEnd = new Date(deliveryStart);\n    deliveryEnd.setHours(11, 0, 0, 0);\n\n    const deliveryEventData = {\n      title: `📦 Product Delivery: ${order.productName}`,\n      description: `Product: ${order.productName}\\nPlatform: ${order.platform}\\nOrder ID: ${order.orderId}`,\n      startDateTime: deliveryStart,\n      endDateTime: deliveryEnd,\n      calendarId: settings.calendarId || 'primary'\n    };\n\n    if (existingEventIds.delivery && action === \"update\") {\n      // Update existing event\n      await googleCalendarService.updateCalendarEvent(\n        settings.googleAccessToken,\n        settings.googleRefreshToken!,\n        existingEventIds.delivery,\n        deliveryEventData\n      );\n      newEventIds.delivery = existingEventIds.delivery;\n    } else {\n      // Create new event\n      const event = await googleCalendarService.createCalendarEvent(\n        settings.googleAccessToken,\n        settings.googleRefreshToken!,\n        deliveryEventData\n      );\n      newEventIds.delivery = event.id!;\n    }\n\n    // 2. Review reminder event (2 days after delivery)\n    const reviewDate = new Date(deliveryDate);\n    reviewDate.setDate(reviewDate.getDate() + 2);\n    reviewDate.setHours(14, 0, 0, 0);\n    const reviewEnd = new Date(reviewDate);\n    reviewEnd.setHours(15, 0, 0, 0);\n\n    const reviewEventData = {\n      title: `⭐ Complete Review & Rating: ${order.productName}`,\n      description: `Product: ${order.productName}\\nPlatform: ${order.platform}\\nOrder ID: ${order.orderId}`,\n      startDateTime: reviewDate,\n      endDateTime: reviewEnd,\n      calendarId: settings.calendarId || 'primary'\n    };\n\n    if (existingEventIds.review && action === \"update\") {\n      await googleCalendarService.updateCalendarEvent(\n        settings.googleAccessToken,\n        settings.googleRefreshToken!,\n        existingEventIds.review,\n        reviewEventData\n      );\n      newEventIds.review = existingEventIds.review;\n    } else {\n      const event = await googleCalendarService.createCalendarEvent(\n        settings.googleAccessToken,\n        settings.googleRefreshToken!,\n        reviewEventData\n      );\n      newEventIds.review = event.id!;\n    }\n\n    // 3. Refund form reminder if date is set\n    if (order.refundFormDate) {\n      const refundDate = new Date(order.refundFormDate);\n      refundDate.setHours(15, 0, 0, 0);\n      const refundEnd = new Date(refundDate);\n      refundEnd.setHours(16, 0, 0, 0);\n\n      const refundEventData = {\n        title: `💰 Submit Refund Form: ${order.productName}`,\n        description: `Product: ${order.productName}\\nPlatform: ${order.platform}\\nOrder ID: ${order.orderId}${order.refundFormLink ? `\\nForm Link: ${order.refundFormLink}` : ''}`,\n        startDateTime: refundDate,\n        endDateTime: refundEnd,\n        calendarId: settings.calendarId || 'primary'\n      };\n\n      if (existingEventIds.refundForm && action === \"update\") {\n        await googleCalendarService.updateCalendarEvent(\n          settings.googleAccessToken,\n          settings.googleRefreshToken!,\n          existingEventIds.refundForm,\n          refundEventData\n        );\n        newEventIds.refundForm = existingEventIds.refundForm;\n      } else {\n        const event = await googleCalendarService.createCalendarEvent(\n          settings.googleAccessToken,\n          settings.googleRefreshToken!,\n          refundEventData\n        );\n        newEventIds.refundForm = event.id!;\n      }\n    } else if (existingEventIds.refundForm && action === \"update\") {\n      // Refund form date was cleared - delete the event\n      await googleCalendarService.deleteCalendarEvent(\n        settings.googleAccessToken,\n        settings.googleRefreshToken!,\n        existingEventIds.refundForm,\n        settings.calendarId || 'primary'\n      );\n    }\n\n    // Update order with calendar event IDs (or clear if none)\n    await storage.updateOrder(order.id, userId, {\n      calendarEventIds: Object.keys(newEventIds).length > 0 ? JSON.stringify(newEventIds) : null\n    });\n\n    // Log calendar sync\n    const activityType = action === \"create\" ? \"Calendar Event Created\" : \"Calendar Event Updated\";\n    await storage.createActivityLog(userId, {\n      orderId: order.id,\n      activityType,\n      description: `Calendar events ${action === \"create\" ? \"created\" : \"updated\"} for ${order.productName}`,\n      triggeredBy: \"System\"\n    });\n\n  } catch (error) {\n    console.error(\"Error syncing order to calendar:\", error);\n    // Don't throw - calendar sync should not block order operations\n  }\n}\n","size_bytes":8202}},"version":1}